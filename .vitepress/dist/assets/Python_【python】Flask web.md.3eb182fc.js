import{_ as s,o as a,c as n,O as l}from"./chunks/framework.4afe7240.js";const i=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"Python/【python】Flask web.md","filePath":"Python/【python】Flask web.md"}'),p={name:"Python/【python】Flask web.md"},o=l(`<div class="language-typescript"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">Django是一个开放源代码的Web应用框架，由Python写成。</span><span style="color:#82AAFF;">采用了MTV的框架模式</span><span style="color:#A6ACCD;">()模型M，模板T和视图V)</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> Flask功能没Django多，但是够用了</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">开始一个项目</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    python manage</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">py makemigrations #在Application的models</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">py中建立数据库模型</span></span>
<span class="line"><span style="color:#A6ACCD;">    python manage</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">py migrat e#Django默认表创建</span></span>
<span class="line"><span style="color:#A6ACCD;">    python manage</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">py runserver dev</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">paas</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">bk</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">uat</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">bkty</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">xyz:</span><span style="color:#F78C6C;">8000</span><span style="color:#A6ACCD;"> #启动服务</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//不断地监听文件的变化</span></span>
<span class="line"><span style="color:#82AAFF;">watched_files</span><span style="color:#A6ACCD;"> (d:\\Desktop\\cloud</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">cmp</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">backend\\</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">venv\\Lib\\site</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">packages\\django\\utils\\autoreload</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">py:</span><span style="color:#F78C6C;">267</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#82AAFF;">snapshot_files</span><span style="color:#A6ACCD;"> (d:\\Desktop\\cloud</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">cmp</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">backend\\</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">venv\\Lib\\site</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">packages\\django\\utils\\autoreload</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">py:</span><span style="color:#F78C6C;">363</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#82AAFF;">tick</span><span style="color:#A6ACCD;"> (d:\\Desktop\\cloud</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">cmp</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">backend\\</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">venv\\Lib\\site</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">packages\\django\\utils\\autoreload</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">py:</span><span style="color:#F78C6C;">347</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#82AAFF;">run_loop</span><span style="color:#A6ACCD;"> (d:\\Desktop\\cloud</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">cmp</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">backend\\</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">venv\\Lib\\site</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">packages\\django\\utils\\autoreload</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">py:</span><span style="color:#F78C6C;">307</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#82AAFF;">run</span><span style="color:#A6ACCD;"> (d:\\Desktop\\cloud</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">cmp</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">backend\\</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">venv\\Lib\\site</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">packages\\django\\utils\\autoreload</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">py:</span><span style="color:#F78C6C;">301</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#82AAFF;">start_django</span><span style="color:#A6ACCD;"> (d:\\Desktop\\cloud</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">cmp</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">backend\\</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">venv\\Lib\\site</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">packages\\django\\utils\\autoreload</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">py:</span><span style="color:#F78C6C;">583</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#82AAFF;">run_with_reloader</span><span style="color:#A6ACCD;"> (d:\\Desktop\\cloud</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">cmp</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">backend\\</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">venv\\Lib\\site</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">packages\\django\\utils\\autoreload</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">py:</span><span style="color:#F78C6C;">598</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#82AAFF;">run</span><span style="color:#A6ACCD;"> (d:\\Desktop\\cloud</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">cmp</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">backend\\</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">venv\\Lib\\site</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">packages\\django\\core\\management\\commands\\runserver</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">py:</span><span style="color:#F78C6C;">102</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#82AAFF;">handle</span><span style="color:#A6ACCD;"> (d:\\Desktop\\cloud</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">cmp</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">backend\\</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">venv\\Lib\\site</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">packages\\django\\core\\management\\commands\\runserver</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">py:</span><span style="color:#F78C6C;">95</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#82AAFF;">execute</span><span style="color:#A6ACCD;"> (d:\\Desktop\\cloud</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">cmp</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">backend\\</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">venv\\Lib\\site</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">packages\\django\\core\\management\\base</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">py:</span><span style="color:#F78C6C;">364</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#82AAFF;">execute</span><span style="color:#A6ACCD;"> (d:\\Desktop\\cloud</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">cmp</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">backend\\</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">venv\\Lib\\site</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">packages\\django\\core\\management\\commands\\runserver</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">py:</span><span style="color:#F78C6C;">60</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#82AAFF;">run_from_argv</span><span style="color:#A6ACCD;"> (d:\\Desktop\\cloud</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">cmp</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">backend\\</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">venv\\Lib\\site</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">packages\\django\\core\\management\\base</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">py:</span><span style="color:#F78C6C;">323</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#82AAFF;">execute</span><span style="color:#A6ACCD;"> (d:\\Desktop\\cloud</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">cmp</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">backend\\</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">venv\\Lib\\site</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">packages\\django\\core\\management\\__init__</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">py:</span><span style="color:#F78C6C;">375</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#82AAFF;">execute_from_command_line</span><span style="color:#A6ACCD;"> (d:\\Desktop\\cloud</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">cmp</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">backend\\</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">venv\\Lib\\site</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">packages\\django\\core\\management\\__init__</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">py:</span><span style="color:#F78C6C;">381</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">module</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">d</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">\\</span><span style="color:#FFCB6B;">Desktop</span><span style="color:#A6ACCD;">\\</span><span style="color:#FFCB6B;">cloud</span><span style="color:#A6ACCD;">-</span><span style="color:#FFCB6B;">cmp</span><span style="color:#A6ACCD;">-</span><span style="color:#FFCB6B;">backend</span><span style="color:#A6ACCD;">\\</span><span style="color:#FFCB6B;">manage</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">py</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">vscode安装python扩展,按F5选Django调试</span></span>
<span class="line"><span style="color:#A6ACCD;">d: </span></span>
<span class="line"><span style="color:#A6ACCD;">    &amp;&amp; cd d:\\Desktop\\cloud-cmp-backend </span></span>
<span class="line"><span style="color:#A6ACCD;">        &amp;&amp; cmd /C &quot;d:\\Desktop\\cloud-cmp-backend\\.venv\\Scripts\\python.exe </span></span>
<span class="line"><span style="color:#A6ACCD;">            c:\\Users\\cjm\\.vscode\\extensions\\ms-python.python-2022.4.1\\pythonFiles\\lib\\python\\debugpy\\launcher 9235 </span></span>
<span class="line"><span style="color:#A6ACCD;">                -- D:\\Desktop\\cloud-cmp-backend\\manage.py runserver &quot;</span></span></code></pre></div><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">一个最小的 Flask </span><span style="color:#FFCB6B;">应用</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    from flask </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> Flask</span></span>
<span class="line"><span style="color:#A6ACCD;">    app = Flask(__name__)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    @app.route(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    def hello_world():</span></span>
<span class="line"><span style="color:#A6ACCD;">        return </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Hello World!</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    if __name__ == </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">__main__</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        app.run()</span></span></code></pre></div><hr><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">pip install flask</span></span>
<span class="line"><span style="color:#A6ACCD;">app指的是Flask对象</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">pip install virtualenv			 </span><span style="color:#676E95;font-style:italic;">#虚拟环境，用法：创建，激活，关闭</span></span>
<span class="line"><span style="color:#A6ACCD;">apt</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">get install supervisor 		</span><span style="color:#676E95;font-style:italic;">#进程管理工具，用法：添加程序，用supervisorctl进行控制</span></span>
<span class="line"><span style="color:#A6ACCD;">Fabric</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">		通过SSH将应用部署到GitHub，并通知服务器电脑去拉取，用于快速部署</span></span>
<span class="line"><span style="color:#A6ACCD;">python hello</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">py</span><span style="color:#A6ACCD;"> runserver --host </span><span style="color:#F78C6C;">127.0</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">0</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">#运行flask服务器</span></span>
<span class="line"><span style="color:#82AAFF;">CGI</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">Common Gateway Interface</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">：让浏览器把</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">py解析成网页</span><span style="color:#A6ACCD;">（WSGI类似</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">ws是webserver</span><span style="color:#A6ACCD;">）</span></span>
<span class="line"><span style="color:#A6ACCD;">flask</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">rest：</span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> flask</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ext</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">restful </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> reqparse</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> Resource</span></span></code></pre></div><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">RESTful</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">API</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">GET </span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">SELECT</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">POST </span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">CREATE</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">//</span><span style="color:#A6ACCD;">但是在HTTP规范中POST是非等幂的</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">多次调用会产生不同的结果</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">比如</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">创建一个用户</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">由于网络原因或是其他原因多创建了几次</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">那么将会有多个用户被创建</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">PUT </span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">UPDATE</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">	</span><span style="color:#676E95;font-style:italic;">#更新post的东西,要传所有键,传缺了会丢失属性的</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">PATCH </span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">UPDATE局部</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">	</span><span style="color:#676E95;font-style:italic;">#只需传要改变的属性, 并且返回改变后的属性 PATCH一般是用来局部更新资源的,假设我们有一个UserInfo，里面有userId， userName， userGender等10个字段。可你的编辑功能因为需求，在某个特别的页面里只能修改userName，这时候的更新怎么做</span></span>
<span class="line"><span style="color:#A6ACCD;">    DELETE</span></span></code></pre></div><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">pip install flask</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">script			</span><span style="color:#676E95;font-style:italic;">#用一行命令来执行一个类中的方法</span></span>
<span class="line"><span style="color:#A6ACCD;">pip install pymongo</span><span style="color:#89DDFF;">==</span><span style="color:#F78C6C;">2.8</span><span style="color:#A6ACCD;"> 		</span><span style="color:#676E95;font-style:italic;">#Mongo-ORM flask-mongoengin</span></span>
<span class="line"><span style="color:#A6ACCD;">pip install mysql</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">python		</span><span style="color:#676E95;font-style:italic;">#数据库MySQL</span></span>
<span class="line"><span style="color:#A6ACCD;">pip install flask</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">sqlalchemy		</span><span style="color:#676E95;font-style:italic;">#MySQL-ORM flask-sqlalchemy</span></span>
<span class="line"><span style="color:#A6ACCD;">flask</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">wtf 					</span><span style="color:#676E95;font-style:italic;">#表单验证</span></span></code></pre></div><hr><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">#获取页面表单内容</span></span>
<span class="line"><span style="color:#A6ACCD;">from flask </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;">  request</span></span>
<span class="line"><span style="color:#A6ACCD;">request.form.get(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">username</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)		#request.form[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">username</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">]</span></span></code></pre></div><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">#图片链接</span></span>
<span class="line"><span style="color:#A6ACCD;">from flask </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> url_for</span></span>
<span class="line"><span style="color:#A6ACCD;">&lt;img src=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">{{url_for(&#39;static&#39;,filename=&#39;add.png&#39;)}}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">/&gt;			 </span><span style="color:#676E95;font-style:italic;">//static目录下的add.png图片</span></span></code></pre></div><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">#404页面</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">errorhandler</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">404</span><span style="color:#A6ACCD;">)def </span><span style="color:#82AAFF;">not_found</span><span style="color:#A6ACCD;">(e):</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">render_template</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">404.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span></span></code></pre></div><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">#错误提示</span></span>
<span class="line"><span style="color:#A6ACCD;">from flask </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;">  flash</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> abort</span></span>
<span class="line"><span style="color:#A6ACCD;">flash(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">嘎嘎嘎</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)		#&lt;h2&gt;</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">{ </span><span style="color:#A6ACCD;">get_flashed_messages</span><span style="color:#F07178;">()  [0]  </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">}&lt;/h2&gt;	&lt;!--打印：嘎嘎嘎--&gt;</span></span></code></pre></div><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">#模板渲染</span></span>
<span class="line"><span style="color:#A6ACCD;">from flask </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;">  render_template</span></span>
<span class="line"><span style="color:#A6ACCD;">def query_user(user_id):</span></span>
<span class="line"><span style="color:#A6ACCD;">    return render_template(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">user_id.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">user=User(1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">jikexueyuan</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">))</span></span></code></pre></div><hr><h2 id="模板继承" tabindex="-1">模板继承 <a class="header-anchor" href="#模板继承" aria-label="Permalink to &quot;模板继承&quot;">​</a></h2><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">#base.html</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Header 极客学院</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">{% block content %}</span></span>
<span class="line"><span style="color:#A6ACCD;">{% endblock %}</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Footer 极客学院</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">body</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><p>继承base.html作为模板</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">extends</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">base.html</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">%}</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">block</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">content</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">%}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">h2</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">这是第一页</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">h2</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">{%</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">endblock</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">%}</span></span></code></pre></div><hr><h2 id="flask-blueprint-模块化" tabindex="-1">flask-blueprint 模块化 <a class="header-anchor" href="#flask-blueprint-模块化" aria-label="Permalink to &quot;flask-blueprint 模块化&quot;">​</a></h2><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#user.py</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> flask </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> Blueprint</span></span>
<span class="line"><span style="color:#A6ACCD;">user</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">Blueprint</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">user</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">__name__</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">                 </span><span style="color:#676E95;font-style:italic;">#导出</span></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">user</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">route</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/&lt;int:userid&gt;</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">	</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">showUser</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">userid</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">hello,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;">userid</span></span></code></pre></div><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">#main.py</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> user </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">                              </span><span style="color:#676E95;font-style:italic;">#使用</span></span>
<span class="line"><span style="color:#A6ACCD;">app</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">register_blueprint</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">user</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;font-style:italic;">url_prefix</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/user</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">	</span><span style="color:#676E95;font-style:italic;">#这样访问/user/gagaga就打印出了hello,gagaga</span></span></code></pre></div>`,21),e=[o];function t(c,r,D,y,C,A){return a(),n("div",null,e)}const d=s(p,[["render",t]]);export{i as __pageData,d as default};
