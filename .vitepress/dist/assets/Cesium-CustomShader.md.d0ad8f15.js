import{_ as s,o as a,c as l,O as n}from"./chunks/framework.4afe7240.js";const C=JSON.parse('{"title":"Cesium 1.97 发布","description":"","frontmatter":{},"headers":[],"relativePath":"Cesium-CustomShader.md","filePath":"Cesium-CustomShader.md"}'),e={name:"Cesium-CustomShader.md"},o=n(`<h1 id="cesium-1-97-发布" tabindex="-1">Cesium 1.97 发布 <a class="header-anchor" href="#cesium-1-97-发布" aria-label="Permalink to &quot;Cesium 1.97 发布&quot;">​</a></h1><p>CesiumJS 1.97 现已可用。CesiumJS 已经切换到一个新的Model架构来加载 glTF 模型和 tilesets 以启用：用户定义的 GLSL 着色器通过<a href="https://github.com/CesiumGS/cesium/blob/main/Documentation/CustomShaderGuide/README.md" target="_blank" rel="noreferrer"><code>CustomShader</code></a><a href="https://www.cnblogs.com/onsummer/p/16560461.html" target="_blank" rel="noreferrer">CesiumJS 更新日志 1.96 与 1.97 - 新构建工具 esbuild 体验及 Model API 更替完成 - 岭南灯火 - 博客园</a></p><p>找到<a href="https://lihanqiang.github.io/vue-vite-cesium-demo/" target="_blank" rel="noreferrer">vue-vite-cesium-demo/</a> 可用，包含 1. 经度、纬度、高度/距离/面积 2. 生成大量节点/视场分析/扩散培/加载 Tileset/高危报警/动态连线/对空雷达/动态河流/白模建筑/显示卫星/可视域分析/加载 Geojson/加载地形/地面雷达/菲涅尔区/河流淹没/追踪扫描Echarts结合 3. 天气/雨天/雪天/雾天 4. 飞行模拟/直飞/绕飞/环飞/ 5. 飞机探测(视频推流)</p><ol><li><a href="http://earthsdk.com/v/last/Apps/Examples/?menu=true&amp;url=./earth-digitalCity.html#:~:text=%20v_elevationPos.z%20-%20_baseHeight%3B%20" target="_blank" rel="noreferrer">earthsdk digitalCity</a> 包含多个特效案例vue-vite-cesium-demo的Tileset特效根源于它，作者是<a href="https://github.com/vtxf" target="_blank" rel="noreferrer">在cesiumlab工作的唐晓飞vtxf (Tang Xiaofei)</a></li><li><a href="http://www.freexgis.com/online/#/" target="_blank" rel="noreferrer">FreeXGIS online</a></li><li><a href="https://github.com/marsgis/mars3d-vue-example/blob/d141900bea02b8daa2e2834b347067f73967ce48/src/example/layer-tileset/style/customShader/map.js#L24" target="_blank" rel="noreferrer">mars3d-vue-example/map.js at d141900bea02b8daa2e2834b347067f73967ce48 · marsgis/mars3d-vue-example</a> 这里也有几个shader可以参考</li><li><a href="http://211.149.185.229:8080/basiccategorylist" target="_blank" rel="noreferrer">223个基础实例|xt3d</a> 这里也有大量shader可参考,有管线流动的效果，应该是目前除<a href="http://mars3d.cn/example.html" target="_blank" rel="noreferrer">425个功能示例(Vue版) - Mars3D三维可视化平台 | 火星科技</a>cesium应用案例最全的库了<strong>但官网限制了无法直接请求静态资源 和 打开开发者工具就会崩溃</strong><ul><li>打开开发者工具就会崩溃的原理：<a href="https://learnku.com/laravel/t/54919" target="_blank" rel="noreferrer">有个网站我点击F12后，浏览器就变得异常卡顿 | Laravel | Laravel China 社区</a><ul><li>manifest.7969719400cd8dd16534.js的blast等方法</li><li><a href="https://blog.csdn.net/chouyidang1008/article/details/100946392" target="_blank" rel="noreferrer">JS反调试技术随笔记录_chouyidang1008的博客-CSDN博客</a></li><li>破解方法： <ol><li>打开新标签页 - 源代码 - 事件监听器断点 - 脚本 - 脚本的第一个语句</li><li>输入<code>http://211.149.185.229:8080/BasicExampleEditor?path=PolylineObject-PolylineSprite</code>回车</li><li>在<code>manifest.7969719400cd8dd16534.js</code>的 <code>var im = new Image();</code> 行打断点，当执行到该行时，控制台运行代码</li><li>blast = ()=&gt;{};detectIE=()=&gt;{};resize=()=&gt;{};</li><li>再放行即可</li></ol></li></ul></li><li>核心库用<a href="https://obfuscator.io/" target="_blank" rel="noreferrer">JavaScript Obfuscator Tool --- JavaScript 混淆器工具</a>混淆过 <ul><li>破解方法： <ol><li>利用正则 + vscode的多游标 匹配 构造[获值函数1, 获值函数2...]数组 + 在devtools执行，右键执行结果复制对象，得到[值1, 值2]</li><li>利用vscode的batch rename插件批量重命名</li><li>利用正则批量把xxx.[&#39;值1&#39;]替换为xxx.值1（注意排除排除@单引号双引号 <code>\\[&#39;([^&quot;&#39;@]+)&#39;\\]</code>）</li><li><a href="https://github.com/davidaq/deuglifyjs" target="_blank" rel="noreferrer">davidaq/deuglifyjs: Reverse uglified Javascript code</a> 一个用于反转uglify的 JS 文件的实用程序，不仅仅是格式化空格，还试图使代码更具可读性。</li></ol></li></ul></li></ul></li></ol><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">但是可以通过这样在代码编辑器去下载资源</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">http</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//211.149.185.229:8080/BasicExampleEditor?path=PolylineObject-PolylineSprite</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> url </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">/data.xt3d.cn/assets/images/polylinematerial/spriteline2.png</span><span style="color:#89DDFF;">\`</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;">//blast = ()=&gt;{};detectIE=()=&gt;{};resize=()=&gt;{};</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#82AAFF;">fetch</span><span style="color:#A6ACCD;">(url)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">response</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> response</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">blob</span><span style="color:#A6ACCD;">())</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">blob</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">downloadBlob</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">blob</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">fileName</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">url</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">URL</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createObjectURL</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">blob</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">link</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createElement</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">link</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">href</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">url</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">link</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">download</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">fileName</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">download</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">body</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">appendChild</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">link</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">link</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">click</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">document</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">body</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">removeChild</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">link</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">URL</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">revokeObjectURL</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">url</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// Release the object URL</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">filename</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">url</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">split</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">at</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;">// Example usage</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#82AAFF;">downloadBlob</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">blob</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">filename</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;">//alert(base64data)</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">catch</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">error</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">error</span><span style="color:#A6ACCD;">(error))</span><span style="color:#89DDFF;">;</span></span></code></pre></div><p><a href="https://github.com/marsgis/mars3d-vue-example/blob/20011b390505b80445a0ce553745210613311fd1/src/example/layer-tileset/style/customShader/map.js#L24" target="_blank" rel="noreferrer">mars3d-vue-example/map.js at 20011b390505b80445a0ce553745210613311fd1 · marsgis/mars3d-vue-example</a><a href="http://mars3d.cn/editor-vue.html?id=layer-tileset/type/jzw" target="_blank" rel="noreferrer">功能示例(Vue版) | Mars3D三维可视化平台 | 火星科技</a> 1. 动态渐变+动态光环的特效 2. 夜景贴图的特效 3. 色彩动态变化的特效 <a href="https://github.com/marsgis/mars3d-link-supermap/blob/master/mars3d-vue-example/src/example/graphic/primitive/model/map.js" target="_blank" rel="noreferrer">mars3d-link-supermap/map.js at master · marsgis/mars3d-link-supermap · GitHub --- mars3d-link-supermap/map.js at master · marsgis/mars3d-link-supermap · GitHub</a> 1. 纹理坐标移动成动画 2. 官方的彩色点云波示例</p>`,6),p=[o];function t(r,c,y,i,F,D){return a(),l("div",null,p)}const m=s(e,[["render",t]]);export{C as __pageData,m as default};
