import{_ as s,o as n,c as a,O as l}from"./chunks/framework.4afe7240.js";const i=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"GIS OL Geoserver PostGIS.md","filePath":"GIS OL Geoserver PostGIS.md"}'),p={name:"GIS OL Geoserver PostGIS.md"},o=l(`<div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">mapbox</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">gl 库是开源的，可以免费使用。但是，要从 Mapbox 的数据服务加载地图样式和图块，您需要在他们的网站上注册以检索地图组件所需的访问令牌，该令牌将用于识别您并开始提供地图图块。</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//该服务将是免费的，直到超过一定的流量水平。</span></span></code></pre></div><h2 id="openlayers" tabindex="-1">OpenLayers <a class="header-anchor" href="#openlayers" aria-label="Permalink to &quot;OpenLayers&quot;">​</a></h2><p><a href="https://pic4.zhimg.com/v2-360cd3f0710e145c6bb4bbd7973aa3a7_r.jpg" target="_blank" rel="noreferrer">https://pic4.zhimg.com/v2-360cd3f0710e145c6bb4bbd7973aa3a7_r.jpg</a> (类图)</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">背景全是白色的，改成png即可，</span><span style="color:#82AAFF;">jpg不可以透明</span><span style="color:#A6ACCD;">(jpg与jpeg只是叫法习惯不同)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">如果一个源（基于ol</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">source</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">TileImage或者ol</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">source</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">Image）具有与当前投影不同ol</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">View的投影，则重新投影会在直接在浏览器中发生</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">默认情况下，WMS切片在180°子午线上重复使用。通过将wrapX选项设置为，可以禁用此行为false。</span><span style="color:#676E95;font-style:italic;">//禁用显示左右拖动无限循环</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">“天地图“  是国家基础地理信息中心建设的</span></span>
<span class="line"><span style="color:#A6ACCD;">OSM是一款由网络大众共同打造的免费开源、可编辑的地图服务</span></span>
<span class="line"><span style="color:#A6ACCD;">空间参照系 Spatial reference </span><span style="color:#82AAFF;">system</span><span style="color:#A6ACCD;"> (SRS)</span></span>
<span class="line"><span style="color:#A6ACCD;">CityGML 标准为虚拟 3D 城市模型的表示、存储和交换定义了概念模型和交换格式。</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">Resolution</span><span style="color:#676E95;font-style:italic;">//每个像素代表的实际距离 </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//map.getView().setResolution(10) 一个像素就是10米</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">OWS </span><span style="color:#676E95;font-style:italic;">//开放式Web服务 ，包括WFS、WMS 和 WCS</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Overlay的options</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">stopEvent</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 是否要阻止事件冒泡到地圖視口(map viewport)。</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 如果設定為ture，那麼疊置層被放在裝載控制元件的那個div容器中（該div容器css類名為ol-overlaycontainer-stopevent）</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">//控件默认放这里</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// 如果設定為false，那麼疊置層被放在css類名為ol-overlaycontainer的div容器下，由className屬性（預設為&#39;ol-overlay-container ol-selectable&#39;）指定類名的div容器中</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span></span>
<span class="line"><span style="color:#A6ACCD;">为什么WFS的图层会缺失不完整</span><span style="color:#89DDFF;">?</span></span>
<span class="line"><span style="color:#A6ACCD;">    因为默认只显示50条记录</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">去掉maxFeatures</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">50即可</span><span style="color:#676E95;font-style:italic;">//http://222.35.95.66:9999/geoserver/public/ows?service=WFS&amp;version=1.0.0&amp;request=GetFeature&amp;typeName=public:railway_double&amp;maxFeatures=50&amp;outputFormat=application%2Fjson</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">Turf的使用的默认坐标系是</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">EPSG:4326</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">天地图电子地图：</span><span style="color:#676E95;font-style:italic;">//t0.tianditu.com/DataServer?T=vec_w&amp;x={x}&amp;y={y}&amp;l={z}</span></span>
<span class="line"><span style="color:#A6ACCD;">天地图电子地图注记：</span><span style="color:#676E95;font-style:italic;">//t0.tianditu.com/DataServer?T=cva_w&amp;x={x}&amp;y={y}&amp;l={z}</span></span>
<span class="line"><span style="color:#A6ACCD;">天地图影像：</span><span style="color:#676E95;font-style:italic;">//t0.tianditu.com/DataServer?T=img_w&amp;x={x}&amp;y={y}&amp;l={z}</span></span>
<span class="line"><span style="color:#A6ACCD;">天地图影像注记：</span><span style="color:#676E95;font-style:italic;">//t0.tianditu.com/DataServer?T=cia_w&amp;x={x}&amp;y={y}&amp;l={z}</span></span>
<span class="line"><span style="color:#A6ACCD;">天地图地形：</span><span style="color:#676E95;font-style:italic;">//t0.tianditu.com/DataServer?T=ter_w&amp;x={x}&amp;y={y}&amp;l={z}</span></span>
<span class="line"><span style="color:#A6ACCD;">天地图地形注记：</span><span style="color:#676E95;font-style:italic;">//t0.tianditu.com/DataServer?T=cta_w&amp;x={x}&amp;y={y}&amp;l={z}</span></span>
<span class="line"><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">TileLayer</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">title</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">天地图卫星影像</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">source</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">XYZ</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">url</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">http://t3.tianditu.com/DataServer?T=img_w&amp;x={x}&amp;y={y}&amp;l={z}&amp;tk=</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">tk</span><span style="color:#89DDFF;">}\`</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">                            </span></span>
<span class="line"><span style="color:#A6ACCD;">Source</span></span>
<span class="line"><span style="color:#A6ACCD;">    ol</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">source</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">Tile		</span><span style="color:#676E95;font-style:italic;">//抽象基类</span></span>
<span class="line"><span style="color:#A6ACCD;">        ol</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">source</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">TileDebug </span><span style="color:#676E95;font-style:italic;">//借助这个类，我们可以清晰的看到每一个瓦片的坐标</span></span>
<span class="line"><span style="color:#A6ACCD;">        ol</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">source</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">TileUTFGrid</span></span>
<span class="line"><span style="color:#A6ACCD;">        ol</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">source</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">UrlTile		</span><span style="color:#676E95;font-style:italic;">//提供瓦片的源的基类，通过http划分为瓦片网格</span></span>
<span class="line"><span style="color:#A6ACCD;">            ol</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">source</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">TileImage	</span><span style="color:#676E95;font-style:italic;">//提供图像的源的基类划分为平铺网格</span></span>
<span class="line"><span style="color:#A6ACCD;">                ol</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">source</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">XYZ 		</span><span style="color:#676E95;font-style:italic;">//具有设置XYZ格式的URL的切片数据的图层源，在URL占位符中定义坐标,遵循的Google网格，其中x0和y0位于左上角</span></span>
<span class="line"><span style="color:#A6ACCD;">                    ol</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">source</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">OSM	</span><span style="color:#676E95;font-style:italic;">//OpenStreetMap磁贴服务器的图层源。 </span></span>
<span class="line"><span style="color:#A6ACCD;">                ol</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">source</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">WMTS</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">TileWMS</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">TileJSON</span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;">BingMaps</span></span>
<span class="line"><span style="color:#A6ACCD;">            ol</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">source</span><span style="color:#89DDFF;">/</span><span style="color:#82AAFF;">VectorTile</span><span style="color:#A6ACCD;">(没有子类) </span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">可以getFeatures</span><span style="color:#89DDFF;">/</span></span>
<span class="line"><span style="color:#A6ACCD;">    Image</span></span>
<span class="line"><span style="color:#A6ACCD;">    Vector</span></span>
<span class="line"><span style="color:#A6ACCD;">        Cluster</span></span>
<span class="line"><span style="color:#A6ACCD;">Layer</span></span>
<span class="line"><span style="color:#A6ACCD;">    BaseTileLayer</span></span>
<span class="line"><span style="color:#A6ACCD;">    BaseImageLayer</span></span>
<span class="line"><span style="color:#A6ACCD;">    BaseVectorLayer</span></span>
<span class="line"><span style="color:#A6ACCD;">        VectorImageLayer </span><span style="color:#676E95;font-style:italic;">//跟VectorLayer无缝切换,它比VectorLayer快多了!!!</span></span>
<span class="line"><span style="color:#A6ACCD;">        VectorLayer</span></span>
<span class="line"><span style="color:#A6ACCD;">        VectorTileLayer</span><span style="color:#676E95;font-style:italic;">//这个也很快配合geoserver的.pbf格式的TMS服务,官网很多案例</span></span>
<span class="line"><span style="color:#A6ACCD;">    WebGLPointsLayer</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 原理: 点击放大或缩小时,怎么跑到底层canvas操作的?   2022年5月16日18点19分</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//https://github1s.com/openlayers/openlayers/blob/main/src/ol/renderer/canvas/TileLayer.js#L581 调用了this.context.drawImage方法</span></span>
<span class="line"><span style="color:#A6ACCD;">TileLayer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">drawTileImage</span><span style="color:#A6ACCD;">(TileLayer</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js) </span><span style="color:#676E95;font-style:italic;">//操作了canvas的drawImage，画每个瓦片上去</span></span>
<span class="line"><span style="color:#82AAFF;">renderFrame</span><span style="color:#A6ACCD;"> (TileLayer</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js:</span><span style="color:#F78C6C;">519</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#82AAFF;">render</span><span style="color:#A6ACCD;"> (Layer</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js:</span><span style="color:#F78C6C;">275</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#82AAFF;">renderFrame</span><span style="color:#A6ACCD;"> (Composite</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js:</span><span style="color:#F78C6C;">123</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#82AAFF;">renderFrame_</span><span style="color:#A6ACCD;"> (Map</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js:</span><span style="color:#F78C6C;">1549</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#82AAFF;">animationDelay_</span><span style="color:#A6ACCD;"> (Map</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js:</span><span style="color:#F78C6C;">1403</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">requestAnimationFrame（异步）</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">render</span><span style="color:#A6ACCD;"> (Map</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js:</span><span style="color:#F78C6C;">1436</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">handleViewPropertyChanged_</span><span style="color:#A6ACCD;"> (Map</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js:</span><span style="color:#F78C6C;">1333</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">dispatchEvent</span><span style="color:#A6ACCD;"> (Target</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js:</span><span style="color:#F78C6C;">114</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">changed</span><span style="color:#A6ACCD;"> (Observable</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js:</span><span style="color:#F78C6C;">70</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">setHint</span><span style="color:#A6ACCD;"> (View</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js:</span><span style="color:#F78C6C;">1652</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">animateInternal</span><span style="color:#A6ACCD;"> (View</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js:</span><span style="color:#F78C6C;">692</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">animate</span><span style="color:#A6ACCD;"> (View</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js:</span><span style="color:#F78C6C;">601</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">zoomByDelta</span><span style="color:#A6ACCD;">(Interaction</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js:</span><span style="color:#F78C6C;">162</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">handleWheelZoom_</span><span style="color:#A6ACCD;"> (MouseWheelZoom</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js:</span><span style="color:#F78C6C;">274</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    setTimeout（异步）</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">handleEvent</span><span style="color:#A6ACCD;"> (MouseWheelZoom</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js:</span><span style="color:#F78C6C;">247</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">handleMapBrowserEvent</span><span style="color:#A6ACCD;"> (Map</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js:</span><span style="color:#F78C6C;">1148</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#82AAFF;">handleBrowserEvent</span><span style="color:#A6ACCD;"> (Map</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js:</span><span style="color:#F78C6C;">1097</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">OpenLayers提供了两个类</span></span>
<span class="line"><span style="color:#A6ACCD;">    ol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Map类使用canvas进行图像渲染</span></span>
<span class="line"><span style="color:#A6ACCD;">        根据extent计算瓦片范围</span></span>
<span class="line"><span style="color:#A6ACCD;">        获取可视范围内的瓦片范围，并循环加载、渲染瓦片</span></span>
<span class="line"><span style="color:#A6ACCD;">    ol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">WebGLMap类使用webgl进行图像渲染</span></span></code></pre></div><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">dataProjectio指geojson文件中的坐标的EPSG</span></span>
<span class="line"><span style="color:#A6ACCD;">featureProjection是视图</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">地图的EPSG</span></span>
<span class="line"><span style="color:#A6ACCD;">所以尽量记住这条规则：featureProjection和ol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">View投影声明应该是相等的</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">ol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">proj</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fromLonLat</span><span style="color:#A6ACCD;">([x</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">y])                      </span><span style="color:#676E95;font-style:italic;">//转换成平面坐标</span></span>
<span class="line"><span style="color:#A6ACCD;">ol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">proj</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">transform</span><span style="color:#A6ACCD;">( [</span><span style="color:#F78C6C;">12570113.410758357</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3237285.1611840134</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">EPSG:3857</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">EPSG:4326</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;">//转换成经纬度坐标</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> fea</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> ol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">format</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">GeoJSON</span><span style="color:#A6ACCD;">())</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">readFeatures</span><span style="color:#A6ACCD;">(src)    </span><span style="color:#676E95;font-style:italic;">//从geoJson读要素</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> vectorSource </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">VectorSource</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">features</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">GeoJSON</span><span style="color:#A6ACCD;">())</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">readFeatures</span><span style="color:#A6ACCD;">(randomPointsGSON) </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">或者</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">VectorSource</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">url</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">data/geojson/polygon-samples.geojson</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">format</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">GeoJSON</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#676E95;font-style:italic;">//要解决跨域</span></span>
<span class="line"><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">WKT</span><span style="color:#A6ACCD;">())</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">readFeature</span><span style="color:#A6ACCD;">(wkt)</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;">//从wkt读要素 </span></span>
<span class="line"><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">WKT</span><span style="color:#A6ACCD;">())</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">writeFeature</span><span style="color:#A6ACCD;"> (wkt)</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;">//从wkt写要素 </span></span>
<span class="line"><span style="color:#A6ACCD;">feature</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setId</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">cd6b7ccb-c6e2-49cc-a087-aabf00f0d84c</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#82AAFF;">getSource</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getFeatureById</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">cd6b7ccb-c6e2-49cc-a087-aabf00f0d84c</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">map</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">getOverlayById</span></span>
<span class="line"><span style="color:#A6ACCD;">feature</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">setStyle</span></span>
<span class="line"><span style="color:#A6ACCD;">fea</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getGeometry</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getExtent</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#82AAFF;">getSource</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getExtent</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#82AAFF;">getSource</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getClosestFeatureToCoordinate</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#82AAFF;">getSource</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">clear</span><span style="color:#A6ACCD;">()</span><span style="color:#676E95;font-style:italic;">//清空图层</span></span>
<span class="line"><span style="color:#A6ACCD;">fea</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getGeometry</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getClosestPoint</span><span style="color:#A6ACCD;">(coordinate)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">feature</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getProperties</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#FFCB6B;">color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">rgba(255, 0, 0, 0.3)</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#FFCB6B;">点样式</span><span style="color:#89DDFF;">:new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Style</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">CircleStyle</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">radius</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">fill</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Fill</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">red</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">stroke</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Stroke</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#F78C6C;">255</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">width</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">//new ol.style.Style({ image: new ol.style.Circle({radius: 7,  fill: new ol.style.Fill({ color: &#39;black&#39; }),  stroke: new ol.style.Stroke({color: [255, 0, 0], width: 2})})})</span></span>
<span class="line"><span style="color:#FFCB6B;">线样式</span><span style="color:#89DDFF;">:new</span><span style="color:#A6ACCD;"> ol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">style</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Style</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">stroke</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> ol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">style</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Stroke</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">width</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">#119aff</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    fea</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setStyle</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> ol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">style</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Style</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">stroke</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> ol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">style</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Stroke</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">width</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">#119aff</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">))</span></span>
<span class="line"><span style="color:#FFCB6B;">面样式</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> ol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">style</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Style</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">stroke</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> ol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">style</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Stroke</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">width</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">blue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">fill</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> ol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">style</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Fill</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">green</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">                                </span><span style="color:#F07178;">text</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Text</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">font</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">16px Verdana</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">text</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">sadsflj</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">fill</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Fill</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">white</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Style</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">stroke</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Stroke</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">width</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">blue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">fill</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Fill</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">color</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">green</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//修复锚点位置    </span></span>
<span class="line"><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">bufferStyle </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Style</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Icon</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">src</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">require</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">@/static/assets/img/bufferFlag.png</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">//经过测试必须要这写，才不会放大缩小相对位置发生变化</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">anchor</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#F78C6C;">0.5</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">anchorXUnits</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">fraction</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">anchorYUnits</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">fraction</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">   </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">source</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getFeatures</span><span style="color:#A6ACCD;">()[</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getGeometry</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">flatCoordinates</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">var</span><span style="color:#A6ACCD;"> point </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Feature</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">geometry</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Point</span><span style="color:#A6ACCD;">(coord) </span><span style="color:#676E95;font-style:italic;">//纬度 经度          });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">画圆:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> ol</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">geom</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Circle</span><span style="color:#A6ACCD;">([</span><span style="color:#F78C6C;">114.298353</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">30.623705</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">13</span><span style="color:#A6ACCD;">);</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">错误</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">          const coordm </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">fromLonLat</span><span style="color:#A6ACCD;">(coord);</span><span style="color:#676E95;font-style:italic;">//转成投影坐标系</span></span>
<span class="line"><span style="color:#A6ACCD;">          const circlem </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Circle</span><span style="color:#A6ACCD;">(coordm</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> radius);</span></span>
<span class="line"><span style="color:#A6ACCD;">          const circle </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> circlem</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">transform</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">EPSG:3857</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">EPSG:4326</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">); </span><span style="color:#676E95;font-style:italic;">//再转回去 </span></span>
<span class="line"><span style="color:#A6ACCD;">          const circlefea </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Feature</span><span style="color:#A6ACCD;">(circle);</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">正确</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">如何区分捕捉到的是节点还是线 </span><span style="color:#89DDFF;">?</span></span>
<span class="line"><span style="color:#A6ACCD;">    根据map</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">forEachFeatureAtPixel</span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;">feature</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getGeometry</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getClosestPoint</span><span style="color:#A6ACCD;">(coord)</span><span style="color:#A6ACCD;font-style:italic;">获得最近的点</span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;">再根据以下计算误差</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;">米之内可以认为是节点</span></span>
<span class="line"><span style="color:#A6ACCD;">    Math</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">abs</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">5000000</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">Math</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">abs</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">4863270.2540311385</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    feature</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getGeometry</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getType</span><span style="color:#A6ACCD;">() </span><span style="color:#89DDFF;">===</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Circle</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">LinearRing</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">LineString</span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#C3E88D;">MultiLineString</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">MultiPoint</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">MultiPolygon</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">Point</span><span style="color:#89DDFF;">&#39;&#39;</span><span style="color:#C3E88D;">Polygon</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">    feature</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getGeometry</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getCoordinates</span><span style="color:#A6ACCD;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">evt</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">feature</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getGeometry</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">flatCoordinates;</span><span style="color:#676E95;font-style:italic;">//数组</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">draw</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">removeLastPoint</span><span style="color:#A6ACCD;">();</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//获取面中心点坐标</span></span>
<span class="line"><span style="color:#A6ACCD;"> geom</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getInteriorPoint</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getCoordinates</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">slice</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">map</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getLayers</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getArray</span><span style="color:#A6ACCD;">()[</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getSource</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addFeatures</span><span style="color:#A6ACCD;">();</span><span style="color:#676E95;font-style:italic;">//添加要素</span></span>
<span class="line"><span style="color:#A6ACCD;">map</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getLayers</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getArray</span><span style="color:#A6ACCD;">()[</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getSource</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getFeatures</span><span style="color:#A6ACCD;">()[</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getGeometry</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getFirstCoordinate</span><span style="color:#A6ACCD;">();</span><span style="color:#676E95;font-style:italic;">//获得坐标，getFeatures()返回的要素是没有顺序的！！</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">map</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getView</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setCenter</span><span style="color:#A6ACCD;">([</span><span style="color:#F78C6C;">12937339.829847215</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4841994.897941555</span><span style="color:#A6ACCD;">])</span><span style="color:#676E95;font-style:italic;">//跳转视图到坐标</span></span>
<span class="line"><span style="color:#A6ACCD;">view</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fit</span><span style="color:#A6ACCD;">(feature</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getGeometry</span><span style="color:#A6ACCD;">())</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">modifyInteraction</span><span style="color:#A6ACCD;">()                            </span><span style="color:#676E95;font-style:italic;">//获得modifiedFeatures</span></span>
<span class="line"><span style="color:#A6ACCD;">map</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getLayers</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">===</span><span style="color:#A6ACCD;">map</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getLayerGroup</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getLayers</span><span style="color:#A6ACCD;">() </span><span style="color:#676E95;font-style:italic;">//返回true</span></span>
<span class="line"><span style="color:#A6ACCD;">map</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">updateSize</span><span style="color:#A6ACCD;">()                            </span><span style="color:#676E95;font-style:italic;">//更新,刷新  openlayer地图宽度高度变形，运行一下 map.update();就可以了  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">map</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">on</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">postcompose</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">animation);</span><span style="color:#676E95;font-style:italic;">//postcompose事件第一次触发是在地图初始化时，后续的触发都由animation方法中的map.render()来完成。</span></span>
<span class="line"><span style="color:#A6ACCD;">map</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">render</span><span style="color:#A6ACCD;">();</span><span style="color:#676E95;font-style:italic;">//在事件的回调函数中去触发postcompose事件，而我们只要改变地图上的某个feature或者layer或者其他任何东西，就会触发重新渲染，</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">//因此在&#39;postcompose&#39;改变feature就是一个无线循环,可以用来做动画</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//输出所有图层</span></span>
<span class="line"><span style="color:#A6ACCD;">map</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getLayers</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">group</span><span style="color:#89DDFF;">){</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">!</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">group</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">instanceof</span><span style="color:#F07178;"> </span><span style="color:#FFCB6B;">ol</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">layer</span><span style="color:#89DDFF;">.</span><span style="color:#FFCB6B;">Vector</span><span style="color:#F07178;">))</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">group</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getLayers</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forEach</span><span style="color:#F07178;">(</span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">lay</span><span style="color:#89DDFF;">){</span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">lay</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;}</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">map</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setView</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">View</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">center</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">5639523.95</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">3501274.52</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">zoom</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">));</span><span style="color:#676E95;font-style:italic;">//跳转视图</span></span>
<span class="line"><span style="color:#A6ACCD;">    extent</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#676E95;font-style:italic;">//初始化范围</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">xmin</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">113.356899</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">ymin</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">22.977328</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">xmax</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">113.370758</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">ymax</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">22.985924</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">zoom</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">15</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">minZoom</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">maxZoom</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">20</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//中心点</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">center</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> [</span><span style="color:#F78C6C;">113.36799</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">22.98255</span><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">rotation</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span></code></pre></div><h2 id="wfs" tabindex="-1">WFS <a class="header-anchor" href="#wfs" aria-label="Permalink to &quot;WFS&quot;">​</a></h2><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">wfs </span><span style="color:#FFCB6B;">根据几何查询的示例</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#FFCB6B;">http</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//10.168.1.243:8080/geoserver/jr_test/ows?service=WFS&amp;version=1.0.0&amp;request=GetFeature&amp;typeName=jr_test:hengli_xz_fw&amp;outputFormat=application/json&amp;srsName=EPSG:3857&amp;bbox=113.94845297994834, 23.023148474534974,113.94845350846369, 23.023149003050317,EPSG:4326</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">service</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> WFS</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1.0</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">request</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> GetFeature </span><span style="color:#676E95;font-style:italic;">//操作</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">typeName</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">jr_test</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">hengli_xz_fw </span><span style="color:#676E95;font-style:italic;">//图层名</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">outputFormat</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> application</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">json </span><span style="color:#676E95;font-style:italic;">//返回的格式</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">srsName</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">EPSG</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">3857</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//查询完返回的数据坐标用米的(3857)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">bbox</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">113.94845297994834</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">23.023148474534974</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">114.94845297994834</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">23.023148474534974</span><span style="color:#89DDFF;">,</span><span style="color:#FFCB6B;">EPSG</span><span style="color:#89DDFF;">:</span><span style="color:#F78C6C;">4326</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">//查询改外包矩形范围的内的要素，该外包矩形的坐标写的经纬度的(4326)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">bbox=x,y,x,y</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">,</span><span style="color:#676E95;font-style:italic;">//查询点的话,直接重复就行</span></span></code></pre></div><blockquote><p>WFS 更新时发送到服务器的信息:</p></blockquote><div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">Transaction</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">xmlns</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://www.opengis.net/wfs</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">service</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">WFS</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">version</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">1.1.0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">xmlns</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">xsi</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://www.w3.org/2001/XMLSchema-instance</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">xsi</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">schemaLocation</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">Update</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">typeName</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">feature:safeArea</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">xmlns</span><span style="color:#89DDFF;">:</span><span style="color:#C792EA;">feature</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">myWorkSpaceURI</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">Property</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">Name</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">the_geom</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">Name</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">Value</span><span style="color:#89DDFF;">&gt;&lt;</span><span style="color:#F07178;">MultiPolygon</span><span style="color:#89DDFF;">  </span><span style="color:#C792EA;">xmlns</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://www.opengis.net/gml</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;&lt;</span><span style="color:#F07178;">polygonMember</span><span style="color:#89DDFF;">&gt;&lt;</span><span style="color:#F07178;">Polygon</span><span style="color:#89DDFF;">&gt;&lt;</span><span style="color:#F07178;">exterior</span><span style="color:#89DDFF;">&gt;&lt;</span><span style="color:#F07178;">LinearRing</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">posList</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">srsDimension</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">   39.85748291  116.21374512   39.85241699  116.20648193     39.85662842 116.20367432   39.86169434 116.21112061  39.85748291  116.21374512</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">posList</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">					//纬度 经度 纬度 经度</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">LinearRing</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">exterior</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">Polygon</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">polygonMember</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">MultiPolygon</span><span style="color:#89DDFF;">&gt;&lt;/</span><span style="color:#F07178;">Value</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">Property</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">Property</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">Name</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">Id</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">Name</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">Value</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">0</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">Value</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">Property</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">Filter</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">xmlns</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://www.opengis.net/ogc</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">FeatureId</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">fid</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">safeArea.3</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">/&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">Filter</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">Update</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">Transaction</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><h2 id="geoserver" tabindex="-1">Geoserver <a class="header-anchor" href="#geoserver" aria-label="Permalink to &quot;Geoserver&quot;">​</a></h2><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">配置样式方法1</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">在uDig中生成sld样式文件</span><span style="color:#A6ACCD;">(本质是xml) </span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">在Geoserver中导入使用</span></span>
<span class="line"><span style="color:#FFCB6B;">配置样式方法2</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> 装CSS插件</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">用CSS </span><span style="color:#FFCB6B;">样式</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">/* polygon */</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">stroke</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> #</span><span style="color:#F78C6C;">000000</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            stroke</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">width: </span><span style="color:#F78C6C;">0.5</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            fill: #fff;</span></span>
<span class="line"><span style="color:#A6ACCD;">            [PERSONS </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2000000</span><span style="color:#A6ACCD;">] [PERSONS </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4000000</span><span style="color:#A6ACCD;">] </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">   </span><span style="color:#F07178;">fill</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> #FF4D4D;  </span><span style="color:#676E95;font-style:italic;">/* fill-opacity: 0.5;*/</span><span style="color:#A6ACCD;">      </span><span style="color:#676E95;font-style:italic;">/*label: [name];*/</span><span style="color:#A6ACCD;">      </span><span style="color:#676E95;font-style:italic;">/*font-fill: black;*/</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            [OBJECTID</span><span style="color:#89DDFF;">=</span><span style="color:#F78C6C;">224</span><span style="color:#A6ACCD;">] </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">                fill-</span><span style="color:#F07178;">opacity</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">;            </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">/* point */</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">mark</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">symbol</span><span style="color:#A6ACCD;">(circle);</span></span>
<span class="line"><span style="color:#A6ACCD;">            mark</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">size: 6px;</span></span>
<span class="line"><span style="color:#A6ACCD;">            :mark </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">fill</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> #13B5C7;</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">/*line */</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">stroke</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> #FAE18B;</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">WFS规范</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;">就是请求url的规范</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;">http</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//example.com/geoserver/wfs?参数串</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">GWC</span><span style="color:#676E95;font-style:italic;">//GeoWebCache</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">服务类型</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">SOAP</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">XML形式</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">REST</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">JSON形式</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    KML</span><span style="color:#676E95;font-style:italic;">// Keyhole公司的Markup Language，用来表达地理标记，用于在（如Google Earth）中显示地理数据</span></span>
<span class="line"><span style="color:#A6ACCD;">    NAS </span><span style="color:#82AAFF;">erver</span><span style="color:#A6ACCD;">(网络分析)</span></span>
<span class="line"><span style="color:#A6ACCD;">    WFS Server（要素）</span></span>
<span class="line"><span style="color:#A6ACCD;">    WCS Server（Coverage ）</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">GML</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">地理标记语言</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">TMS</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">瓦片地图服务 </span><span style="color:#676E95;font-style:italic;">//是WMTS标准的基础</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">建议</span><span style="color:#89DDFF;">:,</span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">.pbf的TMS,官网就用这个比较多,性能最高,前提是要安装Vector Tiles扩展</span><span style="color:#89DDFF;">/</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> url </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`\${</span><span style="color:#A6ACCD;">geoserver</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">/gwc/service/tms/1.0.0/</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">namespace</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">:</span><span style="color:#89DDFF;">\${</span><span style="color:#A6ACCD;">layername</span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">@EPSG:900913@png/{z}/{x}/{-y}.png</span><span style="color:#89DDFF;">\`</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">      tileurlfunction</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js 的 createFromTemplate 正则替换了</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">}{</span><span style="color:#A6ACCD;">y</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">等</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">WMTS</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">网页地图瓦片服务</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">URL有两种</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">            REST</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">http</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//10.168.1.243:8080/geoserver/gwc/service/wmts?REQUEST=GetCapabilities 可获得 </span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">ResourceURL</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">format</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">application/json</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">resourceType</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">FeatureInfo</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span></span>
<span class="line"><span style="color:#89DDFF;">                    </span><span style="color:#C792EA;">template</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">http://10.168.1.243:8080/geoserver/gwc/service/wmts/rest/jr_test:hengli_xz_fw/{style}/{TileMatrixSet}/{TileMatrix}/{TileRow}/{TileCol}/{J}/{I}?format=application/json</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">/&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;font-style:italic;">//I J 表示图块内部的单元格索引 范围[0-256]</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">构造可得</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">\`</span><span style="color:#C3E88D;">http://10.168.1.243:8080/geoserver/gwc/service/wmts/rest/jr_test:hengli_xz_fw//EPSG:900913/EPSG:900913:7/155/104/0/0?format=application/json</span><span style="color:#89DDFF;">\`</span></span>
<span class="line"><span style="color:#A6ACCD;">            URL Params</span></span>
<span class="line"><span style="color:#A6ACCD;">    WMS</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">C</span><span style="color:#676E95;font-style:italic;">//WMS Tile Caching 已被TMS和WMTS取代</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#82AAFF;">切片</span><span style="color:#A6ACCD;">(生成图块)</span><span style="color:#FFCB6B;">的两种方式</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    普通地图查看期间</span></span>
<span class="line"><span style="color:#A6ACCD;">        在这种情况下，仅当通过地图浏览时，才对切片进行缓存。第一次请求地图视图时，其速度将与标准GeoServer WMS请求大致相同。由于已经生成了这些图块，因此第二次及其后的地图查看将大大加快。</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">//不需要预处理，并且仅缓存已请求的数据，因此也可能节省磁盘空间。此方法的缺点是地图查看只会间歇性地加速，从而降低了用户体验的质量。</span></span>
<span class="line"><span style="color:#A6ACCD;">    播种 seed </span></span>
<span class="line"><span style="color:#A6ACCD;">        播种是从GeoWebCache内部生成并缓存地图图块的过程。预先处理后，用户体验将大大增强，因为用户无需等待瓷砖生成。该过程的缺点是播种可能是非常耗时和磁盘消耗的过程。</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">在实践中，通常使用两种方法的组合，播种某些缩放级别（或缩放级别的某些区域），而观看次数较少的图块则保留不缓存。</span><span style="color:#89DDFF;">/</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">Gridsets配置后在Seed时就可以选择Grid Set</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">geoserver瓦片插值方式：</span></span>
<span class="line"><span style="color:#A6ACCD;">    邻近采用渲染速度很快，但可能会从锐利的边缘细节中像素化</span></span>
<span class="line"><span style="color:#A6ACCD;">    双线性比较好，双线性插值大约是最近邻插值的五倍</span></span>
<span class="line"><span style="color:#A6ACCD;">    双三次的话更好，但耗时会比较大一些</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">geoserver服务器间同步</span></span>
<span class="line"><span style="color:#A6ACCD;">    官方插件利用ActiveMQ来同步</span></span>
<span class="line"><span style="color:#A6ACCD;">        Broker，消息代理，表示消息队列服务器实体，接受客户端连接，提供消息通信的核心服务。在activemq中，相当于一个Activemq实例</span></span>
<span class="line"><span style="color:#A6ACCD;">        Embedded Broker 是在应用程序中以编码的方式启动broker</span></span>
<span class="line"><span style="color:#A6ACCD;">        使用JMX监控broker </span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">JMX是Java Management Extensions，它是一个Java平台的管理和监控接口</span></span>
<span class="line"><span style="color:#A6ACCD;">        ActiveMQ目前支持的transport有：VM Transport、TCP Transport等            </span></span>
<span class="line"><span style="color:#A6ACCD;">            VM Transport 如果希望在同一个JVM内访问这个broker，那么可以使用VM Transport，URI是：</span><span style="color:#FFCB6B;">vm</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//brokerName</span></span>
<span class="line"><span style="color:#A6ACCD;">                第一个创建VM连接的客户会启动一个embed VM broker，接下来所有使用相同的broker name的VM连接都会使用这个broker。</span></span>
<span class="line"><span style="color:#A6ACCD;">                当这个broker上所有的连接都关闭的时候，这个broker也会自动关闭。</span></span>
<span class="line"><span style="color:#A6ACCD;">            TCP transport 允许客户端通过TCP socket连接到远程的broker。</span></span>
<span class="line"><span style="color:#A6ACCD;">        很明显，如果我们想对GeoServer的多个实例进行集群，则必须以某种方式共享同一数据目录，以确保所有实例都是相同的。</span></span>
<span class="line"><span style="color:#A6ACCD;">            这可以通过使多个实例共享geoserver_data变量的相同位置或在较低级别起作用并使用文件系统复制来使不同位置保持同步来实现。</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span></span>
<span class="line"><span style="color:#A6ACCD;">让geoserver严格检查WFS请求格式以快速检查WFS XML的格式错误</span></span>
<span class="line"><span style="color:#A6ACCD;">    用户经常会报告手工WFS请求无法正常工作的问题。</span></span>
<span class="line"><span style="color:#A6ACCD;">    在大多数情况下，请求的格式不正确，但是GeoServer不会抱怨，只是忽略格式不正确的部分（此行为是默认设置，可使较旧的WFS客户端与GeoServer正常工作）。</span></span>
<span class="line"><span style="color:#A6ACCD;">    如果您希望GeoServer验证大多数WFS XML请求，则可以将其发布到以下URL：</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">http</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//host:port/geoserver/ows?strict=true</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">项目管理 </span></span>
<span class="line"><span style="color:#A6ACCD;">人</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">地块</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">合同</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">档案的管理</span></span>
<span class="line"><span style="color:#A6ACCD;">意愿征集</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#A6ACCD;">确权</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#A6ACCD;">拆卸</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#A6ACCD;">回迁</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">	云费用 </span><span style="color:#F78C6C;">2020.7</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">25</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">2021年11月10日 花了4</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">21w</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F78C6C;">47.106</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">10.251</span></span>
<span class="line"><span style="color:#A6ACCD;">    prod</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">titanforce</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">cn</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">18088</span><span style="color:#A6ACCD;">  映射内网 </span><span style="color:#F78C6C;">88</span></span>
<span class="line"><span style="color:#A6ACCD;">        prod02_nginx_1 </span><span style="color:#F78C6C;">172.16</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">0.196</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//prod02_xxx_2均已废弃</span></span>
<span class="line"><span style="color:#A6ACCD;">            vi </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">apps</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">nginx</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">conf</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">nginx</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">conf</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#F78C6C;">80</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">apps</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">frontend</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">dist</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#F78C6C;">8788</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">apps</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">backend2</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">frontend</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">dist</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#F78C6C;">88</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">apps</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">frontend</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">dist</span></span>
<span class="line"><span style="color:#A6ACCD;">                    对应后端端口8901</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> 连接数据库 prod02_mysql_1 的 </span><span style="color:#82AAFF;">hyh2</span><span style="color:#A6ACCD;">(不是hyh)</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#F78C6C;">8088</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">apps</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">mobile</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">dist</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#F78C6C;">8798</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">apps</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">backend2</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">frontend</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">dist</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">18080</span><span style="color:#A6ACCD;"> 正式</span></span>
<span class="line"><span style="color:#F78C6C;">120.79</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">39.244</span></span>
<span class="line"><span style="color:#A6ACCD;">    demo</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">titanforce</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">cn</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">80</span><span style="color:#A6ACCD;"> 与生产</span></span>
<span class="line"><span style="color:#A6ACCD;">    test02</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">titanforce</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">cn</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">8099</span><span style="color:#A6ACCD;"> 测试</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">vpn开了没用</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> 把clash的系统代理先关了就行</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">geoserver 账户admin 密码geoserver</span></span>
<span class="line"><span style="color:#A6ACCD;">    测试机10</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">168.1</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">217</span><span style="color:#A6ACCD;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        postgis</span><span style="color:#89DDFF;">/</span><span style="color:#82AAFF;">postgreSQL安装在测试机上</span><span style="color:#A6ACCD;">(win10): </span><span style="color:#F78C6C;">10.168</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">1.217</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;">5432</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">database</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">NEWWORLD </span><span style="color:#FFCB6B;">schema</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">public </span><span style="color:#FFCB6B;">user</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">postgres </span><span style="color:#FFCB6B;">password</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">postgres </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">测试机上的虚拟机</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#F78C6C;">243</span><span style="color:#A6ACCD;">:appication</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">gis</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">  gis服务器：</span><span style="color:#F78C6C;">10.168</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">1.243</span><span style="color:#A6ACCD;"> 账号：jr 密码：titanforce </span><span style="color:#FFCB6B;">账号root密码</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> rootqaz123</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">装了geoserver</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">admin</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">jr$m</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ap18</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#F78C6C;">113</span><span style="color:#A6ACCD;">:appication</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> 发布测试机 </span></span>
<span class="line"><span style="color:#A6ACCD;">                nginx： vi </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">local</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">nginx</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">conf</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">nginx</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">conf</span></span>
<span class="line"><span style="color:#A6ACCD;">                oracle：root</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">admin</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#F78C6C;">110</span><span style="color:#A6ACCD;">:测试centos安装postgis</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#F78C6C;">208</span><span style="color:#A6ACCD;">：</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">gis 文件服务器 连接端口11122 </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">local</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">nginx</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">data</span></span>
<span class="line"><span style="color:#A6ACCD;">    阿里云测试</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">192.168</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">0.27</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//放nginx移动端测试流水线 /api是127.0.0.1:8900</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;font-style:italic;">//192.168.0.38  负载均衡?</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">apps</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">nginx</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">nginx</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">conf</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;font-style:italic;">//192.168.0.12 mysql user:root pswd:admin</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">192.168</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">0.32</span><span style="color:#A6ACCD;"> 文件服务器 </span><span style="color:#FFCB6B;">user</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">gis  </span><span style="color:#FFCB6B;">pswd</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">gis123</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;">//  /usr/gis3d放3d模型 </span></span>
<span class="line"><span style="color:#A6ACCD;">                                cd </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">apps</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">nginx</span></span>
<span class="line"><span style="color:#A6ACCD;">                                sudo </span><span style="color:#89DDFF;">./</span><span style="color:#A6ACCD;">sbin</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">nginx</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">apps</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">nginx</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">nginx</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">conf</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">apps</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">nginx</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">conf</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">nginx</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">conf</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">192.168</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">0.26</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">user</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">gis  </span><span style="color:#FFCB6B;">pswd</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">gis123</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">gis3d 启动方法同阿里正式</span></span>
<span class="line"><span style="color:#A6ACCD;">            geoserver </span><span style="color:#F78C6C;">8080</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">//记得放开权限允许修改数据</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">192.168</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">0.30</span><span style="color:#A6ACCD;">   </span><span style="color:#FFCB6B;">user</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">gis  </span><span style="color:#FFCB6B;">pswd</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">gis123</span><span style="color:#89DDFF;">!</span></span>
<span class="line"><span style="color:#A6ACCD;">            postgis testdb1</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span></span>
<span class="line"><span style="color:#A6ACCD;">        test02_fastdfs_1    </span><span style="color:#F78C6C;">192.168</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">0.32</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//sudo scp -r /usr/gis3d gis@192.168.0.14:/usr</span></span>
<span class="line"><span style="color:#A6ACCD;">        test02_postgreSQL_1 </span><span style="color:#F78C6C;">192.168</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">0.30</span></span>
<span class="line"><span style="color:#A6ACCD;">        test02_geoserver_1  </span><span style="color:#F78C6C;">192.168</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">0.26</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//sudo scp -r /usr/share/geoserver  gis@192.168.0.15:/usr/share</span></span>
<span class="line"><span style="color:#A6ACCD;">    阿里云预生产</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">192.168</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">0.39</span><span style="color:#A6ACCD;"> demo_geo</span><span style="color:#676E95;font-style:italic;">//端口同生产,只是三个东西装在一台机器里</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">192.168</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">0.38</span><span style="color:#A6ACCD;">:</span><span style="color:#F78C6C;">8088</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//公网是18081 放nginx移动端预生产流水线,8700放web端好像      http://127.0.0.1:8900;  </span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">etc</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">nginx</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">nginx</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">conf</span></span>
<span class="line"><span style="color:#A6ACCD;">    阿里云生产</span></span>
<span class="line"><span style="color:#A6ACCD;">        18088是集团的正式</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">还有应该yjl的正式是18080</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">172.16</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">0.202</span><span style="color:#A6ACCD;"> geoserver </span><span style="color:#676E95;font-style:italic;">//记得放开权限允许修改数据 开放8080端口 影像tiff图层要复制过去重新发布</span></span>
<span class="line"><span style="color:#A6ACCD;">            自身</span><span style="color:#676E95;font-style:italic;">//安装了字体</span></span>
<span class="line"><span style="color:#A6ACCD;">                sudo yum install java</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">11</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">openjdk </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">y</span></span>
<span class="line"><span style="color:#A6ACCD;">                sudo yum install </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">y unzip zip</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">按步骤来即可</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;">https</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//docs.geoserver.org/latest/en/user/installation/linux.html</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#676E95;font-style:italic;">//web.xml里设置 GEOSERVER_DATA_DIR为/usr/data/data_dir</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">share目录下</span></span>
<span class="line"><span style="color:#A6ACCD;">                    sudo unzip </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">n geoserver</span><span style="color:#89DDFF;">-***-</span><span style="color:#A6ACCD;">bin</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">zip </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">d geoserver</span></span>
<span class="line"><span style="color:#A6ACCD;">                    cd </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">share</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">geoserver</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">bin</span><span style="color:#89DDFF;">/</span></span>
<span class="line"><span style="color:#A6ACCD;">                    sudo nohup </span><span style="color:#89DDFF;">./</span><span style="color:#A6ACCD;">startup</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">sh </span><span style="color:#89DDFF;">&amp;</span><span style="color:#A6ACCD;">再按确定确定</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#676E95;font-style:italic;">//sudo nohup /usr/share/geoserver/bin/startup.sh &amp;</span></span>
<span class="line"><span style="color:#A6ACCD;">            cluster同步</span></span>
<span class="line"><span style="color:#A6ACCD;">                1</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">搭建cluster的方法按这个来 </span><span style="color:#FFCB6B;">https</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//blog.csdn.net/a571574085/article/details/114262496</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">share</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">apache</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">tomcat</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">9.0</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">41</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">webapps</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">activemqBroker</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">2.16</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">SNAPSHOT</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">WEB</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">INF</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">classes</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">standalone</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">broker</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">properties</span></span>
<span class="line"><span style="color:#A6ACCD;">                2</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">数据文件夹的同步按这个来 </span><span style="color:#FFCB6B;">https</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//www.jianshu.com/p/fc2f3ec661c0</span></span>
<span class="line"><span style="color:#A6ACCD;">                 </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">data_dir</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">jrnet</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">inotifyrsync</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">sh </span><span style="color:#89DDFF;">&amp;</span><span style="color:#A6ACCD;"> 开启自动同步脚步</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">172.16</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">0.191</span><span style="color:#A6ACCD;"> postgis </span><span style="color:#676E95;font-style:italic;">//开放5432端口 QGIS连接，直接从一个机子拉到另一个机子上再在geoserver发布即可 (同个内网的机子直接拷贝整个geoserver目录即可！)</span></span>
<span class="line"><span style="color:#A6ACCD;">            sudo yum install </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">y </span><span style="color:#FFCB6B;">https</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//download.postgresql.org/pub/repos/yum/reporpms/EL-7-x86_64/pgdg-redhat-repo-latest.noarch.rpm</span></span>
<span class="line"><span style="color:#A6ACCD;">            sudo yum install </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">y postgresql11</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">server </span></span>
<span class="line"><span style="color:#A6ACCD;">            sudo </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">pgsql</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">11</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">bin</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">postgresql</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">11</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">setup initdb </span></span>
<span class="line"><span style="color:#A6ACCD;">            sudo systemctl enable postgresql</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">11</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">            sudo systemctl start postgresql</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">11</span></span>
<span class="line"><span style="color:#A6ACCD;">            sudo yum install postgis25_11</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#676E95;font-style:italic;">//报错missing requires of libmysqlclient.so.18()(64bit)的话</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#676E95;font-style:italic;">//sudo yum install -y https://dev.mysql.com/get/Downloads/MySQL-5.7/mysql-community-libs-compat-5.7.25-1.el7.x86_64.rpm</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;font-style:italic;">//或 sudo rpm -qi postgis25_11</span></span>
<span class="line"><span style="color:#A6ACCD;">            sudo </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">u postgres </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">i</span></span>
<span class="line"><span style="color:#A6ACCD;">            createdb testdb </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">O postgres</span></span>
<span class="line"><span style="color:#A6ACCD;">            psql </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">d testdb</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#FFCB6B;">其他按步骤来即可</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;">https</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//blog.csdn.net/a571574085/article/details/107939103</span></span>
<span class="line"><span style="color:#A6ACCD;">            CREATE EXTENSION postgis</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">172.16</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">0.195</span><span style="color:#A6ACCD;"> gis3d </span><span style="color:#676E95;font-style:italic;">//开放80端口</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">gis3d</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">hengli 数据放这里 </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">dev</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">vda1        40G   15G   23G  </span><span style="color:#F78C6C;">40</span><span style="color:#89DDFF;">%</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">/</span></span>
<span class="line"><span style="color:#A6ACCD;">            sudo yum </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">y install nginx # 安装 nginx</span></span>
<span class="line"><span style="color:#A6ACCD;">            sudo vim  </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">etc</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">nginx</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">nginx</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">conf</span></span>
<span class="line"><span style="color:#A6ACCD;">                      root </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">gis3d</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> # 存放文件的目录 </span><span style="color:#676E95;font-style:italic;">//转移到/usr/data了!!!</span></span>
<span class="line"><span style="color:#A6ACCD;">                      location </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">                        </span><span style="color:#A6ACCD;">autoindex</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">on</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> # </span><span style="color:#A6ACCD;">索引</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">                        </span><span style="color:#A6ACCD;">autoindex_exact_size</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">on</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> # </span><span style="color:#A6ACCD;">显示文件大小</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">                        </span><span style="color:#A6ACCD;">autoindex_localtime</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">on</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> # </span><span style="color:#A6ACCD;">显示文件时间</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">                      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">              sudo nginx  </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">s reload</span></span>
<span class="line"><span style="color:#A6ACCD;">              </span><span style="color:#FFCB6B;">http</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//172.16.0.187/hengli/tileset.json</span></span>
<span class="line"><span style="color:#A6ACCD;">        集群备份                                  </span></span>
<span class="line"><span style="color:#A6ACCD;">        prod02_gis3d_2		</span><span style="color:#F78C6C;">172.16</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">0.210</span><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">80</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//195迁移到210：sudo scp -r /usr/data gis@172.16.0.210:/usr</span></span>
<span class="line"><span style="color:#A6ACCD;">        prod02_postgreSQL_2	</span><span style="color:#F78C6C;">172.16</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">0.208</span><span style="color:#A6ACCD;">    </span><span style="color:#F78C6C;">5432</span></span>
<span class="line"><span style="color:#A6ACCD;">        prod02_geoserver_2	</span><span style="color:#F78C6C;">172.16</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">0.206</span><span style="color:#A6ACCD;">	</span><span style="color:#F78C6C;">8080</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//202迁移到206： sudo scp -r /usr/share/geoserver  gis@172.16.0.206:/usr/share</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">变更图层后最小化迁移目录参考</span><span style="color:#A6ACCD;">(要检查一下有没有因为权限问题没用复制成功的！确保都覆盖过去了)</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#F78C6C;">206</span><span style="color:#A6ACCD;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">                    sudo rm </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">rf </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">data_dir</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">workspaces</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">jrtest</span></span>
<span class="line"><span style="color:#A6ACCD;">                    sudo rm </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">rf </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">data_dir</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">gwc</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">layers</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#F78C6C;">202</span><span style="color:#A6ACCD;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">                    sudo scp </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">r </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">data_dir</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">workspaces</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">jrtest  gis@</span><span style="color:#F78C6C;">172.16</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">0.206</span><span style="color:#A6ACCD;">:</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">data_dir</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">workspaces</span></span>
<span class="line"><span style="color:#A6ACCD;">                    sudo scp </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">r </span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">data_dir</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">gwc</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">layers  gis@</span><span style="color:#F78C6C;">172.16</span><span style="color:#89DDFF;">.</span><span style="color:#F78C6C;">0.206</span><span style="color:#A6ACCD;">:</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">usr</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">data</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">data_dir</span></span></code></pre></div><h2 id="postgis" tabindex="-1">PostGIS <a class="header-anchor" href="#postgis" aria-label="Permalink to &quot;PostGIS&quot;">​</a></h2><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">PostGIS将对地理对象的支持添加到PostgreSQL对象关系数据库中，就像ESRI的SDE或Oracle的Spatial扩展一样</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">Application Stack Builder安装完postgis_2_3_pg95 </span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> 还要在SQL Shell执行以下的sql语句：才能生效</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;"> Enable </span><span style="color:#82AAFF;">PostGIS</span><span style="color:#A6ACCD;"> (includes raster)</span></span>
<span class="line"><span style="color:#A6ACCD;">        CREATE EXTENSION postgis</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;"> Enable Topology</span></span>
<span class="line"><span style="color:#A6ACCD;">        CREATE EXTENSION postgis_topology</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;"> fuzzy matching needed for Tiger</span></span>
<span class="line"><span style="color:#A6ACCD;">        CREATE EXTENSION fuzzystrmatch</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;"> Enable US Tiger Geocoder</span></span>
<span class="line"><span style="color:#A6ACCD;">        CREATE EXTENSION postgis_tiger_geocoder</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">用 PostGIS Shapfile Import</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">Export Manager导入图层</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">路径不能有中文</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">否则导入失败</span><span style="color:#89DDFF;">!</span></span></code></pre></div><h2 id="geojson" tabindex="-1">GeoJSON <a class="header-anchor" href="#geojson" aria-label="Permalink to &quot;GeoJSON&quot;">​</a></h2><div class="language-JSON"><button title="Copy Code" class="copy"></button><span class="lang">JSON</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">FeatureCollection</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">features</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">{</span><span style="color:#676E95;font-style:italic;">//要素1</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Feature</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">geometry</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	            </span><span style="color:#676E95;font-style:italic;">//要素1的图形</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">MultiPolygon</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F78C6C;">coordinates</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[]</span></span>
<span class="line"><span style="color:#A6ACCD;">				</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">		</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h3 id="给出含一个有两个环的多边形和一个三角形的基于geojson规范的multipolygon的例子-要添加逐行注释" tabindex="-1">给出含一个有两个环的多边形和一个三角形的基于GeoJSON规范的MultiPolygon的例子，要添加逐行注释 <a class="header-anchor" href="#给出含一个有两个环的多边形和一个三角形的基于geojson规范的multipolygon的例子-要添加逐行注释" aria-label="Permalink to &quot;给出含一个有两个环的多边形和一个三角形的基于GeoJSON规范的MultiPolygon的例子，要添加逐行注释&quot;">​</a></h3><div class="language-JSON"><button title="Copy Code" class="copy"></button><span class="lang">JSON</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">MultiPolygon</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// GeoJSON对象类型为MultiPolygon</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">coordinates</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// coordinates用于定义多边形的坐标</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 第一个Polygon，一个有两个环的多边形</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 第一个环</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">-122.801742</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">45.48565</span><span style="color:#89DDFF;">],</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 坐标为[-122.801742, 45.48565]</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">-122.801742</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">45.60491</span><span style="color:#89DDFF;">],</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 坐标为[-122.801742, 45.60491]</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">-122.584762</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">45.60491</span><span style="color:#89DDFF;">],</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 坐标为[-122.584762, 45.60491]</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">-122.584762</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">45.48565</span><span style="color:#89DDFF;">],</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 坐标为[-122.584762, 45.48565]</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">-122.801742</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">45.48565</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">// 第一个坐标被重复，以闭合环</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 第二个环</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">-122.76696</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">45.52304</span><span style="color:#89DDFF;">],</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">// 坐标为[-122.76696, 45.52304]</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">-122.76696</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">45.5825</span><span style="color:#89DDFF;">],</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;">// 坐标为[-122.76696, 45.5825]</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">-122.68127</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">45.5825</span><span style="color:#89DDFF;">],</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;">// 坐标为[-122.68127, 45.5825]</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">-122.68127</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">45.52304</span><span style="color:#89DDFF;">],</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">// 坐标为[-122.68127, 45.52304]</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">-122.76696</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">45.52304</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;">// 第一个坐标被重复，以闭合环</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// 第二个Polygon，一个三角形</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">-122.639961</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">45.543541</span><span style="color:#89DDFF;">],</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">// 坐标为[-122.639961, 45.543541]</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">-122.639976</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">45.533529</span><span style="color:#89DDFF;">],</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">// 坐标为[-122.639976, 45.533529]</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">-122.611206</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">45.526554</span><span style="color:#89DDFF;">],</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">// 坐标为[-122.611206, 45.526554]</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">-122.639961</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">45.543541</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;">// 第一个坐标被重复，以闭合环</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div>`,17),e=[o];function t(c,r,D,y,C,F){return n(),a("div",null,e)}const u=s(p,[["render",t]]);export{i as __pageData,u as default};
