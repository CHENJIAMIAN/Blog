import{_ as s,o as a,c as n,O as l}from"./chunks/framework.4afe7240.js";const A=JSON.parse('{"title":"Coding Guide","description":"","frontmatter":{},"headers":[],"relativePath":"Cesium-å®˜æ–¹ç¼–ç æŒ‡å—.md","filePath":"Cesium-å®˜æ–¹ç¼–ç æŒ‡å—.md"}'),o={name:"Cesium-å®˜æ–¹ç¼–ç æŒ‡å—.md"},p=l(`<h1 id="coding-guide" tabindex="-1"><a href="https://github.com/CesiumGS/cesium/blob/main/Documentation/Contributors/CodingGuide/README.md" target="_blank" rel="noreferrer">Coding Guide </a> <a class="header-anchor" href="#coding-guide" aria-label="Permalink to &quot;[Coding Guide ](https://github.com/CesiumGS/cesium/blob/main/Documentation/Contributors/CodingGuide/README.md)&quot;">â€‹</a></h1><p>CesiumJS æ˜¯ä¸–ç•Œä¸Šæœ€å¤§çš„ JavaScript ä»£ç åº“ä¹‹ä¸€ã€‚ä»ä¸€å¼€å§‹ï¼Œæˆ‘ä»¬å°±ä¸€ç›´ä¿æŒç€ä»£ç è´¨é‡çš„é«˜æ ‡å‡†ï¼Œè¿™ä½¿å¾—ä»£ç åº“å¯¹äºæ–°è€è´¡çŒ®è€…æ¥è¯´éƒ½æ›´å®¹æ˜“ä½¿ç”¨ã€‚æˆ‘ä»¬å¸Œæœ›æ‚¨å‘ç°ä»£ç åº“å¹²å‡€ä¸”ä¸€è‡´ã€‚</p><p>é™¤äº†æè¿°å…¸å‹çš„ç¼–ç çº¦å®šå¤–ï¼Œæœ¬æŒ‡å—è¿˜æ¶µç›–äº†è®¾è®¡ã€å¯ç»´æŠ¤æ€§å’Œæ€§èƒ½æ–¹é¢çš„æœ€ä½³å®è·µã€‚å®ƒæ˜¯è®¸å¤šå¼€å‘äººå‘˜ç»è¿‡å¤šå¹´çš„ç”Ÿäº§å¼€å‘ã€ç ”ç©¶å’Œå®éªŒåç§¯ç´¯çš„å»ºè®®ã€‚</p><p>æœ¬æŒ‡å—é€‚ç”¨äº CesiumJS å’Œç”¨ JavaScript ç¼–å†™çš„ Cesium ç”Ÿæ€ç³»ç»Ÿçš„æ‰€æœ‰éƒ¨åˆ†ã€‚</p><p>ğŸ¨: è°ƒè‰²æ¿å›¾æ ‡è¡¨ç¤ºè®¾è®¡æç¤ºã€‚</p><p>ğŸ : æˆ¿å­å›¾æ ‡è¡¨ç¤ºå¯ç»´æŠ¤æ€§æç¤ºã€‚å½“ç„¶ï¼Œæ•´ä¸ªæŒ‡å—éƒ½æ˜¯å…³äºç¼–å†™å¯ç»´æŠ¤ä»£ç çš„ã€‚</p><p>ğŸš¤: å¿«è‰‡è¡¨ç¤ºæ€§èƒ½æç¤ºã€‚</p><p>åœ¨æŸç§ç¨‹åº¦ä¸Šï¼Œæœ¬æŒ‡å—å¯ä»¥æ¦‚æ‹¬ä¸º_ä½¿æ–°ä»£ç ä¸ç°æœ‰ä»£ç ç›¸ä¼¼_ã€‚</p><h2 id="å‘½å" tabindex="-1">å‘½å <a class="header-anchor" href="#å‘½å" aria-label="Permalink to &quot;å‘½å&quot;">â€‹</a></h2><ul><li>ç›®å½•åç§°ä¸º <code>PascalCase</code>ï¼Œä¾‹å¦‚ <code>Source/Scene</code>ã€‚</li><li>æ„é€ å‡½æ•°æ˜¯<code>PascalCase</code>ï¼Œä¾‹å¦‚<code>Cartesian3</code>ã€‚</li><li>å‡½æ•°æ˜¯ <code>camelCase</code>ï¼Œä¾‹å¦‚ï¼Œ<code>defaultValue()</code>ã€<code>Cartesian3.equalsEpsilon()</code>ã€‚</li><li>æ–‡ä»¶ä»¥ <code>.js</code> ç»“å°¾å¹¶ä¸ JavaScript æ ‡è¯†ç¬¦åŒåï¼Œä¾‹å¦‚ï¼Œ<code>Cartesian3.js</code> å’Œ <code>defaultValue.js</code>ã€‚</li><li>å˜é‡ï¼ŒåŒ…æ‹¬ç±»å±æ€§ï¼Œæ˜¯ <code>camelCase</code>ï¼Œä¾‹å¦‚ï¼Œ</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">minimumPixelSize </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1.0</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// ç±»å±æ€§</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> bufferViews </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> gltf</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">bufferViews</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// å±€éƒ¨å˜é‡</span></span></code></pre></div><ul><li>ç§æœ‰ï¼ˆæŒ‰ç…§æƒ¯ä¾‹ï¼‰æˆå‘˜ä»¥ä¸‹åˆ’çº¿å¼€å¤´ï¼Œä¾‹å¦‚ï¼Œ</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_canvas </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> canvas</span><span style="color:#89DDFF;">;</span></span></code></pre></div><ul><li>å¸¸é‡ä¸ºå¸¦ä¸‹åˆ’çº¿çš„å¤§å†™å­—æ¯ï¼Œä¾‹å¦‚ï¼Œ</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">Cartesian3</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">UNIT_X </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">freeze</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Cartesian3</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1.0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.0</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span></code></pre></div><ul><li>é¿å…åœ¨å…¬å…±æ ‡è¯†ç¬¦ä¸­ä½¿ç”¨ç¼©å†™ï¼Œé™¤éå…¨åè¿‡äºç¹çå¹¶ä¸”å…·æœ‰å¹¿æ³›æ¥å—çš„ç¼©å†™ï¼Œä¾‹å¦‚ï¼Œ</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">Cartesian3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">maximumComponent</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// ä¸æ˜¯ Cartesian3.maxComponent() </span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">Ellipsoid</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">WGS84</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// ä¸æ˜¯ Ellipsoid.WORLD_GEODETIC_SYSTEM_1984</span></span></code></pre></div><ul><li>é¦–é€‰å±€éƒ¨å˜é‡çš„ç®€çŸ­æè¿°æ€§åç§°ï¼Œä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°åªæœ‰ä¸€ä¸ªé•¿åº¦å˜é‡ï¼Œ</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> primitivesLength </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> primitives</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#89DDFF;">;</span></span></code></pre></div><p>æœ€å¥½å†™æˆ</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> length </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> primitives</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#89DDFF;">;</span></span></code></pre></div><ul><li>åœ¨é—­åŒ…ä¸­è®¿é—®å¤–éƒ¨ä½œç”¨åŸŸçš„ <code>this</code> æ—¶ï¼Œå°†å˜é‡å‘½åä¸º <code>that</code>ï¼Œä¾‹å¦‚ï¼Œ</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> that </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this;</span></span>
<span class="line"><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_showTouch </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">createCommand</span><span style="color:#A6ACCD;">(</span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">that</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">_touch</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><p>ä¸‹é¢ä»‹ç»äº†æ›´å¤šå‘½åçº¦å®šåŠå…¶è®¾è®¡æ¨¡å¼ï¼Œä¾‹å¦‚ï¼Œ<a href="#options-parameters"><code>options</code>å‚æ•°</a>ã€[<code>result</code>å‚æ•°å’Œä¸´æ—¶å˜é‡](#result-parameters-and-scratch -variables) å’Œ <a href="#from-constructors"><code>from</code>æ„é€ å‡½æ•°</a>ã€‚</p><h2 id="æ ¼å¼åŒ–" tabindex="-1">æ ¼å¼åŒ– <a class="header-anchor" href="#æ ¼å¼åŒ–" aria-label="Permalink to &quot;æ ¼å¼åŒ–&quot;">â€‹</a></h2><ul><li>æˆ‘ä»¬ä½¿ç”¨ <a href="https://prettier.io/" target="_blank" rel="noreferrer">prettier</a> åœ¨æäº¤æ—¶è‡ªåŠ¨é‡æ–°æ ¼å¼åŒ–æ‰€æœ‰ JS ä»£ç ï¼Œå› æ­¤æ‰€æœ‰å·¥ä½œéƒ½å·²ä¸ºæ‚¨å®Œæˆã€‚æäº¤æ—¶ä»£ç ä¼šè‡ªåŠ¨é‡æ–°æ ¼å¼åŒ–ã€‚</li><li>å¯¹äº HTML ä»£ç ï¼Œä¿æŒç°æœ‰æ ·å¼ã€‚ä½¿ç”¨åŒå¼•å·ã€‚</li><li>æ–‡æœ¬æ–‡ä»¶ï¼Œä»¥æ¢è¡Œç¬¦ç»“å°¾ä»¥æœ€å°åŒ–å·®å¼‚ä¸­çš„å™ªéŸ³ã€‚</li></ul><h2 id="linting" tabindex="-1">Linting <a class="header-anchor" href="#linting" aria-label="Permalink to &quot;Linting&quot;">â€‹</a></h2><p>å¯¹äºè¯­æ³•å’Œæ ·å¼æŒ‡å—ï¼Œæˆ‘ä»¬ä½¿ç”¨ ESLint æ¨èçš„è®¾ç½®ï¼ˆè§„åˆ™åˆ—è¡¨å¯ä»¥åœ¨<a href="http://eslint.org/docs/rules/" target="_blank" rel="noreferrer">æ­¤å¤„</a> æ‰¾åˆ°ï¼‰ä½œä¸ºåŸºç¡€ï¼Œå¹¶é€šè¿‡å…±äº«çš„é™„åŠ è§„åˆ™å¯¹å…¶è¿›è¡Œæ‰©å±•é…ç½®èŠ‚ç‚¹æ¨¡å—ï¼Œ<a href="https://www.npmjs.com/package/eslint-config-cesium" target="_blank" rel="noreferrer">eslint-config-cesium</a>ã€‚è¯¥åŒ…ä½œä¸º Cesium å­˜å‚¨åº“çš„ä¸€éƒ¨åˆ†è¿›è¡Œç»´æŠ¤ï¼Œå¹¶åœ¨æ•´ä¸ª Cesium ç”Ÿæ€ç³»ç»Ÿä¸­ä½¿ç”¨ã€‚æœ‰å…³å·²å¯ç”¨è§„åˆ™çš„åˆ—è¡¨ï¼Œè¯·æŸ¥çœ‹ <a href="https://github.com/CesiumGS/cesium/blob/main/Tools/eslint-config-cesium/index.js" target="_blank" rel="noreferrer">index.js</a>ã€<a href="https://github.com/CesiumGS/eslint-config-cesium/blob/main/browser.js" target="_blank" rel="noreferrer">browser.js </a> å’Œ <a href="https://github.com/CesiumGS/eslint-config-cesium/blob/main/node.js" target="_blank" rel="noreferrer">node.js</a></p><p><strong>ä¸€èˆ¬è§„åˆ™ï¼š</strong></p><ul><li><a href="http://eslint.org/docs/rules/block-scoped-var" target="_blank" rel="noreferrer">block-scoped-var</a></li><li><a href="http://eslint.org/docs/rules/no-alert" target="_blank" rel="noreferrer">no-alert</a></li><li><a href="http://eslint.org/docs/rules/no-floating-decimal" target="_blank" rel="noreferrer">æ— æµ®åŠ¨å°æ•°</a></li><li><a href="http://eslint.org/docs/rules/no-implicit-globals" target="_blank" rel="noreferrer">no-implicit-globals</a></li><li><a href="http://eslint.org/docs/rules/no-loop-func" target="_blank" rel="noreferrer">no-loop-func</a></li><li><a href="http://eslint.org/docs/rules/no-use-before-define" target="_blank" rel="noreferrer">no-use-before-define</a> ä»¥é˜²æ­¢åœ¨å®šä¹‰å˜é‡å’Œå‡½æ•°ä¹‹å‰ä½¿ç”¨å®ƒä»¬ã€‚</li><li><a href="http://eslint.org/docs/rules/no-else-return" target="_blank" rel="noreferrer">no-else-return</a></li><li><a href="http://eslint.org/docs/rules/no-undef-init" target="_blank" rel="noreferrer">no-undef-init</a></li><li><a href="http://eslint.org/docs/rules/no-sequences" target="_blank" rel="noreferrer">æ— åºåˆ—</a></li><li><a href="http://eslint.org/docs/rules/no-unused-expressions" target="_blank" rel="noreferrer">no-unused-expressions</a></li><li><a href="http://eslint.org/docs/rules/no-trailing-spaces" target="_blank" rel="noreferrer">æ— å°¾éšç©ºæ ¼</a></li><li><a href="http://eslint.org/docs/rules/no-lonely-if" target="_blank" rel="noreferrer">no-lonely-if</a></li><li><a href="http://eslint.org/docs/rules/quotes" target="_blank" rel="noreferrer">quotes</a> å¼ºåˆ¶ä½¿ç”¨å•å¼•å·</li><li><a href="http://eslint.org/docs/rules/no-sequences" target="_blank" rel="noreferrer">no-sequences</a></li><li><a href="http://eslint.org/docs/rules/no-unused-expressions" target="_blank" rel="noreferrer">no-unused-expressions</a></li></ul><p><strong>Nodeç‰¹å®šè§„åˆ™ï¼š</strong></p><ul><li><a href="http://eslint.org/docs/rules/global-require" target="_blank" rel="noreferrer">global-require</a></li><li><a href="http://eslint.org/docs/rules/no-buffer-constructor" target="_blank" rel="noreferrer">no-buffer-constructor</a></li><li><a href="http://eslint.org/docs/rules/no-new-require" target="_blank" rel="noreferrer">no-new-require</a></li></ul><p><strong><a href="http://eslint.org/docs/user-guide/configuring#disabling-rules-with-inline-comments" target="_blank" rel="noreferrer">ä½¿ç”¨å†…è”æ³¨é‡Šç¦ç”¨è§„åˆ™</a></strong></p><ul><li>å½“ä¸ºä¸€è¡Œç¦ç”¨ linting æ—¶ï¼Œä½¿ç”¨ <code>//eslint-disable-next-line</code>:</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">exit</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">warningMessage</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//eslint-disable-next-line no-alert </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">alert</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Cannot exit : </span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">warningMessage</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><ul><li>å½“ç¦ç”¨ä»£ç å—çš„ linting æ—¶ï¼Œå°† <code>eslint-disable</code> æ³¨é‡Šæ”¾åœ¨æ–°è¡Œä¸Šå¹¶å°½å¯èƒ½é è¿‘ç›¸å…³ä»£ç ï¼š\`\`\`</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">/*eslint-disable no-empty*/</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">lineNumber</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">parseInt</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">stack</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">substring</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">lineStart</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">lineEnd1</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">10</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">catch</span><span style="color:#A6ACCD;"> (ex) </span><span style="color:#89DDFF;">{}</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">/*eslint-enable no-empty*/</span></span></code></pre></div><h2 id="å•ä½" tabindex="-1">å•ä½ <a class="header-anchor" href="#å•ä½" aria-label="Permalink to &quot;å•ä½&quot;">â€‹</a></h2><ul><li>Cesium ä½¿ç”¨ SI å•ä½ï¼š <ul><li>ç±³è¡¨ç¤ºè·ç¦»</li><li>å¼§åº¦è¡¨ç¤ºè§’åº¦</li><li>æŒç»­æ—¶é—´çš„ç§’æ•°</li></ul></li><li>å¦‚æœä¸€ä¸ªå‡½æ•°çš„å‚æ•°æœ‰ä¸€ä¸ªéæ ‡å‡†å•ä½ï¼Œæ¯”å¦‚åº¦ï¼ŒæŠŠå•ä½æ”¾åœ¨å‡½æ•°åé‡Œï¼Œä¾‹å¦‚ï¼Œ</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">Cartesian3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fromDegrees</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#A6ACCD;font-style:italic;">longitude</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#A6ACCD;font-style:italic;">latitude</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#A6ACCD;font-style:italic;">height</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#A6ACCD;font-style:italic;">ellipsoid</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#A6ACCD;font-style:italic;">result</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">*</span><span style="color:#C3E88D;"> ... </span><span style="color:#89DDFF;">*</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">/</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre></div><h2 id="åŸºæœ¬ä»£ç æ„é€ " tabindex="-1">åŸºæœ¬ä»£ç æ„é€  <a class="header-anchor" href="#åŸºæœ¬ä»£ç æ„é€ " aria-label="Permalink to &quot;åŸºæœ¬ä»£ç æ„é€ &quot;">â€‹</a></h2><ul><li>Cesium ä½¿ç”¨ JavaScript çš„ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode" target="_blank" rel="noreferrer">ä¸¥æ ¼æ¨¡å¼</a> æ‰€ä»¥æ¯ä¸ªæ¨¡å—ï¼ˆæ–‡ä»¶ï¼‰åŒ…å«</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">use strict</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span></code></pre></div><ul><li>ğŸš¤: ä¸ºé¿å…ç±»å‹å¼ºåˆ¶è½¬æ¢ï¼ˆéšå¼ç±»å‹è½¬æ¢ï¼‰ï¼Œä½¿ç”¨ <code>===</code> å’Œ <code>!==</code> æµ‹è¯•ç›¸ç­‰æ€§ï¼Œä¾‹å¦‚ï¼Œ</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> i </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> (i </span><span style="color:#89DDFF;">===</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ... </span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> (i </span><span style="color:#89DDFF;">!==</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ... </span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>ä¸ºäº†å¸®åŠ©äººç±»è¯»è€…ï¼Œå¯¹äºæ‰“ç®—ä½œä¸ºæµ®ç‚¹æ•°å€¼çš„æ•´æ•°ï¼Œè¯·åœ¨å…¶æœ«å°¾æ·»åŠ <code>.0</code></p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> f </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//ä¾‹å¦‚ï¼Œé™¤é f æ˜¯æ•´æ•°ï¼Œå¦åˆ™æœ€å¥½å†™æˆ</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> f </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1.0</span><span style="color:#89DDFF;">;</span></span></code></pre></div><ul><li>åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨çš„åœ°æ–¹å£°æ˜å˜é‡ã€‚ä¾‹å¦‚ï¼Œ</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> i</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> m</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> models </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/* ... */</span></span>
<span class="line"><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> length </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> models</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#A6ACCD;"> (i </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> i </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> length</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">++</span><span style="color:#A6ACCD;">i) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">m</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">models</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// Use m</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>æœ€å¥½å†™æˆ</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> models </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> [ </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">/* ... */</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">]</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> length </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> models</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#A6ACCD;"> (</span><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> i </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> i </span><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;"> length</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">++</span><span style="color:#A6ACCD;">i) </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">m</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">models</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ä½¿ç”¨ m </span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><ul><li><code>let</code> å’Œ <code>const</code> å˜é‡å…·æœ‰å—çº§ä½œç”¨åŸŸã€‚ä¸è¦ä¾èµ–å˜é‡æå‡ï¼Œå³åœ¨å˜é‡å£°æ˜ä¹‹å‰ä½¿ç”¨å®ƒï¼Œä¾‹å¦‚ï¼Œ</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(i)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// æˆ‘åœ¨è¿™é‡Œæ˜¯æœªå®šä¹‰çš„ã€‚æ°¸è¿œä¸è¦åœ¨å˜é‡å£°æ˜ä¹‹å‰ä½¿ç”¨å®ƒã€‚</span></span>
<span class="line"><span style="color:#C792EA;">let</span><span style="color:#A6ACCD;"> i</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.0</span><span style="color:#89DDFF;">;</span></span></code></pre></div><ul><li><p>å½“å€¼æœªæ›´æ–°æ—¶ï¼Œé¦–é€‰ <code>const</code> å˜é‡ã€‚è¿™ç¡®ä¿äº†ä¸å˜æ€§ã€‚</p></li><li><p>ğŸš¤: é¿å…å†—ä½™çš„åµŒå¥—å±æ€§è®¿é—®ã€‚å¦‚ï¼š</p></li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">scene</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">environmentState</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">isSkyAtmosphereVisible </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">scene</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">environmentState</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">isSunVisible </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">scene</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">environmentState</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">isMoonVisible </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">;</span></span></code></pre></div><p>æœ€å¥½å†™æˆ</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> environmentState </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> scene</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">environmentState</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">environmentState</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">isSkyAtmosphereVisible </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">environmentState</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">isSunVisible </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">environmentState</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">isMoonVisible </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">;</span></span></code></pre></div><ul><li>ä¸è¦åˆ›å»ºåªä½¿ç”¨ä¸€æ¬¡çš„å±€éƒ¨å˜é‡ï¼Œé™¤éå®ƒæ˜¾ç€æé«˜å¯è¯»æ€§ï¼Œä¾‹å¦‚ï¼Œ</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">radiiEquals</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">left</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">right</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">leftRadius</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">left</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">radius</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">rightRadius</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">right</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">radius</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">leftRadius</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">rightRadius</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>æœ€å¥½å†™æˆ</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">radiiEquals</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">left</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">right</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">left</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">radius</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">right</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">radius</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><ul><li>ä½¿ç”¨ <code>undefined</code> è€Œä¸æ˜¯ <code>null</code>ã€‚</li><li>ä½¿ç”¨<code>Cesium.defined</code> æµ‹è¯•ä¸€ä¸ªå˜é‡æ˜¯å¦è¢«å®šä¹‰ï¼Œä¾‹å¦‚ï¼Œ</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> v </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">undefined;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> (</span><span style="color:#82AAFF;">defined</span><span style="color:#A6ACCD;">(v)) </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// False</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> u </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{};</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> (</span><span style="color:#82AAFF;">defined</span><span style="color:#A6ACCD;">(u)) </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// True </span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><ul><li>ä½¿ç”¨ <code>Object.freeze</code> å‡½æ•°åˆ›å»ºæšä¸¾ï¼Œä¾‹å¦‚ï¼Œ</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> ModelAnimationState </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">STOPPED </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#F07178;">ANIMATING </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">freeze</span><span style="color:#A6ACCD;">(ModelAnimationState)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><ul><li>å¯¹ä¸æ˜æ˜¾çš„ä»£ç ä½¿ç”¨æè¿°æ€§æ³¨é‡Šï¼Œä¾‹å¦‚ï¼Œ</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">byteOffset </span><span style="color:#89DDFF;">+=</span><span style="color:#A6ACCD;"> sizeOfUint32</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// å°† 4 æ·»åŠ åˆ° byteOffset</span></span></code></pre></div><p>æœ€å¥½å†™æˆ</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">byteOffset </span><span style="color:#89DDFF;">+=</span><span style="color:#A6ACCD;"> sizeOfUint32</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// è·³è¿‡é•¿åº¦å­—æ®µ</span></span></code></pre></div><ul><li>åœ¨ä»£ç åˆå¹¶åˆ° main ä¹‹å‰éœ€è¦åˆ é™¤æˆ–è§£å†³ <code>TODO</code> æ³¨é‡Šã€‚ä½¿ç”¨<code>// PERFORMANCE_IDEA : </code>æ³¨é‡Šæ ‡è®°å¯èƒ½ä¼˜åŒ–çš„ç‚¹ï¼Œä»¥ä¾¿ä»¥ååœ¨æ€§èƒ½åˆ†ææ—¶ä½¿ç”¨ï¼Œä½†è¦è°¨æ…ä½¿ç”¨ã€‚</li><li>åœ¨åˆå¹¶åˆ° main ä¹‹å‰åˆ é™¤æ³¨é‡Šæ‰çš„ä»£ç ã€‚</li><li>ç°ä»£è¯­è¨€åŠŸèƒ½å¯èƒ½ä¼šæä¾›æ–¹ä¾¿çš„å¿«æ·æ–¹å¼å’Œæ›´ç®€æ´çš„è¯­æ³•ï¼Œä½†åœ¨ä½¿ç”¨å®ƒä»¬æ—¶åº”è€ƒè™‘åˆ°å®ƒä»¬å¯¹æ€§èƒ½çš„å½±å“ï¼Œå°¤å…¶æ˜¯åœ¨æ¯å¸§è°ƒç”¨çš„ä»£ç ä¸­ã€‚</li></ul><h2 id="å‡½æ•°" tabindex="-1">å‡½æ•° <a class="header-anchor" href="#å‡½æ•°" aria-label="Permalink to &quot;å‡½æ•°&quot;">â€‹</a></h2><ul><li>ğŸ¨: å‡½æ•°åº”è¯¥æ˜¯<strong>å†…èšçš„</strong>ï¼›ä»–ä»¬åº”è¯¥åªåšä¸€é¡¹ä»»åŠ¡ã€‚</li><li>å‡½æ•°ä¸­çš„è¯­å¥åº”è¯¥å¤„äºç›¸ä¼¼çš„æŠ½è±¡çº§åˆ«ã€‚å¦‚æœä¸€ä¸ªä»£ç å—æ¯”å…¶ä½™çš„è¯­å¥ä½å¾—å¤šï¼Œé‚£ä¹ˆç§»è‡³è¾…åŠ©å‡½æ•°æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼Œä¾‹å¦‚ï¼Œ</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">Cesium3DTileset</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">update</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">frameState</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">tiles</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_processingQueue</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">tiles</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#F07178;"> (</span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">tiles</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">process</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">frameState</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">selectTiles</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">frameState</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">updateTiles</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">frameState</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre></div><p>æœ€å¥½å†™æˆ</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">Cesium3DTileset</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">update</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">frameState</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">processTiles</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">frameState</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">selectTiles</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">frameState</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">updateTiles</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">frameState</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">processTiles</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">tileset</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">frameState</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">tiles</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">tileset</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">_processingQueue</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">tiles</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#F07178;"> (</span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">tiles</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">process</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">tileset</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">frameState</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><ul><li>ä¸è¦åœ¨å‡½æ•°æœ«å°¾ä½¿ç”¨ä¸å¿…è¦çš„ <code>else</code> å—ï¼Œä¾‹å¦‚ï¼Œ</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getTransform</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">node</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">defined</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">matrix</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Matrix4</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fromArray</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">matrix</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Matrix4</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fromTranslationQuaternionRotationScale</span><span style="color:#F07178;">( </span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">translation</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">rotation</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">scale</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">    )</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>æœ€å¥½å†™æˆ</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getTransform</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">node</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#82AAFF;">defined</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">matrix</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Matrix4</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fromArray</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">matrix</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Matrix4</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fromTranslationQuaternionRotationScale</span><span style="color:#F07178;">( </span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">translation</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">rotation</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">node</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">scale</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  )</span><span style="color:#89DDFF;">;</span></span></code></pre></div><ul><li>ğŸš¤: è¾ƒå°çš„å‡½æ•°æ›´æœ‰å¯èƒ½è¢« JavaScript å¼•æ“ä¼˜åŒ–ã€‚å¯¹äºå¯èƒ½æˆä¸ºçƒ­ç‚¹çš„ä»£ç ï¼Œè¯·è€ƒè™‘è¿™ä¸€ç‚¹ã€‚</li></ul><h3 id="options-å‚æ•°" tabindex="-1"><code>options</code> å‚æ•° <a class="header-anchor" href="#options-å‚æ•°" aria-label="Permalink to &quot;\`options\` å‚æ•°&quot;">â€‹</a></h3><p>ğŸ¨: è®¸å¤š Cesium å‡½æ•°é‡‡ç”¨ <code>options</code> å‚æ•°æ¥æ”¯æŒå¯é€‰å‚æ•°ã€è‡ªåŠ¨ç”Ÿæˆä»£ç æ–‡æ¡£å’Œå‘å‰å…¼å®¹æ€§ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘ï¼š</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> sphere </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">SphereGeometry</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">10.0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">32</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">16</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> VertexFormat</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">POSITION_ONLY)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><p>ä¸æ¸…æ¥šæ•°å€¼ä»£è¡¨ä»€ä¹ˆï¼Œè°ƒç”¨è€…éœ€è¦çŸ¥é“å‚æ•°çš„é¡ºåºã€‚å¦‚æœè¿™éœ€è¦ä¸€ä¸ª<code>options</code>å‚æ•°ï¼Œå®ƒçœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> sphere </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">SphereGeometry</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">radius</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10.0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">stackPartitions</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">32</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">slicePartitions</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">16</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">vertexFormat</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> VertexFormat</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">POSITION_ONLY</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><ul><li>ğŸš¤: ä½¿ç”¨ <code>{ /* ... */ }</code> åˆ›å»ºä¸€ä¸ªå¯¹è±¡å­—é¢é‡ï¼Œè¿™æ˜¯ä¸€ç§å†…å­˜åˆ†é…ï¼Œæ¯”è¾ƒæ…¢ã€‚æ‰€ä»¥å¦‚æœå‡½æ•°å¯èƒ½è¢«é¢‘ç¹è°ƒç”¨ï¼Œè¯·é¿å…è®¾è®¡ä½¿ç”¨<code>options</code>å‚æ•°çš„å‡½æ•°ï¼›å¦åˆ™ï¼Œè°ƒç”¨è€…å°†ä¸å¾—ä¸ä½¿ç”¨ä¸´æ—¶å˜é‡ï¼ˆå‚è§ [ <code>result</code> å‚æ•°å’Œä¸´æ—¶å˜é‡](# <code>result</code> å‚æ•°å’Œä¸´æ—¶å˜é‡)ï¼‰æ¥æé«˜æ€§èƒ½ã€‚é™¤äº†æ•°å­¦ç±»çš„æ„é€ å‡½æ•°å¤–ï¼Œå…¶ä»–çš„ç±»æ„é€ å‡½æ•°éƒ½å¯ä»¥ä½¿ç”¨<code>options</code>å‚æ•°ã€‚Cesium é¿å…äº†åœ¨è¢«é¢‘ç¹è°ƒç”¨çš„ç±»ä½¿ç”¨<code>options</code>å»æ„é€ å¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œ</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> p </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Cartesian3</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">x</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1.0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">y</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2.0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">z</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3.0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><p>å¯¹äº <code>Cartesian3</code> æ„é€ å‡½æ•°æ¥è¯´æ˜¯ä¸€ä¸ªç³Ÿç³•çš„è®¾è®¡ï¼Œå› ä¸ºå®ƒçš„æ€§èƒ½ä¸å¦‚</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> p </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Cartesian3</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1.0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2.0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3.0</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h3 id="é»˜è®¤å‚æ•°å€¼" tabindex="-1">é»˜è®¤å‚æ•°å€¼ <a class="header-anchor" href="#é»˜è®¤å‚æ•°å€¼" aria-label="Permalink to &quot;é»˜è®¤å‚æ•°å€¼&quot;">â€‹</a></h3><p>å¦‚æœå‡½æ•°å‚æ•°æˆ–ç±»å±æ€§å­˜åœ¨_åˆç†_é»˜è®¤å€¼ï¼Œåˆ™ä¸éœ€è¦ç”¨æˆ·æä¾›å®ƒã€‚ä½¿ç”¨ Cesium çš„ defaultValue æ¥åˆ†é…ä¸€ä¸ªé»˜è®¤å€¼ã€‚ä¾‹å¦‚ï¼Œåœ¨ Cartesian3.fromRadians ä¸­ï¼Œheight é»˜è®¤ä¸ºé›¶ï¼š</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">Cartesian3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fromRadians</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">longitude</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">latitude</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">height</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">height</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">defaultValue</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">height</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0.0</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ... </span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre></div><ul><li>ğŸš¤: ä¸è¦ä½¿ç”¨ <code>defaultValue</code> ï¼Œå¦‚æœå®ƒä¼šå¯¼è‡´ä¸å¿…è¦çš„å‡½æ•°è°ƒç”¨æˆ–å†…å­˜åˆ†é…ï¼Œä¾‹å¦‚ï¼Œ</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_mapProjection </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defaultValue</span><span style="color:#A6ACCD;">( </span></span>
<span class="line"><span style="color:#A6ACCD;">  options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mapProjection</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">GeographicProjection</span><span style="color:#A6ACCD;">() </span></span>
<span class="line"><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><p>æœ€å¥½å†™æˆ</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_mapProjection </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">defined</span><span style="color:#A6ACCD;">(options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mapProjection) </span></span>
<span class="line"><span style="color:#A6ACCD;">  ï¼Ÿoptions</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">mapProjection </span></span>
<span class="line"><span style="color:#A6ACCD;">  : </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">GeographicProjection</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span></code></pre></div><ul><li>å¦‚æœ <code>options</code> å‚æ•°æ˜¯å¯é€‰çš„ï¼Œè¯·ä½¿ç”¨ <code>defaultValue.EMPTY_OBJECT</code>ï¼Œä¾‹å¦‚</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DebugModelMatrixPrimitive</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">options</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">options</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">defaultValue</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">defaultValue</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">EMPTY_OBJECT</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">defaultValue</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">10000000.0</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">width</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">defaultValue</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">width</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">2.0</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ... </span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>ä¸€äº›å¸¸è§çš„åˆç†é»˜è®¤å€¼æ˜¯</p><ul><li><code>height</code>: <code>0.0</code></li><li><code>ellipsoid</code>: <code>Ellipsoid.WGS84</code></li><li><code>show</code>: <code>true</code></li></ul><h3 id="æŠ›å‡ºå¼‚å¸¸" tabindex="-1">æŠ›å‡ºå¼‚å¸¸ <a class="header-anchor" href="#æŠ›å‡ºå¼‚å¸¸" aria-label="Permalink to &quot;æŠ›å‡ºå¼‚å¸¸&quot;">â€‹</a></h3><p><a href="https://github.com/CesiumGS/cesium/blob/main/Source/Core/Check.js" target="_blank" rel="noreferrer">ä½¿ç”¨Cesiumçš„Check</a>ç±»åœ¨ç”¨æˆ·å‡ºç°ç¼–ç é”™è¯¯æ—¶æŠ›å‡º<code>DeveloperError</code>ã€‚æœ€å¸¸è§çš„é”™è¯¯æ˜¯å‚æ•°ä¸¢å¤±ã€ç±»å‹é”™è¯¯ æˆ– ç±»å‹é”™è¯¯ä¸”è¶…å‡ºèŒƒå›´ æˆ– è¶…å‡ºèŒƒå›´ã€‚</p><ul><li>ä¾‹å¦‚ï¼Œè¦æ£€æŸ¥å‚æ•°æ˜¯å¦å·²å®šä¹‰å¹¶ä¸”æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼š</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">Cartesian3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">maximumComponent</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">cartesian</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//&gt;&gt;includeStart(&#39;debug&#39;, pragmas.debug);</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">Check</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">typeOf</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">object</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">cartesian</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">cartesian</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//&gt;&gt;includeEnd(&#39;debug&#39;);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Math</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">max</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">cartesian</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">cartesian</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">y</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">cartesian</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">z</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre></div><ul><li>å¯¹äºæ›´å¤æ‚çš„å‚æ•°æ£€æŸ¥ï¼Œæ‰‹åŠ¨æ£€æŸ¥å‚æ•°ç„¶åæŠ›å‡º <code>DeveloperError</code>ã€‚ç¤ºä¾‹ï¼š</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">Cartesian3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">unpackArray</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">array</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">result</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//&gt;&gt;includeStart(&#39;debug&#39;, pragmas.debug); </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">Check</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">defined</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">array</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">array</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">Check</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">typeOf</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">number</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">greaterThanOrEquals</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">array.length</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">array</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">3</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">array</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">%</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">3</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">DeveloperError</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">æ•°ç»„é•¿åº¦å¿…é¡»æ˜¯ 3 çš„å€æ•°ã€‚</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//&gt;&gt;includeEnd(&#39;debug&#39;); </span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ... </span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre></div><ul><li>è¦æ£€æŸ¥<code>DeveloperError</code>ï¼Œè¯·å°†ä»£ç åŒ…å›´åœ¨<code>includeStart</code>/<code>includeEnd</code>æ³¨é‡Šä¸­ï¼Œå¦‚ä¸Šæ‰€ç¤ºï¼Œä»¥ä¾¿å¼€å‘äººå‘˜å¯ä»¥åœ¨å‘å¸ƒç‰ˆæœ¬ä¹‹å‰è¿›è¡Œé”™è¯¯æ£€æŸ¥å’Œä¼˜åŒ–ã€‚ä¸è¦åœ¨ <code>includeStart</code>/<code>includeEnd</code> ä¸­åŒ…å«å…¶ä»–çš„å‰¯ä½œç”¨ï¼Œä¾‹å¦‚ï¼Œ</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">Cartesian3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">maximumComponent</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">cartesian</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//&gt;&gt;includeStart(&#39;debug&#39;, pragmas.debug); </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">c</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">cartesian</span><span style="color:#F07178;">ï¼›</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">Check</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">typeOf</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">object</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">cartesian</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">cartesian</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//&gt;&gt;includeEnd(&#39;è°ƒè¯•&#39;); </span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// åœ¨è°ƒè¯•ä¸­å·¥ä½œã€‚å‘å¸ƒå¤±è´¥ï¼Œå› ä¸º c è¢«ä¼˜åŒ–äº†ï¼</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Math</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">max</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">cx</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">cy</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">cz</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre></div><ul><li>å½“è¿è¡Œæ—¶å‡ºç°é”™è¯¯æ—¶ï¼Œä¼šä½¿ç”¨Cesiumçš„<code>RuntimeError</code>è¿›è¡ŒæŠ›å‡ºã€‚ä¸<code>DeveloperError</code>ä¸åŒï¼Œ<code>RuntimeError</code>ä¸ä¼šåœ¨å‘å¸ƒç‰ˆæœ¬ä¸­è¢«ä¼˜åŒ–æ‰ï¼Œå› ä¸ºè¿™äº›é”™è¯¯å¯èƒ½ä¼šå¯¼è‡´ç¨‹åºçš„å´©æºƒæˆ–è€…å…¶ä»–ä¸¥é‡é—®é¢˜ï¼Œéœ€è¦åœ¨è¿è¡Œæ—¶è¿›è¡Œæ£€æŸ¥å’Œå¤„ç†ã€‚</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">typeof</span><span style="color:#A6ACCD;"> WebGLRenderingContext </span><span style="color:#89DDFF;">===</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">undefined</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">RuntimeError</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">æµè§ˆå™¨ä¸æ”¯æŒ WebGLã€‚</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>ğŸ¨ å¼‚å¸¸æ˜¯ç‰¹æ®Šæƒ…å†µã€‚å°½é‡é¿å…æŠ›å‡ºå¼‚å¸¸ï¼Œä¾‹å¦‚ï¼Œå¦‚æœä¸€æ¡å¤šæ®µçº¿åªæä¾›ä¸€ä¸ªä½ç½®ï¼Œè€Œä¸æ˜¯ä¸¤ä¸ªæˆ–æ›´å¤šï¼Œé‚£ä¹ˆåªæ˜¯ä¸æ¸²æŸ“å®ƒè€Œä¸æ˜¯æŠ›å‡ºå¼‚å¸¸ã€‚</p><h3 id="result-å‚æ•°å’Œscratchä¸´æ—¶å˜é‡" tabindex="-1"><code>result</code> å‚æ•°å’Œ<code>Scratch</code>ä¸´æ—¶å˜é‡ <a class="header-anchor" href="#result-å‚æ•°å’Œscratchä¸´æ—¶å˜é‡" aria-label="Permalink to &quot;\`result\` å‚æ•°å’Œ\`Scratch\`ä¸´æ—¶å˜é‡&quot;">â€‹</a></h3><pre><code>ğŸš¤: åœ¨ JavaScript ä¸­ï¼Œç”¨æˆ·å®šä¹‰çš„ç±»ï¼ˆå¦‚\`Cartesian3\`ï¼‰æ˜¯å¼•ç”¨ç±»å‹ï¼Œå¹¶ä¸”å› æ­¤åˆ†é…åœ¨å †ä¸Šã€‚é¢‘ç¹åˆ†é…è¿™äº›ç±»å‹ä¼šå¯¼è‡´ä¸¥é‡çš„æ€§èƒ½é—®é¢˜ï¼Œå› ä¸ºå®ƒä¼šäº§ç”Ÿ GC å‹åŠ›ï¼Œä»è€Œå¯¼è‡´åƒåœ¾æ”¶é›†å™¨è¿è¡Œæ›´é•¿æ—¶é—´å’Œæ›´é¢‘ç¹ã€‚
</code></pre><p>Cesium ä½¿ç”¨å¿…éœ€çš„<code>result</code>å‚æ•°æ¥é¿å…éšå¼å†…å­˜åˆ†é…ã€‚ä¾‹å¦‚ï¼Œ</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> sum </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Cartesian3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#A6ACCD;">(v0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> v1)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//ä¼šä¸ºè¿”å›çš„suméšå«åˆ†é…ä¸€ä¸ªæ–°çš„Cartesian3å¯¹è±¡ã€‚</span></span></code></pre></div><p>ç›¸åï¼Œå¦‚æœ<code>Cartesian3.add</code> éœ€è¦ä¸€ä¸ª<code>result</code> å‚æ•°ï¼Œ</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> result </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Cartesian3</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> sum </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Cartesian3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#A6ACCD;">(v0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> v1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> result)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// Result å’Œ sum å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡</span></span></code></pre></div><p>å°±ä¼šä½¿å¾—å†…å­˜åˆ†é…å¯¹è°ƒç”¨è€…æ˜¾å¼ï¼Œè¿™ä½¿å¾—è°ƒç”¨è€…å¯ä»¥åœ¨æ–‡ä»¶èŒƒå›´çš„ä¸´æ—¶å˜é‡ä¸­é‡å¤ä½¿ç”¨ç»“æœå¯¹è±¡ï¼š</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> scratchDistance </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Cartesian3</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//åœ¨è¢«é¢‘ç¹è°ƒç”¨çš„å‡½æ•°ä¹‹å¤–å£°æ˜ä¼šè¢«é‡å¤ä½¿ç”¨çš„ä¸´æ—¶å˜é‡ï¼Œè€Œä¸æ˜¯åœ¨å‡½æ•°é‡Œ</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">Cartesian3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">distance</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">left</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">right</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">Cartesian3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">subtract</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">left</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">right</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">scratchDistance</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Cartesian3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">magnitude</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">scratchDistance</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre></div><p>è¿™æ ·çš„ä»£ç ä¸å¤Ÿç®€æ´ï¼Œä½†æ˜¯æ€§èƒ½æå‡é€šå¸¸éå¸¸æ˜æ˜¾ã€‚</p><p>å¦‚ä¸‹æ‰€è¿°ï¼Œ<code>add</code>æ„é€ å‡½æ•°è¿˜ä½¿ç”¨å¯é€‰çš„<code>result</code>å‚æ•°ã€‚ ä½†ç”±äºresultå‚æ•°å¹¶éå§‹ç»ˆå¿…éœ€æˆ–è¿”å›ï¼Œä¸è¦ä¸¥æ ¼ä¾èµ–ä¼ é€’çš„resultå‚æ•°è¢«ä¿®æ”¹ã€‚ä¾‹å¦‚ï¼š</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">Cartesian3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#A6ACCD;">(v0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> v1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> result)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">Cartesian3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#A6ACCD;">(result</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> v2</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> result)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><p>å› æ­¤ï¼Œæœ€å¥½çš„æ–¹å¼æ˜¯åœ¨æ¯ä¸€æ¬¡æ–¹æ³•è°ƒç”¨çš„æ—¶å€™éƒ½æ˜¾å¼åœ°å¯¹resultè¿›è¡Œèµ‹å€¼ï¼Œè€Œä¸æ˜¯ä¾èµ–äºæ–¹æ³•ä¸­éšå«çš„è¿ç®—:</p><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">result </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Cartesian3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#A6ACCD;">(v0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> v1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> result)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">result </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Cartesian3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#A6ACCD;">(result</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> v2</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> result)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h2 id="ç±»" tabindex="-1">ç±» <a class="header-anchor" href="#ç±»" aria-label="Permalink to &quot;ç±»&quot;">â€‹</a></h2><ul><li>ğŸ¨: ç±»åº”è¯¥æ˜¯<strong>å†…èšçš„</strong>ã€‚ä¸€ä¸ªç±»åº”è¯¥ä»£è¡¨ä¸€ä¸ªæŠ½è±¡ã€‚</li><li>ğŸ¨: ç±»åº”è¯¥<strong>æ¾è€¦åˆ</strong>ã€‚ä¸¤ä¸ªç±»ä¸åº”è¯¥çº ç¼ åœ¨ä¸€èµ·å¹¶ä¾èµ–å½¼æ­¤çš„å®ç°ç»†èŠ‚ï¼›ä»–ä»¬åº”è¯¥é€šè¿‡å®šä¹‰æ˜ç¡®çš„æ¥å£è¿›è¡Œé€šä¿¡ã€‚</li></ul><h3 id="æ„é€ å‡½æ•°" tabindex="-1">æ„é€ å‡½æ•° <a class="header-anchor" href="#æ„é€ å‡½æ•°" aria-label="Permalink to &quot;æ„é€ å‡½æ•°&quot;">â€‹</a></h3><ul><li>é€šè¿‡åˆ›å»ºæ„é€ å‡½æ•°æ¥åˆ›å»ºç±»ï¼š</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Cartesian3</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">x</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">y</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">z</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">defaultValue</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0.0</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">defaultValue</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">y</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0.0</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">z</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">defaultValue</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">z</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0.0</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><ul><li>é€šè¿‡ä½¿ç”¨ <code>new</code> è°ƒç”¨æ„é€ å‡½æ•°æ¥åˆ›å»ºç±»ï¼ˆ<em>object</em>ï¼‰çš„å®ä¾‹ï¼š</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> p </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Cartesian3</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1.0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2.0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3.0</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><ul><li>ğŸš¤: åœ¨æ„é€ å‡½æ•°ä¸­ä¸ºç±»çš„æ‰€æœ‰å±æ€§æˆå‘˜åˆ†é…åˆå§‹å€¼ã€‚è¿™å…è®¸ JavaScript å¼•æ“ä½¿ç”¨éšè—ç±»å¹¶é¿å…è¿›å…¥å­—å…¸æ¨¡å¼ã€‚å¦‚æœæ²¡æœ‰åˆé€‚çš„åˆå§‹å€¼ï¼Œè¯·å°†å±æ€§çš„å€¼è®¾ä¸º undefinedã€‚ä¸è¦å‘å¯¹è±¡æ·»åŠ å±æ€§ï¼Œä¾‹å¦‚ï¼Œ</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> p </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Cartesian3</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1.0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2.0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3.0</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">p</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">w </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4.0</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// å°† w å±æ€§æ·»åŠ åˆ° pï¼Œå‡æ…¢å±æ€§è®¿é—®ï¼Œå› ä¸ºå¯¹è±¡è¿›å…¥å­—å…¸æ¨¡å¼</span></span></code></pre></div><ul><li>ğŸš¤: å‡ºäºåŒæ ·çš„åŸå› ï¼Œä¸è¦æ›´æ”¹å±æ€§çš„ç±»å‹ï¼Œä¾‹å¦‚ï¼Œå°†å­—ç¬¦ä¸²åˆ†é…ç»™æ•°å­—ï¼Œä¾‹å¦‚</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> p </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Cartesian3</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">1.0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2.0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3.0</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">p</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">x </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">é“¯</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// å°† x æ›´æ”¹ä¸ºå­—ç¬¦ä¸²ï¼Œå‡æ…¢å±æ€§è®¿é—®é€Ÿåº¦</span></span></code></pre></div><ul><li><p>åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œå°†å±æ€§è§†ä¸ºä¸€æ¬¡å†™å…¥ï¼›ä¸è¦å†™ä¿¡ç»™ä»–ä»¬æˆ–å¤šæ¬¡é˜…è¯»å®ƒä»¬ã€‚å¦‚æœéœ€è¦è¯»å–å®ƒä»¬ï¼Œè¯·åˆ›å»ºä¸€ä¸ªå±€éƒ¨å˜é‡ ä»£æ›¿ã€‚ä¾‹å¦‚ï¼š</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_x </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_xSquared </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_x </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_x</span><span style="color:#89DDFF;">;</span></span></code></pre></div><p>æ›´å¥½çš„åšæ³•</p></li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> x </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_x </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> x</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_xSquared </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> x </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> x</span><span style="color:#89DDFF;">;</span></span></code></pre></div><blockquote><p>è¿™ä¸ªå»ºè®®çš„åŸç†æ˜¯ä¼˜åŒ– JavaScript å¼•æ“çš„å†…å­˜ç®¡ç†å’Œæ‰§è¡Œã€‚å½“ä½ åœ¨ä¸€ä¸ªæ„é€ å‡½æ•°ä¸­å†™å…¥å±æ€§æ—¶ï¼ŒJavaScript å¼•æ“ä¼šåŠ¨æ€åœ°åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡å¹¶ä¸ºå…¶åˆ†é…å†…å­˜ï¼Œè¿™ä¸ªå¯¹è±¡æœ€ç»ˆä¼šæˆä¸ºæ„é€ å‡½æ•°åˆ›å»ºçš„å®ä¾‹å¯¹è±¡ã€‚å½“ä¸€ä¸ªå±æ€§è¢«å†™å…¥å€¼æ—¶ï¼ŒJavaScript å¼•æ“ä¸ä»…éœ€è¦åˆ†é…å†…å­˜ï¼Œè¿˜éœ€è¦ä¸ºæ¯ä¸ªå®ä¾‹å¯¹è±¡ä¿å­˜è¿™ä¸ªå±æ€§å€¼ã€‚å¦‚æœåœ¨æ„é€ å‡½æ•°ä¸­é‡å¤è¯»å–è¯¥å±æ€§çš„å€¼ï¼Œå½“ä¸€ä¸ªå±æ€§è¢«è¯»å–æ—¶ï¼ŒJavaScript å¼•æ“éœ€è¦ä»å†…å­˜ä¸­è·å–è¿™ä¸ªå±æ€§çš„å€¼å¹¶å°†å…¶åŠ è½½åˆ°å¯„å­˜å™¨ä¸­ã€‚å¦‚æœé‡å¤åœ°è®¿é—®åŒä¸€ä¸ªå±æ€§ï¼Œæ¯æ¬¡å¼•æ“éƒ½éœ€è¦ä¸æ–­åœ°é‡æ–°æŸ¥æ‰¾è¿™ä¸ªå±æ€§çš„å†…å­˜åœ°å€å¹¶é‡æ–°åŠ è½½è¯¥å€¼åˆ°å¯„å­˜å™¨ä¸­ã€‚è¿™æ ·çš„æ“ä½œä¼šæ¶‰åŠåˆ°å¤§é‡çš„å†…å­˜å¯»å€å’Œæ•°æ®åŠ è½½ï¼Œå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚å› æ­¤ï¼Œå¦‚æœä¸€ä¸ªå±æ€§éœ€è¦è¢«å¤šæ¬¡ä½¿ç”¨ï¼Œä¸ºäº†é¿å…è¿™ç§æ€§èƒ½æŸå¤±ï¼Œæœ€å¥½å°†å…¶å­˜å‚¨åœ¨ä¸€ä¸ªæœ¬åœ°å˜é‡ä¸­ï¼Œè€Œä¸æ˜¯å¤šæ¬¡è¯»å–åŒä¸€ä¸ªå±æ€§çš„å€¼ã€‚</p><p>JavaScript å¼•æ“åœ¨å¤„ç†å¯¹è±¡æ—¶ï¼Œåº”è¯¥ä½¿ç”¨ç±»ä¼¼äº C++ ç¼–è¯‘å™¨çš„é™æ€ç±»å‹æˆ–éšè—çš„ç±»æ¥æé«˜æ€§èƒ½ã€‚å½“å®šä¹‰ä¸€ä¸ªæ–°çš„å¯¹è±¡æ—¶ï¼ŒJavaScript å¼•æ“ä¼šæŸ¥çœ‹å®ƒçš„ç»“æ„å¹¶åˆ›å»ºä¸€ä¸ªéšè—ç±»ã€‚è¿™ä¸ªéšè—ç±»ä¼šè®°å½•å¯¹è±¡çš„å½¢çŠ¶ï¼ŒåŒ…æ‹¬å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚å½“å±æ€§è¢«æ·»åŠ åˆ°å¯¹è±¡ä¸Šæ—¶ï¼Œå¼•æ“ä¼šæ£€æŸ¥è¯¥å±æ€§æ˜¯å¦å·²ç»å­˜åœ¨äºéšè—ç±»ä¸­ã€‚å¦‚æœå±æ€§ä¸å­˜åœ¨ï¼Œåˆ™éšè—ç±»ä¼šåŠ¨æ€åœ°æ›´æ–°å’Œæ‰©å±•ä»¥åŒ…æ‹¬æ–°çš„å±æ€§ã€‚ JavaScript å¼•æ“ä¼šæ ¹æ®éšè—ç±»çš„ç»“æ„ä¼˜åŒ–ä»£ç ã€‚é€šè¿‡éšè—ç±»ï¼Œå¼•æ“å¯ä»¥è½»æ¾åœ°ä¸ºå¯¹è±¡çš„å±æ€§åˆ†é…å†…å­˜ï¼Œå¹¶ä¸”åœ¨è®¿é—®æ—¶å¯ä»¥å¿«é€Ÿå®šä½å±æ€§çš„å†…å­˜åœ°å€ã€‚è¿™ç§ä¼˜åŒ–æŠ€æœ¯é¿å…äº†ä½¿ç”¨å­—å…¸æ¨¡å¼ï¼Œå³æ¯ä¸ªå¯¹è±¡éƒ½æœ‰è‡ªå·±çš„å±æ€§é›†ã€‚å±æ€§é›†è¿™ç§æ–¹å¼éœ€è¦ä½¿ç”¨å“ˆå¸Œè¡¨ï¼Œæ¯æ¬¡è®¿é—®å¯¹è±¡å±æ€§æ—¶éœ€è¦åœ¨å“ˆå¸Œè¡¨ä¸­è¿›è¡ŒæŸ¥æ‰¾ï¼Œå¯¼è‡´è¾ƒæ…¢çš„è®¿é—®é€Ÿåº¦ã€‚ å› æ­¤ï¼Œåœ¨å¼•æ“é¢„å…ˆç”Ÿæˆéšè—ç±»çš„åŸºç¡€ä¸Šï¼Œå°†åŒæ ·ç±»å‹çš„å±æ€§æ‰“åŒ…åœ¨éšè—ç±»ä¸­ï¼Œæ¯ä¸ªå±æ€§éƒ½å¯ä»¥ç›´æ¥æ˜ å°„åˆ°å†…å­˜åœ°å€ï¼Œé¿å…äº†å­—å…¸æ¨¡å¼çš„ä½¿ç”¨ï¼Œä»è€Œå®ç°äº†æ›´å¿«é€Ÿçš„è®¿é—®é€Ÿåº¦ã€‚</p><p>æ›´åº•å±‚çš„åŸç†æ˜¯ï¼ŒJavaScript å¼•æ“çš„å†…å­˜åˆ†é…å’Œè®¿é—®æ–¹å¼æ˜¯åŸºäºé¢„æµ‹çš„ã€‚å®ƒä¼šåœ¨è¿è¡Œæ—¶æ¨æ–­ä»£ç çš„æ•°æ®ç±»å‹å¹¶å°†å…¶ä¼˜åŒ–ä¸ºå¿«é€ŸæŒ‡é’ˆæ“ä½œã€‚ä½†æ˜¯ï¼Œå¦‚æœåœ¨æ„é€ å‡½æ•°ä¸­æ··ç”¨å±æ€§è®¿é—®å’Œèµ‹å€¼ï¼Œå°±ä¼šå¯¼è‡´è¯¥å¯¹è±¡è¿›å…¥å­—å…¸æ¨¡å¼ï¼Œå…·ä½“æ¥è¯´ï¼Œå½“å¯¹è±¡ä¸Šçš„å±æ€§è¢«è®¿é—®æ—¶ï¼ŒJavaScript å¼•æ“éœ€è¦é€šè¿‡å“ˆå¸Œè¡¨æ¥æŸ¥æ‰¾è¯¥å±æ€§ï¼Œè¿™ä¼šé€ æˆä¸€å®šçš„æ€§èƒ½æŸå¤±ã€‚è€Œå½“å¯¹è±¡ä¸Šçš„å±æ€§è¢«ä¿®æ”¹æ—¶ï¼Œå¯¹è±¡çš„å†…éƒ¨ç»“æ„ä¼šå˜åŒ–ï¼Œè¿™ä¼šå¯¼è‡´ JavaScript å¼•æ“é‡æ–°ç”Ÿæˆéšè—ç±»ï¼Œä»è€Œå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚ä¸è¿‡ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶æ··ç”¨å±æ€§è®¿é—®å’Œèµ‹å€¼ä¼šå¯¹æ€§èƒ½é€ æˆå½±å“ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€ JavaScript å¼•æ“å®Œå…¨æ”¾å¼ƒäº†å¯¹å¯¹è±¡çš„ä¼˜åŒ–ã€‚äº‹å®ä¸Šï¼ŒJavaScript å¼•æ“ä¼šå°½å¯èƒ½åœ°é€šè¿‡éšè—ç±»æ¥ä¼˜åŒ–å¯¹è±¡çš„è®¿é—®å’Œæ‰§è¡Œã€‚å½“å¯¹è±¡è¿›å…¥å­—å…¸æ¨¡å¼æ—¶ï¼ŒJavaScript å¼•æ“ä¼šé€€åŒ–ä¸ºæ›´è€çš„å†…å­˜ç®¡ç†å’Œæ‰§è¡Œæ¨¡å¼ï¼Œä½†ä»ç„¶ä¼šå°½åŠ›ä¼˜åŒ–å…¶ä»–å¯¹è±¡ä¸è¿›å…¥å­—å…¸æ¨¡å¼çš„æˆæœ¬ã€‚</p></blockquote><p>å› æ­¤ï¼Œè™½ç„¶æ··ç”¨å±æ€§è®¿é—®å’Œèµ‹å€¼ä¼šå¯¹å¯¹è±¡çš„æ€§èƒ½é€ æˆæŸå¤±ï¼Œä½† JavaScript å¼•æ“ä»ç„¶ä¼šå°è¯•è¿›è¡Œéšè—ç±»ä¼˜åŒ–ï¼Œä»¥æé«˜å¯¹è±¡çš„è®¿é—®å’Œæ‰§è¡Œæ•ˆç‡ã€‚</p><p>ä¸è¿‡ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶æ··ç”¨å±æ€§è®¿é—®å’Œèµ‹å€¼ä¼šå¯¹æ€§èƒ½é€ æˆå½±å“ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€ JavaScript å¼•æ“å®Œå…¨æ”¾å¼ƒäº†å¯¹å¯¹è±¡çš„ä¼˜åŒ–ã€‚äº‹å®ä¸Šï¼ŒJavaScript å¼•æ“ä¼šå°½å¯èƒ½åœ°é€šè¿‡éšè—ç±»æ¥ä¼˜åŒ–å¯¹è±¡çš„è®¿é—®å’Œæ‰§è¡Œã€‚å½“å¯¹è±¡è¿›å…¥å­—å…¸æ¨¡å¼æ—¶ï¼ŒJavaScript å¼•æ“ä¼šé€€åŒ–ä¸ºæ›´è€çš„å†…å­˜ç®¡ç†å’Œæ‰§è¡Œæ¨¡å¼ï¼Œä½†ä»ç„¶ä¼šå°½åŠ›ä¼˜åŒ–å…¶ä»–å¯¹è±¡ä¸è¿›å…¥å­—å…¸æ¨¡å¼çš„æˆæœ¬ã€‚</p><p>å› æ­¤ï¼Œè™½ç„¶æ··ç”¨å±æ€§è®¿é—®å’Œèµ‹å€¼ä¼šå¯¹å¯¹è±¡çš„æ€§èƒ½é€ æˆæŸå¤±ï¼Œä½† JavaScript å¼•æ“ä»ç„¶ä¼šå°è¯•è¿›è¡Œéšè—ç±»ä¼˜åŒ–ï¼Œä»¥æé«˜å¯¹è±¡çš„è®¿é—®å’Œæ‰§è¡Œæ•ˆç‡ã€‚</p><h3 id="from-æ„é€ å‡½æ•°" tabindex="-1"><code>from</code> æ„é€ å‡½æ•° <a class="header-anchor" href="#from-æ„é€ å‡½æ•°" aria-label="Permalink to &quot;\`from\` æ„é€ å‡½æ•°&quot;">â€‹</a></h3><p>ğŸ¨: æ„é€ å‡½æ•°åº”è¯¥å°†ç±»çš„åŸºæœ¬ç»„ä»¶ä½œä¸ºå‚æ•°ã€‚ä¾‹å¦‚ï¼Œ<code>Cartesian3</code>é‡‡ç”¨<code>x</code>ã€<code>y</code>å’Œ<code>z</code>ã€‚</p><p>ä»å…¶ä»–å‚æ•°æ„é€ å¯¹è±¡é€šå¸¸å¾ˆæ–¹ä¾¿ã€‚<strong>ç”±äº JavaScript æ²¡æœ‰å‡½æ•°é‡è½½</strong>ï¼ŒCesium ä½¿ç”¨ ä»¥ <code>from</code> ä¸ºå‰ç¼€çš„é™æ€å‡½æ•°ä»¥è¿™ç§æ–¹å¼æ„é€ å¯¹è±¡ã€‚ä¾‹å¦‚ï¼š</p><blockquote><p>ç”±äº JavaScript æ²¡æœ‰å‡½æ•°é‡è½½ï¼Œå‡½æ•°åç›¸åŒçš„å‡½æ•°åœ¨åŒä¸€ä½œç”¨åŸŸä¸‹åªèƒ½å®šä¹‰ä¸€æ¬¡ã€‚ä½†æ˜¯æœ‰æ—¶å€™éœ€è¦ä¸åŒçš„æ„é€ å‡½æ•°èƒ½å¤Ÿæ¥æ”¶ä¸åŒçš„å‚æ•°ã€‚å› æ­¤ï¼ŒCesium ä½¿ç”¨é™æ€å‡½æ•°å’Œ from å‰ç¼€æ¥è¡¨ç¤ºä¸åŒç±»å‹çš„æ„é€ å‡½æ•°ï¼Œå¹¶ä½¿ç”¨å‡½æ•°çš„å‚æ•°æ¥è¡¨ç¤ºä¸åŒçš„ç»„ä»¶ã€‚è¿™æ ·ï¼Œå³ä½¿å‡½æ•°åç›¸åŒï¼Œä¹Ÿèƒ½é€šè¿‡å‚æ•°ç±»å‹å’Œæ•°é‡çš„ä¸åŒæ¥åŒºåˆ†ä¸åŒçš„æ„é€ å‡½æ•°ã€‚è¿™æ ·ä¹Ÿä¸ºJS å¢åŠ äº†ä¸€éƒ¨åˆ†çš„å‡½æ•°é‡è½½åŠŸèƒ½ã€‚</p></blockquote><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> p </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Cartesian3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fromRadians</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">-</span><span style="color:#F78C6C;">2.007</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.645</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">// ä½¿ç”¨ç»åº¦å’Œçº¬åº¦æ„é€  Cartesian3 å¯¹è±¡</span></span></code></pre></div><p>è¿™äº›æ˜¯ä½¿ç”¨å¯é€‰çš„ <code>result</code> å‚æ•°å®ç°çš„ï¼Œå®ƒå…è®¸è°ƒç”¨è€…ä¼ å…¥ä¸´æ—¶å˜é‡ï¼š</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">Cartesian3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fromRadians</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">longitude</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">latitude</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">height</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;font-style:italic;">result</span><span style="color:#A6ACCD;">ï¼‰ </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ä½¿ç”¨ç»åº¦ã€çº¬åº¦ã€é«˜åº¦è®¡ç®— xã€yã€z </span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#A6ACCD;font-style:italic;">if</span><span style="color:#A6ACCD;"> (!</span><span style="color:#A6ACCD;font-style:italic;">defined</span><span style="color:#A6ACCD;">(</span><span style="color:#A6ACCD;font-style:italic;">result</span><span style="color:#A6ACCD;">)) </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#A6ACCD;font-style:italic;">result</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Cartesian3</span><span style="color:#A6ACCD;">(); </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#A6ACCD;font-style:italic;">result</span><span style="color:#A6ACCD;">.</span><span style="color:#A6ACCD;font-style:italic;">x</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> x; </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#A6ACCD;font-style:italic;">result</span><span style="color:#A6ACCD;">.</span><span style="color:#A6ACCD;font-style:italic;">y</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> y; </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#A6ACCD;font-style:italic;">result</span><span style="color:#A6ACCD;">.</span><span style="color:#A6ACCD;font-style:italic;">z</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> z; </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#A6ACCD;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">result</span><span style="color:#A6ACCD;">ï¼›</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">;</span></span></code></pre></div><p>ç”±äºè°ƒç”¨ <code>from</code> æ„é€ å‡½æ•°ä¸éœ€è¦ç°æœ‰å¯¹è±¡ï¼Œå› æ­¤è¯¥å‡½æ•°è¢«åˆ†é…ç»™ <code>Cartesian3.fromRadians</code>ï¼Œè€Œä¸æ˜¯ <code>Cartesian3.prototype.fromRadians</code>ã€‚</p><h3 id="to-å‡½æ•°" tabindex="-1"><code>to</code> å‡½æ•° <a class="header-anchor" href="#to-å‡½æ•°" aria-label="Permalink to &quot;\`to\` å‡½æ•°&quot;">â€‹</a></h3><p>ä»¥ <code>to</code> å¼€å¤´çš„å‡½æ•°è¿”å›ä¸€ç§æ–°ç±»å‹çš„å¯¹è±¡ï¼Œä¾‹å¦‚</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">Cartesian3</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toString</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">(\${this.x}, \${this .y}, \${this.z})</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre></div><h3 id="å¯¹åŸºç¡€ç±»è°¨æ…ä½¿ç”¨åŸå‹å‡½æ•°" tabindex="-1">å¯¹åŸºç¡€ç±»è°¨æ…ä½¿ç”¨åŸå‹å‡½æ•° <a class="header-anchor" href="#å¯¹åŸºç¡€ç±»è°¨æ…ä½¿ç”¨åŸå‹å‡½æ•°" aria-label="Permalink to &quot;å¯¹åŸºç¡€ç±»è°¨æ…ä½¿ç”¨åŸå‹å‡½æ•°&quot;">â€‹</a></h3><p>ğŸ¨: è¯¸å¦‚<code>Cartesian3</code>ã€<code>Quaternion</code>ã€<code>Matrix4</code> å’Œ<code>JulianDate</code> ä¹‹ç±»çš„åŸºç¡€æ•°å­¦ç±»å¾ˆå°‘ä½¿ç”¨åŸå‹å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œ<code>Cartesian3</code> æ²¡æœ‰åƒè¿™æ ·çš„åŸå‹ <code>add</code> å‡½æ•°ï¼š</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> v2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> v0</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#A6ACCD;">(v1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> result)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><p>ç›¸åï¼Œå®ƒè¢«å†™æˆ</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> v2 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Cartesian3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add</span><span style="color:#A6ACCD;">(v0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> v1</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> result)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><p>å”¯ä¸€çš„ä¾‹å¤–æ˜¯</p><ul><li><code>clone</code></li><li><code>equals</code></li><li><code>equalsEpsilon</code></li><li><code>toString</code></li></ul><p>è¿™äº›åŸå‹å‡½æ•°é€šå¸¸å§”æ‰˜ç»™éåŸå‹ï¼ˆé™æ€ï¼‰ç‰ˆæœ¬ï¼ˆåŸå‹ç‰ˆæœ¬çš„å¥½å¤„æ˜¯å¯ä»¥å¤šæ€ä½¿ç”¨ï¼‰ï¼Œä¾‹å¦‚ï¼Œ</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">Cartesian3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equals</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">left</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">right</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> (</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">left</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">right</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span></span>
<span class="line"><span style="color:#F07178;">    (</span><span style="color:#82AAFF;">defined</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">left</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">&amp;&amp;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#82AAFF;">defined</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">right</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">&amp;&amp;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">left</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">right</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">left</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">right</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">left</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">z</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">right</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">z</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">  )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Cartesian3</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equals</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">right</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Cartesian3</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equals</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">right</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre></div><h3 id="é™æ€å¸¸é‡" tabindex="-1">é™æ€å¸¸é‡ <a class="header-anchor" href="#é™æ€å¸¸é‡" aria-label="Permalink to &quot;é™æ€å¸¸é‡&quot;">â€‹</a></h3><p>è¦åˆ›å»ºä¸ç±»ç›¸å…³çš„é™æ€å¸¸é‡ï¼Œè¯·ä½¿ç”¨ <code>Object.freeze</code>ï¼š</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">Cartesian3</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ZERO </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">freeze</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Cartesian3</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0.0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.0</span><span style="color:#A6ACCD;">))</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h3 id="ç§æœ‰å‡½æ•°" tabindex="-1">ç§æœ‰å‡½æ•° <a class="header-anchor" href="#ç§æœ‰å‡½æ•°" aria-label="Permalink to &quot;ç§æœ‰å‡½æ•°&quot;">â€‹</a></h3><p>ä¸ç§æœ‰å±æ€§ä¸€æ ·ï¼Œç§æœ‰å‡½æ•°ä»¥ _ å¼€å¤´ã€‚å®é™…ä¸Šï¼Œè¿™äº›å¾ˆå°‘ä½¿ç”¨ã€‚ç›¸åï¼Œä¸ºäº†æ›´å¥½çš„å°è£…ï¼Œé€šå¸¸ä¼šä½¿ç”¨ä¸€ä¸ªæ–‡ä»¶èŒƒå›´çš„å‡½æ•°ï¼Œå¹¶å°† this ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’è¿›å»ã€‚ä¾‹å¦‚ï¼Œ</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">Cesium3DTileset</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">update</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">frameState</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">_processTiles</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">frameState</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// ... </span></span>
<span class="line"><span style="color:#89DDFF;">};</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Cesium3DTileset</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">_processTiles</span><span style="color:#A6ACCD;">(tileset</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> frameState) </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">tiles</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_processingQueue</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">tiles</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#F07178;"> (</span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">tiles</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">process</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">tileset</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">frameState</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//æœ€å¥½å†™æˆ</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Cesium3DTileset</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">update</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">frameState</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">processTiles</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">frameState</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ... </span></span>
<span class="line"><span style="color:#89DDFF;">};</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">processTiles</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">tileset</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">frameState</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">tiles</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">tileset</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">_processingQueue</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">tiles</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">length</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#F07178;"> (</span><span style="color:#C792EA;">let</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">length</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">--</span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">tiles</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">i</span><span style="color:#F07178;">]</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">process</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">tileset</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">frameState</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><h3 id="å±æ€§çš„getter-setters" tabindex="-1">å±æ€§çš„Getter/Setters <a class="header-anchor" href="#å±æ€§çš„getter-setters" aria-label="Permalink to &quot;å±æ€§çš„Getter/Setters&quot;">â€‹</a></h3><p>æ— éœ€é¢å¤–å¤„ç†å³å¯è¯»å–æˆ–å†™å…¥çš„å…¬å…±å±æ€§å¯ä»¥ç®€å•åœ°åœ¨æ„é€ å‡½æ•°ä¸­èµ‹å€¼ï¼Œä¾‹å¦‚ï¼Œ</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Model</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">options</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">show</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">defaultValue</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">show</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>å¯ä»¥ä½¿ç”¨ <code>Object.defineProperties</code> å‡½æ•°ä½¿ç”¨<strong>ç§æœ‰å±æ€§</strong>å’Œ getter åˆ›å»ºåªè¯»å±æ€§ï¼Œä¾‹å¦‚ï¼Œ</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Cesium3DTileset</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">options</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_url</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">url</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">defineProperties</span><span style="color:#A6ACCD;">(</span><span style="color:#FFCB6B;">Cesium3DTileset</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">url</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_url</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><p>Getters å¯ä»¥æ‰§è¡Œä»»ä½•éœ€è¦çš„è®¡ç®—æ¥è¿”å›å±æ€§ï¼Œä½†æ€§èƒ½æœŸæœ›æ˜¯å®ƒä»¬æ‰§è¡Œå¾—å¾ˆå¿«ã€‚ Setters è¿˜å¯ä»¥åœ¨åˆ†é…ç»™ç§æœ‰å±æ€§ä¹‹å‰æ‰§è¡Œè®¡ç®—ï¼Œè®¾ç½®æ ‡å¿—ä»¥å»¶è¿Ÿè®¡ç®—ï¼Œæˆ–ä¸¤è€…å…¼è€Œæœ‰ä¹‹ï¼Œä¾‹å¦‚ï¼š</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">Object</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">defineProperties</span><span style="color:#A6ACCD;">(</span><span style="color:#FFCB6B;">UniformState</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">viewport</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_viewport</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">set</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">viewport</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">BoundingRectangle</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equals</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">viewport</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_viewport</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">BoundingRectangle</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">clone</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">viewport</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_viewport</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">v</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_viewport</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">vc</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_viewportCartesian4</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">vc</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">x</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">v</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">vc</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">y</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">v</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">y</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">vc</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">z</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">v</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">width</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#A6ACCD;">vc</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">w</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">v</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">height</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_viewportDirty</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><ul><li>ğŸš¤: è°ƒç”¨ getter/setter å‡½æ•°æ¯”ç›´æ¥è®¿é—®å±æ€§è¦æ…¢ï¼Œå› æ­¤ç±»å†…éƒ¨çš„å‡½æ•°å¯ä»¥åœ¨é€‚å½“çš„æ—¶å€™ç›´æ¥ä½¿ç”¨ç§æœ‰å±æ€§ã€‚</li></ul><h3 id="ç§æœ‰é˜´å½±å±æ€§" tabindex="-1">ç§æœ‰é˜´å½±å±æ€§ <a class="header-anchor" href="#ç§æœ‰é˜´å½±å±æ€§" aria-label="Permalink to &quot;ç§æœ‰é˜´å½±å±æ€§&quot;">â€‹</a></h3><blockquote><p>å½“æˆ‘ä»¬éœ€è¦é¢‘ç¹åœ°è·å–å’Œè®¾ç½®å¯¹è±¡å±æ€§æ—¶ï¼Œä½¿ç”¨getter/setterå‡½æ•°å¯èƒ½ä¼šå¯¼è‡´ä»£ç æ€§èƒ½ä¸‹é™ï¼Œå› ä¸ºgetter/setterå‡½æ•°éœ€è¦åŠ¨æ€åœ°æ‰§è¡Œä¸€äº›ä»£ç æ‰èƒ½å®Œæˆå±æ€§çš„è·å–å’Œè®¾ç½®ï¼Œå¹¶ä¸”æ¯æ¬¡è°ƒç”¨éƒ½éœ€è¦æ‰§è¡Œè¿™äº›ä»£ç ã€‚æ­¤æ—¶ï¼Œç›´æ¥æš´éœ²å±æ€§å¯èƒ½ä¼šæ›´æœ‰æ•ˆç‡ã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥æš´éœ²å¯¹è±¡çš„å¼•ç”¨ç±»å‹å±æ€§ï¼Œå…¶ä»–ä»£ç å¯èƒ½ä¼šç›´æ¥ä¿®æ”¹è¿™äº›å€¼ï¼Œå°†å…¶ç¯¡æ”¹ï¼Œä»è€Œç ´åäº†å¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å°†å…¬å…±å±æ€§å’Œç§æœ‰é˜´å½±å±æ€§ç»“åˆèµ·æ¥çš„æ–¹å¼ï¼Œå®ç°å¯¹å±æ€§çš„æ›´å¥½ä¿æŠ¤å’Œæ§åˆ¶ã€‚æˆ‘ä»¬å¯ä»¥æš´éœ²å…¬å…±å±æ€§ç”¨äºè¯»å–å’Œå†™å…¥ï¼ŒåŒæ—¶åœ¨å†…éƒ¨ä½¿ç”¨ç§æœ‰é˜´å½±å±æ€§ä¿å­˜å±æ€§å€¼ï¼Œåœ¨å¿…è¦çš„æ—¶å€™åˆ¤æ–­ç§æœ‰é˜´å½±å±æ€§å€¼æ˜¯å¦å‘ç”Ÿæ”¹å˜ï¼Œé¿å…å…¶ä»–ä»£ç ç›´æ¥ç¯¡æ”¹å±æ€§å€¼é€ æˆæŸå®³ã€‚è¿™ç§æ–¹å¼å¯ä»¥åœ¨æé«˜ä»£ç å®‰å…¨æ€§å’Œå¯ç»´æŠ¤æ€§çš„å‰æä¸‹ï¼Œå‡å°‘æ€§èƒ½å¼€é”€ã€‚</p></blockquote><p>ä¾‹å¦‚ï¼š</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Model</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">options</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">modelMatrix</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Matrix4</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">clone</span><span style="color:#F07178;">( </span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">defaultValue</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">modelMatrix</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Matrix4</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">IDENTITY</span><span style="color:#F07178;">) </span></span>
<span class="line"><span style="color:#F07178;">  )</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_modelMatrix</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Matrix4</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">clone</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">modelMatrix</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">//å…‹éš†ä»¥åˆ‡æ–­å¼•ç”¨</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Model</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">update</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">frameState</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">!</span><span style="color:#A6ACCD;">Matrix4</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">equals</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_modelMatrix</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">modelMatrix</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//åˆ‡æ–­å¼•ç”¨åçš„åŒæ­¥æ–¹å¼ï¼šå¤–éƒ¨çŸ©é˜µæœ‰å˜åŒ–æ‰æ›´æ–°å†…éƒ¨çŸ©é˜µ</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// clone() æ˜¯æ·±æ‹·è´ã€‚ä¸æ˜¯ this._modelMatrix = this._modelMatrix </span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">Matrix4</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">clone</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">modelMatrix</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_modelMatrix</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;">  </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// æ‰§è¡Œæ¨¡å‹çŸ©é˜µå˜åŒ–æ—¶éœ€è¦å‘ç”Ÿçš„ç¼“æ…¢æ“ä½œ</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre></div><h3 id="å°†æ„é€ å‡½æ•°æ”¾åœ¨æ–‡ä»¶é¡¶éƒ¨" tabindex="-1">å°†æ„é€ å‡½æ•°æ”¾åœ¨æ–‡ä»¶é¡¶éƒ¨ <a class="header-anchor" href="#å°†æ„é€ å‡½æ•°æ”¾åœ¨æ–‡ä»¶é¡¶éƒ¨" aria-label="Permalink to &quot;å°†æ„é€ å‡½æ•°æ”¾åœ¨æ–‡ä»¶é¡¶éƒ¨&quot;">â€‹</a></h3><p>å³ä½¿éœ€è¦è¾…åŠ©å‡½æ•°ä¾èµ–<strong>æå‡</strong>ï¼Œæ„é€ å‡½æ•°æ”¾åœ¨æ–‡ä»¶é¡¶éƒ¨ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œä¾‹å¦‚ï¼Œ<code> Cesium3DTileset.js</code>,</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">loadTileset</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">tileset</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">tilesJson</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">done</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ... </span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Cesium3DTileset</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">options</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ...</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">loadTileset</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">url</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">data</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// ... </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><p>æœ€å¥½å†™æˆ</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Cesium3DTileset</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">options</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ... </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">loadTileset</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">options</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">url</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">function</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">data</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// ... </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">loadTileset</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">tileset</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">tilesJson</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">done</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ... </span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><p>å®ƒä¾èµ–äºå‡½æ•°éšå¼å°† <code>loadTileset</code> æå‡åˆ°æ–‡ä»¶é¡¶éƒ¨ã€‚</p><h2 id="è®¾è®¡" tabindex="-1">è®¾è®¡ <a class="header-anchor" href="#è®¾è®¡" aria-label="Permalink to &quot;è®¾è®¡&quot;">â€‹</a></h2><ul><li>ğŸ : åªæœ‰å½“å®ƒå¯èƒ½å¯¹æœ€ç»ˆç”¨æˆ·æœ‰ç”¨æ—¶ï¼Œæ‰å°†ç±»æˆ–å‡½æ•°ä½œä¸º Cesium API çš„ä¸€éƒ¨åˆ†ï¼›é¿å…å°†å®ç°ç»†èŠ‚ä½œä¸ºå…¬å…± API çš„ä¸€éƒ¨åˆ†ã€‚å½“æŸäº›ä¸œè¥¿æ˜¯å…¬å¼€çš„æ—¶ï¼Œå®ƒä¼šä½¿ Cesium API å˜å¾—æ›´å¤§ï¼Œæ›´éš¾å­¦ä¹ ï¼Œä»¥åæ›´éš¾æ›´æ”¹ï¼Œå¹¶ä¸”éœ€è¦æ›´å¤šçš„æ–‡æ¡£å·¥ä½œã€‚</li><li>ğŸ¨: å°†æ–°ç±»å’Œå‡½æ•°æ”¾åœ¨ Cesium å †æ ˆï¼ˆç›®å½•<code>Source/XXX</code> ï¼‰çš„å³ä¾§éƒ¨åˆ†ã€‚ä»ä¸‹å¾€ä¸Šï¼š <img src="https://raw.githubusercontent.com/CHENJIAMIAN/Blog/master/image/16825068650006j94b4.png" alt="gh"><ul><li><code>Source/Core</code> - æ•°å­—è¿ç®—ã€‚çº¯æ•°å­¦ï¼Œä¾‹å¦‚ <a href="https://github.com/CesiumGS/cesium/blob/main/Source/Core/Cartesian3.js" target="_blank" rel="noreferrer"><code>Cartesian3</code></a>ã€‚çº¯å‡ ä½•ä½“ï¼Œä¾‹å¦‚ <a href="https://github.com/CesiumGS/cesium/blob/main/Source/Core/CylinderGeometry.js" target="_blank" rel="noreferrer"><code>CylinderGeometry</code></a>ã€‚åŸºæœ¬ç®—æ³•ï¼Œä¾‹å¦‚ <a href="https://github.com/CesiumGS/cesium/blob/main/Source/Core/mergeSort.js" target="_blank" rel="noreferrer"><code>mergeSort</code></a>ã€‚è¯·æ±‚è¾…åŠ©å‡½æ•°ï¼Œä¾‹å¦‚ <a href="https://github.com/CesiumGS/cesium/blob/main/Source/Core/loadArrayBuffer.js" target="_blank" rel="noreferrer"><code>loadArrayBuffer</code></a>ã€‚</li><li><code>Source/Renderer</code> - WebGL æŠ½è±¡ï¼Œä¾‹å¦‚ <a href="https://github.com/CesiumGS/cesium/blob/main/Source/Renderer/ShaderProgram.js" target="_blank" rel="noreferrer"><code>ShaderProgram</code></a> å’Œç‰¹å®šäº WebGL çš„å®ç”¨ç¨‹åºï¼Œä¾‹å¦‚ <a href="https://github.com/CesiumGS/cesium/blob/main/Source/Renderer/ShaderCache.js" target="_blank" rel="noreferrer"><code> ShaderCache</code></a>ã€‚æ­¤ç›®å½•ä¸­çš„æ ‡è¯†ç¬¦ä¸æ˜¯å…¬å…± Cesium API çš„ä¸€éƒ¨åˆ†ã€‚</li><li><code>Source/Scene</code> - å›¾å½¢å¼•æ“ï¼ŒåŒ…æ‹¬ <a href="https://github.com/CesiumGS/cesium/blob/main/Source/Scene/Model.js" target="_blank" rel="noreferrer">Model</a> ç­‰ <code>primitive</code>ã€‚æ­¤ç›®å½•ä¸­çš„ä»£ç é€šå¸¸ä¾èµ–äº <code>Renderer</code>ã€‚</li><li><code>Source/DataSources</code> - å®ä½“APIï¼Œä¾‹å¦‚<a href="https://github.com/CesiumGS/cesium/blob/main/Source/DataSources/Entity.js" target="_blank" rel="noreferrer"><code>Entity</code></a>ï¼Œä»¥åŠæ•°æ®æºï¼Œä¾‹å¦‚<a href="https://github.com/CesiumGS/cesium/blob/main/Source/DataSources/CzmlDataSource.js" target="_blank" rel="noreferrer"><code> CzmlDataSource</code></a>ã€‚</li><li><code>Source/Widgets</code> - ä¸»è¦çš„ Cesium <a href="https://github.com/CesiumGS/cesium/blob/main/Source/Widgets/Viewer/Viewer.js" target="_blank" rel="noreferrer"><code>Viewer</code></a> ç­‰å°éƒ¨ä»¶ã€‚</li></ul></li></ul><p>æ–‡ä»¶å±äºå“ªä¸ªç›®å½•é€šå¸¸å¾ˆæ˜æ˜¾ã€‚å¦‚æœä¸æ˜¯ï¼Œåˆ™é€šå¸¸åœ¨ <code>Core</code> å’Œå¦ä¸€ä¸ªç›®å½•ä¹‹é—´åšå‡ºå†³å®šã€‚å¦‚æœå®ƒæ˜¯çº¯æ•°å­—è¿ç®—æˆ–é¢„è®¡å¯¹ Cesium é€šå¸¸æœ‰ç”¨çš„å®ç”¨ç¨‹åºï¼Œè¯·å°†æ–‡ä»¶æ”¾åœ¨ Core ä¸­ï¼Œä¾‹å¦‚ <a href="https://github.com/CesiumGS/cesium/blob/main/Source/Core/Matrix4.js" target="_blank" rel="noreferrer"><code>Matrix4</code></a> å±äº <code>Core</code>ï¼Œå› ä¸º Cesium å †æ ˆçš„è®¸å¤šéƒ¨åˆ†éƒ½ä½¿ç”¨ 4x4 çŸ©é˜µï¼›å¦ä¸€æ–¹é¢ï¼Œ<a href="https://github.com/CesiumGS/cesium/blob/main/Source/DataSources/BoundingSphereState.js" target="_blank" rel="noreferrer"><code>BoundingSphereState</code></a> åœ¨ <code>DataSources</code> ä¸­ï¼Œå› ä¸ºå®ƒç‰¹å®šäºæ•°æ®æºã€‚ <img src="https://raw.fastgit.org/CesiumGS/cesium/main/Documentation/Contributors/CodingGuide/1.jpg" alt="CesiumJS Design"></p><p>æ¨¡å—ï¼ˆæ–‡ä»¶ï¼‰åº”è¯¥åªå¼•ç”¨å †æ ˆä¸­åŒä¸€çº§åˆ«æˆ–è¾ƒä½çº§åˆ«çš„æ¨¡å—ã€‚ä¾‹å¦‚ï¼Œ<code>Scene</code> ä¸­çš„æ¨¡å—å¯ä»¥ä½¿ç”¨<code>Scene</code>ã€<code>Renderer</code> å’Œ<code>Core</code> ä¸­çš„æ¨¡å—ï¼Œä½†ä¸èƒ½ä½¿ç”¨<code>DataSources</code> æˆ–<code>Widgets</code> ä¸­çš„æ¨¡å—ã€‚</p><ul><li>WebGLèµ„æºéœ€è¦æ˜¾å¼åˆ é™¤ï¼Œå› æ­¤åŒ…å«å®ƒä»¬çš„ç±»ï¼ˆä»¥åŠåŒ…å«è¿™äº›ç±»çš„ç±»ç­‰ç­‰ï¼‰éƒ½å¿…é¡»å…·æœ‰ <code>destroy</code> å’Œ <code>isDestroyed</code> å‡½æ•°ï¼Œä¾‹å¦‚æµ‹è¯•ç”¨ä¾‹å¦‚ä¸‹ï¼š</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> primitive </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Primitive</span><span style="color:#A6ACCD;">(</span><span style="color:#676E95;font-style:italic;">/* ... */</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">expect</span><span style="color:#A6ACCD;">(content</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">isDestroyed</span><span style="color:#A6ACCD;">())</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toEqual</span><span style="color:#A6ACCD;">(</span><span style="color:#FF9CAC;">false</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">primitive</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">destroy</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#82AAFF;">expect</span><span style="color:#A6ACCD;">(content</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">isDestroyed</span><span style="color:#A6ACCD;">())</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">toEqual</span><span style="color:#A6ACCD;">(</span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span></code></pre></div><p><code>destroy</code> å‡½æ•°ç”¨ Cesium çš„ <code>destroyObject</code> å‡½æ•°å®ç°é˜²æ­¢äºŒæ¬¡é”€æ¯ï¼Œä¾‹å¦‚ï¼Œ</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">SkyBox</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">destroy</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_vertexArray</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_vertexArray</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_vertexArray</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">destroy</span><span style="color:#F07178;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">destroyObject</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">this</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;">//å†æ¬¡è°ƒç”¨æ—¶ï¼Œå¦‚æœå·²ç»é”€æ¯ï¼Œåˆ™æŠ¥é”™&quot;This object was destroyed, i.e., destroy() was called.&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre></div><ul><li>ä»…<code>é”€æ¯</code>æ‚¨åˆ›å»ºçš„å¯¹è±¡ï¼›èµ‹äºˆç±»çš„å¤–éƒ¨å¯¹è±¡åº”è¯¥ç”±å®ƒä»¬çš„æ‰€æœ‰è€…è€Œä¸æ˜¯è¯¥ç±»æ¥é”€æ¯ã€‚</li></ul><h3 id="å¼ƒç”¨å’Œé‡å¤§æ›´æ”¹" tabindex="-1">å¼ƒç”¨å’Œé‡å¤§æ›´æ”¹ <a class="header-anchor" href="#å¼ƒç”¨å’Œé‡å¤§æ›´æ”¹" aria-label="Permalink to &quot;å¼ƒç”¨å’Œé‡å¤§æ›´æ”¹&quot;">â€‹</a></h3><p>ä»å‘å¸ƒåˆ°å‘å¸ƒï¼Œæˆ‘ä»¬åŠªåŠ›ä¿æŒå…¬å…± Cesium API ç¨³å®šï¼ŒåŒæ—¶ä¿æŒå¯è¿ç§»æ€§ä»¥å¿«é€Ÿå¼€å‘å¹¶ä½¿ API æœç€æ­£ç¡®çš„æ–¹å‘å‘å±•ã€‚å› æ­¤ï¼Œæˆ‘ä»¬è°¨æ…åœ°å¼ƒç”¨ç„¶ååˆ é™¤æˆ–æ›¿æ¢éƒ¨åˆ†å…¬å…± APIã€‚</p><p><code>@private</code> API è¢«è®¤ä¸ºæ˜¯ Cesium çš„å®ç°ç»†èŠ‚ï¼Œå¯ä»¥åœ¨ä¸å¼ƒç”¨çš„æƒ…å†µä¸‹ç«‹å³è¢«ç ´åã€‚</p><blockquote><p>â€œç«‹å³ä¸­æ–­â€æ˜¯æŒ‡å…³é—­æˆ–åˆ é™¤ä¸€ä¸ªåŠŸèƒ½æˆ–APIï¼Œä¸å†æ”¯æŒå…¶ä½¿ç”¨ï¼Œè€Œä¸æä¾›å‡çº§è¿ç§»å’Œæ›¿ä»£æ–¹æ¡ˆã€‚è¿™æ„å‘³ç€å¦‚æœä»£ç ä¸­ä½¿ç”¨äº†å·²ç»è¢«ç«‹å³ä¸­æ–­çš„APIï¼Œä»£ç å°†ä¸å†èƒ½å¤Ÿæ­£å¸¸å·¥ä½œï¼Œå¼€å‘è€…éœ€è¦ç«‹å³åšå‡ºç›¸åº”çš„ä¿®æ”¹æ¥è§£å†³é—®é¢˜ã€‚</p></blockquote><p><code>@experimental</code> API åœ¨æœªæ¥çš„ Cesium ç‰ˆæœ¬ä¸­å¯èƒ½ä¼šå‘ç”Ÿé‡å¤§å˜åŒ–ï¼Œä½†ä¸ä¼šå¼ƒç”¨ã€‚å®ƒå…è®¸æ–°çš„å®éªŒæ€§åŠŸèƒ½ï¼Œä¾‹å¦‚å®æ–½è‰ç¨¿æ ¼å¼ã€‚</p><p>å…¬å…±æ ‡è¯†ç¬¦ï¼ˆç±»ã€å‡½æ•°ã€å±æ€§ï¼‰åœ¨è¢«åˆ é™¤ä¹‹å‰åº”è¯¥è¢«å¼ƒç”¨ã€‚ä¸ºæ­¤ï¼š</p><ul><li>å†³å®šåº”åœ¨é‚£ä¸ªæœªæ¥ç‰ˆæœ¬çš„åˆ é™¤å·²å¼ƒç”¨ API ã€‚è¿™æ˜¯è§†å…·ä½“æƒ…å†µè€Œå®šçš„ï¼Œå…·ä½“å–å†³äºå®ƒå¯¹ç”¨æˆ·å’Œ Cesium å¼€å‘çš„å½±å“æœ‰å¤šä¸¥é‡ã€‚å¤§å¤šæ•°å¼ƒç”¨çš„ API å°†åœ¨ 1-3 ä¸ªç‰ˆæœ¬ä¸­åˆ é™¤ã€‚å¦‚æœéœ€è¦ï¼Œå¯ä»¥åœ¨æ‹‰å–è¯·æ±‚ä¸­å¯¹æ­¤è¿›è¡Œè®¨è®ºã€‚</li><li>ä½¿ç”¨ <a href="https://github.com/CesiumGS/cesium/blob/main/Source/Core/deprecationWarning.js" target="_blank" rel="noreferrer"><code>deprecationWarning</code></a> è­¦å‘Šç”¨æˆ· API å·²å¼ƒç”¨ä»¥åŠä»–ä»¬å¯ä»¥é‡‡å–å“ªäº›ä¸»åŠ¨æ›´æ”¹ï¼Œä¾‹å¦‚ï¼Œ</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Foo</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#82AAFF;">deprecationWarning</span><span style="color:#F07178;">( </span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Foo</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Foo åœ¨ CesiumJS 1.01 ä¸­å·²å¼ƒç”¨ã€‚å®ƒå°†åœ¨ 1.03 ä¸­åˆ é™¤ã€‚è¯·æ”¹ç”¨ newFooã€‚</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#F07178;">  )</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">// ... </span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre></div><ul><li>æ·»åŠ  <a href="http://usejsdoc.org/tags-deprecated.html" target="_blank" rel="noreferrer"><code>@deprecated</code></a> æ–‡æ¡£æ ‡ç­¾ã€‚</li><li>é™¤äº†ä¸“é—¨æµ‹è¯•å·²å¼ƒç”¨ API çš„å•å…ƒæµ‹è¯•å¤–ï¼Œåˆ é™¤ Cesium ä¸­æ‰€æœ‰å·²å¼ƒç”¨ API çš„ä½¿ç”¨ã€‚</li><li>åœ¨ <a href="https://github.com/CesiumGS/cesium/blob/main/CHANGES.md" target="_blank" rel="noreferrer"><code>CHANGES.md</code></a> çš„<code>Deprecated</code> éƒ¨åˆ†æåŠå¼ƒç”¨ã€‚åŒ…æ‹¬å®ƒå°†è¢«åˆ é™¤çš„ Cesium ç‰ˆæœ¬ã€‚</li><li>åˆ›å»ºä¸€ä¸ª<a href="https://github.com/CesiumGS/cesium/issues" target="_blank" rel="noreferrer">é—®é¢˜</a>ï¼Œæ ‡è®°<code>remove in [version]</code>æ ‡ç­¾æ¥åˆ é™¤ APIã€‚</li><li>åˆ é™¤ API åï¼Œåœ¨ <a href="https://github.com/CesiumGS/cesium/blob/main/CHANGES.md" target="_blank" rel="noreferrer"><code>CHANGES.md</code></a> çš„<code>Breaking Changes</code> éƒ¨åˆ†æ·»åŠ å¯¹å®ƒçš„æåŠã€‚</li></ul><h2 id="ç¬¬ä¸‰æ–¹åº“" tabindex="-1">ç¬¬ä¸‰æ–¹åº“ <a class="header-anchor" href="#ç¬¬ä¸‰æ–¹åº“" aria-label="Permalink to &quot;ç¬¬ä¸‰æ–¹åº“&quot;">â€‹</a></h2><p>ğŸ : Cesium å¾ˆå°‘ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“ã€‚å¦‚æœä½ æƒ³æ·»åŠ ä¸€ä¸ªæ–°çš„ï¼Œè¯·åœ¨<a href="https://community.cesium.com/" target="_blank" rel="noreferrer">Cesiumç¤¾åŒºè®ºå›</a>ä¸Šå‘å¸–(<a href="https://community.cesium.com/t/%E6%88%91%E4%BB%AC%E5%96%9C%E6%AC%A2%E4%BD%BF%E7%94%A8%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93/745" target="_blank" rel="noreferrer">ç¤ºä¾‹è®¨è®º</a>)ã€‚è¯¥åº“åº”è¯¥</p><ul><li>å…·æœ‰å…¼å®¹çš„è®¸å¯è¯ï¼Œä¾‹å¦‚ MITã€BSD æˆ– Apache 2.0ã€‚</li><li>æä¾› Cesium çœŸæ­£éœ€è¦ä¸”å›¢é˜Ÿæ²¡æœ‰æ—¶é—´å’Œ/æˆ–ä¸“ä¸šçŸ¥è¯†æ¥å¼€å‘çš„åŠŸèƒ½ã€‚</li><li>è½»é‡çº§ã€ç»è¿‡æµ‹è¯•ã€ç»´æŠ¤å¹¶åˆç†å¹¿æ³›ä½¿ç”¨ã€‚</li><li>ä¸æ±¡æŸ“å…¨å±€å‘½åç©ºé—´ã€‚</li><li>æä¾›è¶³å¤Ÿçš„ä»·å€¼æ¥è¯æ˜æ·»åŠ éœ€è¦ç»´æŠ¤é›†æˆçš„ç¬¬ä¸‰æ–¹åº“æ˜¯åˆç†çš„ï¼Œä½†æ˜¯ï¼Œæ·»åŠ ç¬¬ä¸‰æ–¹åº“å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›ç”¨æˆ·ä¼šå¯¹ Cesium äº§ç”Ÿç–‘è™‘ï¼ˆå› ä¸ºä½¿ç”¨ç¬¬ä¸‰æ–¹åº“éœ€è¦é¢å¤–çš„ç»´æŠ¤å·¥ä½œï¼‰</li></ul><p>æ·»åŠ æˆ–æ›´æ–°ç¬¬ä¸‰æ–¹åº“æ—¶ï¼š</p><ul><li>ç¡®ä¿ <a href="https://github.com/CesiumGS/cesium/blob/main//LICENSE.md" target="_blank" rel="noreferrer">LICENSE.md</a> æ›´æ–°ä¸ºåº“çš„åç§°å’Œå®Œæ•´çš„ç‰ˆæƒå£°æ˜ã€‚</li><li>å¦‚æœä¸€ä¸ªåº“ä½œä¸º CesiumJS ç‰ˆæœ¬çš„ä¸€éƒ¨åˆ†å‘å¸ƒï¼Œå®ƒåº”è¯¥åŒ…å«åœ¨ç”Ÿæˆçš„ <a href="https://github.com/CesiumGS/cesium/blob/main//ThirdParty.json" target="_blank" rel="noreferrer"><code>ThirdParty.json</code></a> ä¸­ã€‚ <ol><li>ä½¿ç”¨åŒ… name æ›´æ–° <a href="https://github.com/CesiumGS/cesium/blob/main//ThirdParty.extra.json" target="_blank" rel="noreferrer"><code>ThirdParty.extra.json</code></a>ã€‚å¦‚æœå®ƒæ˜¯ <a href="https://github.com/CesiumGS/cesium/blob/main//package.json" target="_blank" rel="noreferrer"><code>package.json</code></a> ä¸­åŒ…å«çš„ npm æ¨¡å—ï¼Œè¯·ä½¿ç”¨ç¡®åˆ‡çš„åŒ…åç§°ã€‚</li><li>å¦‚æœåº“_ä¸æ˜¯_åŒ…å«åœ¨ <code>package.json</code> ä¸­çš„ npm æ¨¡å—ï¼Œè¯·æä¾› <code>license</code>ã€<code>version</code> å’Œ <code>url</code> å­—æ®µã€‚å¦åˆ™ï¼Œéœ€ä¿è¯å¯ä»¥ä½¿ç”¨ <code>package.json</code> æ£€æµ‹åˆ°æ­¤ä¿¡æ¯ã€‚</li><li>å¦‚æœåœ¨è®¸å¯è¯æ–¹é¢å­˜åœ¨ç‰¹ä¾‹ï¼Œæ¯”å¦‚åœ¨å¤šä¸ªå¯ç”¨è®¸å¯è¯ä¸­é€‰æ‹©ä½¿ç”¨å•ä¸ªè®¸å¯è¯ï¼Œæä¾›è®¸å¯è¯å­—æ®µå°†è¦†ç›–ä½¿ç”¨ <code>package.json</code> æ£€æµ‹åˆ°çš„ä¿¡æ¯ã€‚å¦‚æœéœ€è¦è§£é‡Šå¼‚å¸¸æƒ…å†µï¼Œåˆ™è¿˜åº”åœ¨<code>note</code>så­—æ®µä¸­æä¾›è§£é‡Šã€‚</li><li>è¿è¡Œ <code>npm run build-third-party</code> å¹¶æäº¤ç”Ÿæˆçš„ <code>ThirdParty.json</code></li></ol></li></ul><h2 id="widgets" tabindex="-1">Widgets <a class="header-anchor" href="#widgets" aria-label="Permalink to &quot;Widgets&quot;">â€‹</a></h2><p>Cesium åŒ…å«ä¸€äº›åœ¨æŸ¥çœ‹å™¨ä¸­ä½¿ç”¨çš„æ ‡å‡†å°éƒ¨ä»¶ï¼ŒåŒ…æ‹¬åŠ¨ç”»å’Œæ—¶é—´è½´æ§ä»¶ã€åŸºç¡€å±‚é€‰æ‹©å™¨å’Œåœ°ç†ç¼–ç å™¨ã€‚è¿™äº›å°éƒ¨ä»¶éƒ½æ˜¯ä½¿ç”¨ <a href="http://knockoutjs.com/" target="_blank" rel="noreferrer">Knockout</a>) æ„å»ºçš„ï¼Œç”¨äºè‡ªåŠ¨åˆ·æ–° UIã€‚Knockout ä½¿ç”¨æ¨¡å‹è§†å›¾è§†å›¾æ¨¡å‹ (MVVM) è®¾è®¡æ¨¡å¼ã€‚æ‚¨å¯ä»¥åœ¨<a href="https://addyosmani.com/blog/understanding-mvvm-a-guide-for-javascript-developers/" target="_blank" rel="noreferrer">äº†è§£ MVVM - JavaScript å¼€å‘äººå‘˜æŒ‡å—</a>ä¸­äº†è§£æœ‰å…³æ­¤è®¾è®¡æ¨¡å¼çš„æ›´å¤šä¿¡æ¯ï¼Œ</p><p>ä»¥äº†è§£å¦‚ä½•ä½¿ç”¨Knockout åº“ï¼Œè¯·å‚é˜…å…¶ä¸»é¡µçš„<a href="http://knockoutjs.com/" target="_blank" rel="noreferrer">å…¥é—¨</a> éƒ¨åˆ†ã€‚ä»–ä»¬è¿˜æœ‰ä¸€ä¸ªå¾ˆæ£’çš„ <a href="http://learn.knockoutjs.com/" target="_blank" rel="noreferrer">äº¤äº’å¼æ•™ç¨‹</a>ï¼Œå…¶ä¸­åŒ…å«åˆ†æ­¥è¯´æ˜ã€‚</p><p>Cesium è¿˜ä½¿ç”¨ <a href="http://blog.stevensanderson.com/2013/05/20/knockout-es5-a-plugin-to-simplify-your-syntax/" target="_blank" rel="noreferrer">Knockout-ES5</a> æ’ä»¶æ¥ç®€åŒ– knockout è¯­æ³•ï¼Œä¹Ÿå°±æ˜¯è‡ªåŠ¨æ·±åº¦ç›‘å¬ï¼Œä¸ç”¨ä¸€ä¸ªä¸ªç›‘å¬ã€‚è¿™è®©æˆ‘ä»¬å¯ä»¥åƒä½¿ç”¨å…¶ä»–å˜é‡ä¸€æ ·ä½¿ç”¨ knockout observablesã€‚è°ƒç”¨ <code>knockout.track</code> æ¥åˆ›å»ºå¯è§‚å¯Ÿå¯¹è±¡ã€‚è¿™æ˜¯æ¥è‡ª <a href="https://github.com/CesiumGS/cesium/blob/main/Source/Widgets/BaseLayerPicker/BaseLayerPickerViewModel.js#L73" target="_blank" rel="noreferrer">BaseLayerPickerViewModel</a> çš„ç¤ºä¾‹ï¼Œå®ƒä¸º<code>tooltip</code>ã€<code>showInstructions</code>å’Œ<code> _touch</code> å±æ€§åˆ¶ä½œå¯è§‚å¯Ÿå¯¹è±¡</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">knockout</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">track</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">this,</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">tooltip</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">showInstructions</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">_touch</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">])</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h3 id="knockoutè®¢é˜…" tabindex="-1">Knockoutè®¢é˜… <a class="header-anchor" href="#knockoutè®¢é˜…" aria-label="Permalink to &quot;Knockoutè®¢é˜…&quot;">â€‹</a></h3><p>åªæœ‰å½“æ‚¨æ— æ³•å®Œæˆæ‚¨éœ€è¦ä½¿ç”¨æ ‡å‡†ç»‘å®šæ‰§è¡Œçš„æ“ä½œæ—¶ï¼Œæ‰ä½¿ç”¨Knockoutè®¢é˜…ã€‚å¯¹äº <a href="https://github.com/CesiumGS/cesium/blob/main/Source/Widgets/Viewer/Viewer.js#L588" target="_blank" rel="noreferrer">example</a>ï¼Œ<code>Viewer</code> è®¢é˜…äº† <code>FullscreenButtonViewModel.isFullscreenEnabled</code> å› ä¸ºå®ƒéœ€è¦æ”¹å˜è¯¥å€¼æ›´æ”¹æ—¶æ—¶é—´è½´å°éƒ¨ä»¶çš„å®½åº¦ã€‚è¿™ä¸èƒ½é€šè¿‡ç»‘å®šæ¥å®Œæˆï¼Œå› ä¸ºæ¥è‡ª<code>FullscreenButtonViewModel</code>çš„å€¼æ­£åœ¨å½±å“ä¸åŒ…å«åœ¨è¯¥å°éƒ¨ä»¶ä¸­çš„å€¼ã€‚</p><p>Cesium åŒ…å«ä¸€ä¸ª <a href="https://github.com/CesiumGS/cesium/blob/main/Source/Widgets/subscribeAndEvaluate.js" target="_blank" rel="noreferrer"><code>subscribeAndEvaluate</code></a> è¾…åŠ©å‡½æ•°ï¼Œç”¨äºè®¢é˜… knockout observableã€‚</p><p>ä½¿ç”¨è®¢é˜…æ—¶ï¼Œè¯·åŠ¡å¿…åœ¨è§†å›¾æ¨¡å‹ä¸å†ä½¿ç”¨æ—¶<a href="https://github.com/CesiumGS/cesium/blob/main/Source/Widgets/Viewer/Viewer.js#L1413" target="_blank" rel="noreferrer">å¤„ç†è®¢é˜…</a>å®ƒã€‚å¦åˆ™ï¼Œç›‘å¬å™¨å°†åœ¨å¯è§‚å¯Ÿå¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸå†…ç»§ç»­æ”¶åˆ°é€šçŸ¥ã€‚</p><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">fullscreenSubscription </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">subscribeAndEvaluate</span><span style="color:#A6ACCD;">(fullscreenButton</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">viewModel</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">isFullscreenEnabled</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">isFullscreenEnabled</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">...</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ...ç„¶åç¨å... </span></span>
<span class="line"><span style="color:#A6ACCD;">fullscreenSubscription</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">dispose</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h2 id="glsl" tabindex="-1">GLSL <a class="header-anchor" href="#glsl" aria-label="Permalink to &quot;GLSL&quot;">â€‹</a></h2><h3 id="å‘½å-1" tabindex="-1">å‘½å <a class="header-anchor" href="#å‘½å-1" aria-label="Permalink to &quot;å‘½å&quot;">â€‹</a></h3><ul><li>GLSL æ–‡ä»¶ä»¥ <code>.glsl</code> ç»“å°¾ï¼Œä½äº <a href="https://github.com/CesiumGS/cesium/tree/main/Source/Shaders" target="_blank" rel="noreferrer">Shaders</a> ç›®å½•ä¸­ã€‚</li><li>é¡¶ç‚¹ç€è‰²å™¨çš„æ–‡ä»¶æœ‰ä¸€ä¸ª<code>VS</code>åç¼€ï¼›ç‰‡æ®µç€è‰²å™¨æœ‰ä¸€ä¸ª <code>FS</code> åç¼€ã€‚ä¾‹å¦‚ï¼š<code>BillboardCollectionVS.glsl</code> å’Œ <code>BillboardCollectionFS.glsl</code>ã€‚</li><li>é€šå¸¸ï¼Œå‡½æ•°å’Œå˜é‡ç­‰æ ‡è¯†ç¬¦ä½¿ç”¨ <code>camelCase</code>ã€‚</li><li>Cesium å†…ç½®æ ‡è¯†ç¬¦ä»¥ <code>czm_</code> å¼€å¤´ï¼Œä¾‹å¦‚ <a href="https://github.com/CesiumGS/cesium/blob/main/Source/Shaders/Builtin/Structs/material.glsl" target="_blank" rel="noreferrer"><code>czm_material</code></a>ã€‚æ–‡ä»¶å…·æœ‰ç›¸åŒçš„åç§°ï¼Œä½†ä¸å¸¦ <code>czm_</code> å‰ç¼€ï¼Œä¾‹å¦‚ <code>material.glsl</code></li></ul><blockquote><p>czm_textureCubeæ˜¯CesiumJSçš„ä¸€ä¸ªåº“å‡½æ•°ï¼Œå…¶åº•å±‚å®ç°æ–¹å¼æ˜¯æ ¹æ®WebGLä¸Šä¸‹æ–‡å¯¹è±¡æ˜¯å¦æ”¯æŒWebGL 2æ¥ä½¿ç”¨ä¸åŒçš„APIè¿›è¡Œæ“ä½œçš„ã€‚å¦‚æœå½“å‰æµè§ˆå™¨ä½¿ç”¨çš„æ˜¯WebGL 1ï¼Œczm_textureCubeä¼šåˆ¤æ–­å½“å‰ä¸Šä¸‹æ–‡å¯¹è±¡æ— æ³•æ”¯æŒWebGL 2ï¼Œç„¶åä½¿ç”¨WebGL 1å¯¹åº”çš„APIæ¥å®ç°ç«‹æ–¹ä½“è´´å›¾çš„é‡‡æ ·ã€‚å› æ­¤ï¼Œè™½ç„¶czm_textureCubeæ˜¯ä¸ºäº†æ»¡è¶³WebGL 2çš„éœ€æ±‚è€Œå­˜åœ¨çš„ï¼Œä½†æ˜¯å®ƒä¹Ÿèƒ½å¤Ÿé€šè¿‡å…¼å®¹æ€§å¤„ç†æ¥åœ¨WebGL 1ä¸­ä½¿ç”¨ã€‚</p></blockquote><ul><li>åœ¨å¯¹ç«‹æ–¹ä½“è´´å›¾è¿›è¡Œé‡‡æ ·æ—¶ä½¿ç”¨ <code>czm_textureCube</code> è€Œä¸æ˜¯ <code>texture</code>ã€‚è¿™æ˜¯ä¸ºäº†ä¿æŒä¸WebGL 1 çš„å‘åå…¼å®¹æ€§</li><li><code>Varyings</code> ä»¥v_å¼€å¤´ï¼Œä¾‹å¦‚ï¼Œ</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> vec2 v_textureCoordinates</span><span style="color:#89DDFF;">;</span></span></code></pre></div><ul><li>uniformä»¥ <code>u_</code> å¼€å¤´ï¼Œä¾‹å¦‚ï¼Œ</li></ul><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">uniform sampler2D u_atlas</span><span style="color:#89DDFF;">;</span></span></code></pre></div><ul><li>ECåç¼€è¡¨ç¤ºç‚¹æˆ–å‘é‡ä½äºçœ¼ç›åæ ‡ç³»ä¸­ï¼Œä¾‹å¦‚ï¼Œ</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">varying vec3 v_positionEC</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// ... </span></span>
<span class="line"><span style="color:#A6ACCD;">v_positionEC </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> (czm_modelViewRelativeToEye </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> p)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">xyz</span><span style="color:#89DDFF;">;</span></span></code></pre></div><ul><li>å½“ä½¿ç”¨ <a href="https://help.agi.com/AGIComponents/html/BlogPrecisionsPrecisions.htm" target="_blank" rel="noreferrer">GPU RTE</a> æ—¶ï¼Œ<code>High</code> å’Œ <code>Low</code> åç¼€åˆ†åˆ«å®šä¹‰é«˜ä½å’Œä½ä½ï¼Œä¾‹å¦‚ï¼Œ</li></ul><div class="language-glsl"><button title="Copy Code" class="copy"></button><span class="lang">glsl</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">attribute</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">vec3</span><span style="color:#A6ACCD;"> position3DHigh</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#C792EA;">attribute</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">vec3</span><span style="color:#A6ACCD;"> position3DLow</span><span style="color:#89DDFF;">;</span></span></code></pre></div><blockquote><p>WebGLé€šè¿‡åˆ©ç”¨GPU RTEæä¾›çš„å¹¶è¡Œè®¡ç®—èƒ½åŠ›å®ç°é«˜è´¨é‡çš„å›¾å½¢æ¸²æŸ“å’Œè®¡ç®—ã€‚GPU RTEé€šå¸¸åŒ…å«æ›´å¤šçš„å¤„ç†å™¨æ ¸å¿ƒå’Œæ›´é«˜çš„å†…å­˜å¸¦å®½ï¼Œå¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªæ•°æ®å’Œè®¡ç®—ä»»åŠ¡ã€‚</p><p>åœ¨åº•å±‚åŸç†æ–¹é¢ï¼ŒGPU RTEé€šè¿‡ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤å®ç°å¹¶è¡Œè®¡ç®—ï¼š</p><ol><li>å›¾å½¢å¡å°†è®¡ç®—ä»»åŠ¡ä¼ é€’ç»™GPUé©±åŠ¨ç¨‹åºã€‚</li><li>GPUé©±åŠ¨ç¨‹åºå°†ä»»åŠ¡åˆ†æˆå¤šä¸ªå°å—ï¼Œæ¯ä¸ªå°å—å¯ä»¥åŒæ—¶åœ¨GPUä¸Šæ‰§è¡Œã€‚</li><li>å•ä¸ªä»»åŠ¡è¢«åˆ†é…ç»™å¤šä¸ªå¤„ç†å™¨æ ¸å¿ƒï¼Œå¹¶åœ¨GPUå†…å­˜ä¸­è¿è¡Œã€‚</li><li>å¤„ç†å™¨æ ¸å¿ƒè¯»å–å†…å­˜ä¸­çš„æ•°æ®è¿›è¡Œè®¡ç®—ï¼Œå¯ä»¥åŒæ—¶è¯»å–å¤šä¸ªæ•°æ®å¹¶æ‰§è¡Œå¤šä¸ªè®¡ç®—æ“ä½œã€‚</li><li>è®¡ç®—ç»“æœè¢«å†™å…¥GPUå†…å­˜ä¸­ã€‚</li><li>GPUå°†æ‰€æœ‰ç»“æœåˆå¹¶ä¸ºæœ€ç»ˆç»“æœï¼Œå¹¶å°†ç»“æœä¼ é€’å›CPUã€‚</li></ol><p>WebGLåº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡WebGL APIè°ƒç”¨å°†è®¡ç®—ä»»åŠ¡è¾“å‡ºåˆ°GPUï¼Œå¹¶åˆ©ç”¨GPU RTEçš„å¹¶è¡Œè®¡ç®—èƒ½åŠ›å®Œæˆè®¡ç®—ä»»åŠ¡ã€‚WebGLæä¾›äº†å¤šç§ç±»å‹çš„ç¼“å†²å™¨ï¼ˆbufferï¼‰å¯¹è±¡ï¼Œå¯ä»¥å°†è®¡ç®—ä»»åŠ¡æ•°æ®å­˜å‚¨åœ¨GPUå†…å­˜ä¸­ã€‚ç„¶åï¼ŒWebGL APIå¯ä»¥ä½¿ç”¨ç€è‰²å™¨ç¨‹åºæ¥å¯¹è¿™äº›æ•°æ®è¿›è¡Œè®¡ç®—ï¼Œå¹¶å°†è®¡ç®—ç»“æœè¾“å‡ºåˆ°ç¼“å†²å™¨çš„å¦ä¸€ç«¯ã€‚</p><p>åœ¨æ›´åº•å±‚çš„å®ç°åŸç†æ–¹é¢ï¼ŒGPU RTEå†…éƒ¨ä¸»è¦åˆ©ç”¨äº†å¹¶è¡Œè®¡ç®—æ¶æ„å’Œå¯ç¼–ç¨‹ç€è‰²å™¨æŠ€æœ¯ã€‚GPUé€šå¸¸åŒ…å«è¾ƒå¤šçš„å¤„ç†å™¨æ ¸å¿ƒï¼Œå¯ä»¥åŒæ—¶æ‰§è¡Œå¤šä¸ªè®¡ç®—æ“ä½œã€‚GPU RTEè¿˜å¯ä»¥åˆ©ç”¨å•æŒ‡ä»¤å¤šæ•°æ®ï¼ˆSIMDï¼‰æŒ‡ä»¤é›†æ¥åŠ é€Ÿè®¡ç®—ï¼Œå¹¶åœ¨å†…å­˜è®¿é—®æ—¶é€šè¿‡å­˜å‚¨å™¨åˆ†å±‚ç»“æ„å’Œç¼“å­˜æŠ€æœ¯æ¥æé«˜å†…å­˜å¸¦å®½å’Œè®¿é—®é€Ÿåº¦ã€‚å¯ç¼–ç¨‹ç€è‰²å™¨æŠ€æœ¯åˆ™å…è®¸å¼€å‘è€…è‡ªå®šä¹‰è®¡ç®—ä»»åŠ¡ï¼Œå¹¶å¯ä»¥åœ¨GPUä¸Šé«˜æ•ˆæ‰§è¡Œè¿™äº›ä»»åŠ¡ã€‚</p><p>åœ¨æœ€åº•å±‚çš„å®ç°åŸç†æ–¹é¢ï¼ŒGPU RTEå†…éƒ¨ä½¿ç”¨äº†ç¡¬ä»¶çº§åˆ«çš„å¹¶è¡Œè®¡ç®—æŠ€æœ¯ï¼Œå¦‚SIMDæŒ‡ä»¤ï¼Œå¤šæ ¸å¿ƒæ¶æ„ç­‰ã€‚æ­¤å¤–ï¼ŒGPUå†…éƒ¨è¿˜ä½¿ç”¨äº†é«˜é€Ÿç¼“å­˜æŠ€æœ¯ï¼Œå†…å­˜æ¡å¸¦æŠ€æœ¯ç­‰ä¸€ç³»åˆ—ä¼˜åŒ–æŠ€æœ¯æ¥æé«˜è®¡ç®—å’Œå†…å­˜è®¿é—®é€Ÿåº¦ã€‚GPU RTEè¿˜èƒ½å¤Ÿæ‰§è¡Œå¤æ‚çš„å›¾åƒå’Œè®¡ç®—ä»»åŠ¡ï¼Œå¹¶ä½¿ç”¨å¯ç¼–ç¨‹ç€è‰²å™¨æŠ€æœ¯è¿›è¡Œé«˜æ•ˆçš„è®¡ç®—å’Œæ¸²æŸ“ã€‚</p></blockquote><ul><li>2D çº¹ç†åæ ‡æ˜¯ <code>s</code> å’Œ <code>t</code>ï¼Œè€Œä¸æ˜¯ <code>u</code> å’Œ <code>v</code>ï¼Œä¾‹å¦‚ï¼Œ</li></ul><div class="language-glsl"><button title="Copy Code" class="copy"></button><span class="lang">glsl</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">attribute</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">vec2</span><span style="color:#A6ACCD;"> st</span><span style="color:#89DDFF;">;</span></span></code></pre></div><h3 id="æ ¼å¼åŒ–-1" tabindex="-1">æ ¼å¼åŒ– <a class="header-anchor" href="#æ ¼å¼åŒ–-1" aria-label="Permalink to &quot;æ ¼å¼åŒ–&quot;">â€‹</a></h3><ul><li>ä½¿ç”¨ä¸ JavaScript ç›¸åŒçš„æ ¼å¼ï¼Œé™¤äº†å°† <code>{</code> æ¢è¡Œï¼Œä¾‹å¦‚ï¼Œ</li></ul><div class="language-glsl"><button title="Copy Code" class="copy"></button><span class="lang">glsl</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">struct</span><span style="color:#A6ACCD;"> czm_ray</span></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    vec3 origin</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    vec3 direction</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span></code></pre></div><h3 id="æ€§èƒ½" tabindex="-1">æ€§èƒ½ <a class="header-anchor" href="#æ€§èƒ½" aria-label="Permalink to &quot;æ€§èƒ½&quot;">â€‹</a></h3><ul><li>ğŸš¤: å°½å¯èƒ½ä¸é¢‘ç¹åœ°è®¡ç®—æ˜‚è´µçš„å€¼ï¼Œä¾‹å¦‚ï¼Œæ›´å–œæ¬¢åœ¨ JavaScript ä¸­è®¡ç®—ä¸€ä¸ªå€¼å¹¶ä»¥ç»Ÿä¸€çš„æ–¹å¼ä¼ é€’å®ƒï¼Œè€Œä¸æ˜¯å†—ä½™åœ°è®¡ç®—æ¯ä¸ªé¡¶ç‚¹çš„ç›¸åŒå€¼ã€‚åŒæ ·ï¼Œæ›´å–œæ¬¢è®¡ç®—æ¯ä¸ªé¡¶ç‚¹çš„å€¼å¹¶ä¼ é€’ä¸€ä¸ªå˜é‡ï¼Œè€Œä¸æ˜¯å°½å¯èƒ½è®¡ç®—æ¯ä¸ªç‰‡æ®µã€‚</li><li>ğŸš¤: è°¨æ…ä½¿ç”¨ <code>discard</code>ï¼Œå› ä¸ºå®ƒä¼šç¦ç”¨ early-z GPU ä¼˜åŒ–ã€‚</li></ul><h2 id="èµ„æº" tabindex="-1">èµ„æº <a class="header-anchor" href="#èµ„æº" aria-label="Permalink to &quot;èµ„æº&quot;">â€‹</a></h2><p>è¯·å‚é˜… Cesium è´¡çŒ®è€… Matthew Amato å’Œ Kevin Ring åœ¨ <em>WebGL Insights</em> ä¸­ <a href="http://webglinsights.github.io/downloads/WebGL-Insights-Chapter-4.pdf" target="_blank" rel="noreferrer">è®¤çœŸå¯¹å¾… JavaScript</a> çš„ç¬¬ 4.1 è‡³ 4.3 èŠ‚ï¼Œä»¥æ›´æ·±å…¥åœ°äº†è§£æ¨¡å—å’Œæ€§èƒ½ã€‚</p><p>è§‚çœ‹ Lilli Thompson çš„<a href="https://www.youtube.com/watch?v=XAqIpGU8ZZk" target="_blank" rel="noreferrer">ä»æ§åˆ¶å°åˆ° Chrome</a>ï¼Œäº†è§£æ›´æ·±å…¥çš„æ€§èƒ½ä»‹ç»ã€‚</p>`,241),e=[p];function t(c,r,y,D,F,i){return a(),n("div",null,e)}const d=s(o,[["render",t]]);export{A as __pageData,d as default};
