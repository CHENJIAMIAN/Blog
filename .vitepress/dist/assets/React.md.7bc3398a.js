import{_ as s,o as n,c as a,O as l}from"./chunks/framework.4afe7240.js";const i=JSON.parse('{"title":"https://juejin.cn/post/7202085514400038969#heading-23ã€åŠ¨å›¾+å¤§ç™½è¯ğŸ“è§£æReactæºç ã€‘Renderé˜¶æ®µä¸­Fiberæ ‘çš„åˆå§‹åŒ–ä¸å¯¹æ¯”æ›´æ–°ï½","description":"","frontmatter":{},"headers":[],"relativePath":"React.md","filePath":"React.md"}'),p={name:"React.md"},o=l(`<div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">umi </span><span style="color:#676E95;font-style:italic;">//ä¼ä¸šçº§reactåº”ç”¨æ¡†æ¶,ç±»ä¼¼Next.js</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//dvaä½œä¸ºumiæ’ä»¶, åº•å±‚å¼•å…¥äº†redux-sagasåšå¼‚æ­¥æµç¨‹æ§åˆ¶ï¼Œå†…ç½®äº†Â react-router(&#39;dva/router&#39;)Â  </span></span>
<span class="line"><span style="color:#A6ACCD;">    å¯åŠ¨è¿‡ç¨‹</span></span>
<span class="line"><span style="color:#A6ACCD;">           umiÂ dev </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#A6ACCD;"> bin</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">umi</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#A6ACCD;"> lib</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">cli </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#A6ACCD;"> forkedDev</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ts </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#A6ACCD;"> Serviceç»§æ‰¿è‡ªCoreServiceï¼Œæ˜¯å¯¹CoreServiceäºŒæ¬¡å°è£…ã€‚å®ƒçš„æ ¸å¿ƒä»£ç åœ¨ServiceWithBuiltIn</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">tsæ–‡ä»¶ä¸­</span></span>
<span class="line"><span style="color:#A6ACCD;">           </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#A6ACCD;"> è¿›ç¨‹å¯åŠ¨éœ€è¦ä¸¤æ­¥ï¼š</span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">ã€å®ä¾‹åŒ–Serviceï¼Œ</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">ã€è°ƒç”¨Serviceçš„runæ–¹æ³• </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#A6ACCD;"> runCommand </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#A6ACCD;"> api</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">registerCommand</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">Â Â </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">dev</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">...}</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">-&gt;</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">           Â Â </span><span style="color:#676E95;font-style:italic;">//Â è°ƒç”¨å®ä¾‹åŒ–åçš„Â bundlerÂ çš„Â setupDevServerOptsÂ æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•åšäº†å¦‚ä¸‹å‡ ä»¶äº‹ï¼š Â Â </span></span>
<span class="line"><span style="color:#89DDFF;">                 </span><span style="color:#676E95;font-style:italic;">//Â 1.Â è°ƒç”¨webpackæ–¹æ³•ï¼Œè·å–webpackçš„ç¼–è¯‘å™¨å®ä¾‹Â compiler Â Â </span></span>
<span class="line"><span style="color:#89DDFF;">                 </span><span style="color:#676E95;font-style:italic;">//Â 2.Â ç¼–è¯‘å™¨å®ä¾‹Â compilerÂ é€šè¿‡Â webpack-dev-middlewareÂ å°è£…å™¨ï¼Œå°†webpackå¤„ç†è¿‡çš„æ–‡ä»¶å°è£…æˆÂ serverÂ èƒ½æ¥æ”¶çš„æ ¼å¼ Â Â </span></span>
<span class="line"><span style="color:#89DDFF;">                 </span><span style="color:#676E95;font-style:italic;">//Â 3.Â é€šè¿‡è°ƒç”¨Â sockjsÂ çš„Â sockWriteÂ æ–¹æ³•ï¼Œå®ç°çƒ­æ›´æ–° Â Â </span></span>
<span class="line"><span style="color:#89DDFF;">                 </span><span style="color:#676E95;font-style:italic;">//Â 4.Â å¤„ç†æœåŠ¡ç±»Â ServerÂ å®ä¾‹åŒ–æ—¶éœ€è¦çš„Â onListeningÂ å’ŒÂ onConnectionÂ å‡½æ•°</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//umiå†…ç½®çš„æ ¸å¿ƒæ’ä»¶éƒ½é€šè¿‡æ’ä»¶é›†@umijs/preset-built-inæ³¨å…¥</span></span>
<span class="line"><span style="color:#A6ACCD;">    æ¨¡æ¿html</span><span style="color:#676E95;font-style:italic;">//\\@umijs\\core\\lib\\Html\\Html.js</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">//\\@umijs\\server\\lib\\Server\\Server.js -&gt; proxyMiddleware</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">///@umijs/preset-built-in/lib/plugins/commands/dev/createRouteMiddleware.js-&gt; sendHtml</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">//getGetContent-&gt; letÂ htmlÂ =Â render(tpl,Â context,Â {Â ...filename:Â &#39;document.ejs&#39;Â });</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span></span>
<span class="line"><span style="color:#A6ACCD;">enquire</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js </span><span style="color:#676E95;font-style:italic;">//æ˜¯ä¸€ä¸ªè½»é‡çº§çš„çº¯JavaScriptåº“ï¼Œç”¨äºå“åº”CSSåª’ä½“æŸ¥è¯¢ã€‚</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">SSRè·å–window</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">typeof</span><span style="color:#A6ACCD;"> window </span><span style="color:#89DDFF;">!==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">undefined</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">window</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">SLOTæ’æ§½</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">props</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">children</span><span style="color:#676E95;font-style:italic;">//é»˜è®¤slotæ˜¯ç»„ä»¶åŒ…å«çš„å†…å®¹</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">åˆæˆäº‹ä»¶</span><span style="color:#676E95;font-style:italic;">//ç»Ÿä¸€å§”æ‰˜åˆ°æ ¹å…ƒç´ </span></span>
<span class="line"><span style="color:#A6ACCD;">    onClick</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">  (e) =&gt; this.deleteRow(id</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> e)   </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">å—ä¸å—reactæ§åˆ¶</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">å—æ§ç»„ä»¶</span><span style="color:#89DDFF;">/</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//Â stateæ˜¯ç»„ä»¶çš„å”¯ä¸€æ•°æ®æº, å³è¡¨å•å€¼æ˜¯ç”± React ç»„ä»¶ç›‘å¬onChangeæ¥å­˜åˆ°stateçš„</span></span>
<span class="line"><span style="color:#A6ACCD;">    éå—æ§ç»„ä»¶ </span><span style="color:#676E95;font-style:italic;">//ç”¨refæ§åˆ¶,å¯ä»¥å‡å°‘ä»£ç é‡æ—¶, ç›´æ¥ref.current.valueè·å–è¡¨å•å€¼</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">Suspense ä½¿å¾—ç»„ä»¶å¯ä»¥â€œç­‰å¾…â€æŸäº›æ“ä½œç»“æŸåï¼Œå†è¿›è¡Œæ¸²æŸ“ã€‚</span></span>
<span class="line"><span style="color:#A6ACCD;">Fragments </span><span style="color:#FFCB6B;">ç»„ä»¶</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">ç”¨æ¥åŒ…è£¹å¤šä¸ªç»„ä»¶</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">å°è£…æˆä¸€ä¸ª</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">æ–¹ä¾¿å¼•ç”¨</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">ç»„ä»¶</span></span>
<span class="line"><span style="color:#A6ACCD;">    ç±»ç»„ä»¶</span></span>
<span class="line"><span style="color:#A6ACCD;">    å‡½æ•°ç»„ä»¶</span><span style="color:#676E95;font-style:italic;">//é¢—ç²’åº¦æ›´å°,é€»è¾‘å¤ç”¨</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">useEffect</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">Â </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;font-style:italic;">//ç›¸å½“äºcomponentDidMountã€componentDidUpdate</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#C792EA;">const</span><span style="color:#F07178;">Â </span><span style="color:#A6ACCD;">timer</span><span style="color:#F07178;">Â </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;">Â </span><span style="color:#82AAFF;">setInterval</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;">Â </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;">Â </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">                Â Â </span><span style="color:#82AAFF;">setDate</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">new</span><span style="color:#F07178;">Â </span><span style="color:#82AAFF;">Date</span><span style="color:#F07178;">())</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#89DDFF;">},</span><span style="color:#F07178;">Â </span><span style="color:#F78C6C;">1000</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;">Â </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;">Â </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;">Â </span><span style="color:#82AAFF;">clearInterval</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">timer</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;">//ç›¸å½“äºcomponentWillUnmount</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;">Â []</span><span style="color:#676E95;font-style:italic;">/*ä¾èµ–é¡¹é—¨, ç©ºçš„è¯useEffectåªæ‰§è¡Œä¸€æ¬¡*/</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;font-style:italic;">//æ¯ä¸ªasyncå‡½æ•°éƒ½ä¼šé»˜è®¤è¿”å›ä¸€ä¸ªéšå¼çš„promiseã€‚ä½†æ˜¯ï¼ŒuseEffectä¸åº”è¯¥è¿”å›ä»»ä½•å†…å®¹,æ‰€ä»¥useEffect(async () =&gt; â€¦)Â æ˜¯ä¸å…è®¸çš„</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span></span>
<span class="line"><span style="color:#82AAFF;">setState</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">k</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">v</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">) </span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">åœ¨ setTimeout å’Œ nativeäº‹ä»¶ ä¸­ä½¿ç”¨æ˜¯åŒæ­¥çš„, å…¶ä»–åœ°æ–¹ä½¿ç”¨å¦‚åˆæˆäº‹ä»¶ä¸­ æ˜¯å¼‚æ­¥çš„,æ›´æ–°ä¼šåˆå¹¶</span><span style="color:#89DDFF;">/</span></span>
<span class="line"><span style="color:#82AAFF;">setState</span><span style="color:#A6ACCD;">(</span><span style="color:#A6ACCD;font-style:italic;">preState</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">{</span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">obj</span><span style="color:#89DDFF;">},</span><span style="color:#A6ACCD;">å›è°ƒ) </span><span style="color:#676E95;font-style:italic;">//éåˆå¹¶éæ‰¹é‡æ›´æ–°</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">çº¯ç»„ä»¶</span><span style="color:#676E95;font-style:italic;">//æ— shouldComponentUpdate,å†…éƒ¨è‡ªåŠ¨shouldComponentUpdate, &quot;æµ…æ¯”è¾ƒ&quot;åªæ¯”è¾ƒäº†å¯¹è±¡ç¬¬ä¸€å±‚</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">æ€§èƒ½ä¼˜åŒ–</span><span style="color:#89DDFF;">/</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">hook  </span><span style="color:#676E95;font-style:italic;">//Hook ä¸èƒ½åœ¨ class ç»„ä»¶ä¸­ä½¿ç”¨</span></span>
<span class="line"><span style="color:#A6ACCD;">    useState</span></span>
<span class="line"><span style="color:#A6ACCD;">    Â Â </span><span style="color:#676E95;font-style:italic;">//å®šä¹‰ä¸€ä¸ªå«countçš„stateå˜é‡ï¼Œåˆå§‹åŒ–ä¸º0</span></span>
<span class="line"><span style="color:#A6ACCD;">    Â Â </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">count</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">Â setCount</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">Â </span><span style="color:#82AAFF;">useState</span><span style="color:#A6ACCD;">(</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    useEffect</span><span style="color:#676E95;font-style:italic;">//ç›¸å½“äºcomponentDidMountã€componentDidUpdate</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">åœ¨ç»„ä»¶æ¸²æŸ“åˆ°å±å¹•åå»¶è¿Ÿæ‰§è¡Œ,ç”¨æ¥å®Œæˆå‰¯ä½œç”¨æ“ä½œ</span><span style="color:#89DDFF;">/</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">//æ¸²æŸ“æ—¶çš„æ•°æ®è·å–ã€è®¢é˜…æˆ–è€…æ‰‹åŠ¨ä¿®æ”¹è¿‡ DOMã€‚è¿™äº›æ“ä½œç§°ä¸ºâ€œå‰¯ä½œç”¨â€/â€œä½œç”¨â€</span></span>
<span class="line"><span style="color:#A6ACCD;">    useLayoutEffect</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">è·ŸuseEffectçš„åŒºåˆ«æ˜¯å®ƒä¸å»¶è¿Ÿæ‰§è¡Œ,åœ¨DOMå˜æ›´ååŒæ­¥è°ƒç”¨</span><span style="color:#89DDFF;">/</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">ç¼“å­˜å‚æ•°</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">value </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">useMemo</span><span style="color:#A6ACCD;">(å›è°ƒ</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">[ä¾èµ–é¡¹])</span><span style="color:#676E95;font-style:italic;">//åªæœ‰ä¾èµ–é¡¹æ”¹å˜æ—¶æ‰æ‰§è¡Œ,é˜²æ­¢å…¶ä»–æ— å…³å˜é‡å˜åŠ¨æ—¶, å®ƒä¹Ÿè·Ÿç€å‚»å‚»é‡ç®—</span></span>
<span class="line"><span style="color:#A6ACCD;">         React</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">memo</span><span style="color:#A6ACCD;">(ç»„ä»¶</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">å¯é€‰æ¯”è¾ƒå‡½æ•°)</span><span style="color:#676E95;font-style:italic;">//è·ŸuseMemoä¸€æ ·å¯ä»¥ç”¨æ¥å¯¹å‡½æ•°å¼ç»„ä»¶è¿›è¡Œæ€§èƒ½ä¼˜åŒ–, å³ä½¿æ²¡æœ‰æ¯”è¾ƒå‚æ•°é‚£ä¹Ÿæ˜¯&quot;æµ…æ¯”è¾ƒ&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">ç¼“å­˜å‡½æ•°</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">func </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">useCallback</span><span style="color:#A6ACCD;">(æ¯”å¦‚åŒ…ä¸€ä¸ªonChangeç›‘å¬å™¨å‡½æ•°</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">[ä¾èµ–é¡¹])</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">//é…åˆçº¯ç»„ä»¶(ä¾‹å¦‚shouldComponentUpdateä½¿ç”¨å¼•ç”¨ç›¸ç­‰æ€§å»é¿å…éå¿…è¦æ¸²æŸ“)</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">//éš”å£ç»„ä»¶æˆ–ç»„ä»¶å†…éƒ¨çš„æŸä¸ªå±æ€§æ”¹å˜é€ æˆé‡æ–°æ¸²æŸ“æ—¶,å‡½æ•°ä¹Ÿä¼šé‡æ–°åˆå§‹åŒ–,é‚£å‡½æ•°å¼•ç”¨å°±å˜äº†,åˆé€ æˆé‡æ–°æ¸²æŸ“,å¦‚æ­¤å½¢æˆæ­»å¾ªç¯, å¦‚æœæŠŠæ–¹æ³•åŒ…èµ·æ¥ä½œä¸ºpropå†ä¼ ç»™å­ç»„ä»¶, å°±èƒ½é¿å…å­ç»„ä»¶åŠ¨ä¸åŠ¨å°±é‡æ–°æ¸²æŸ“</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    useè‡ªå®šä¹‰</span><span style="color:#676E95;font-style:italic;">//åªèƒ½åœ¨æœ€å¤–å±‚ä½¿ç”¨,åªæœ‰å‡½æ•°å¼ç»„ä»¶å¯ç”¨? å¯¹æ¯”æ™®é€šå‡½æ•°å¯ä»¥å¼•èµ·é‡æ–°æ¸²æŸ“</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    useContext</span></span>
<span class="line"><span style="color:#A6ACCD;">        å£°æ˜</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> ThemeContext </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> React</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createContext</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">foreground</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">#000000</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">background</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">#eeeeee</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        ç”¨æ³•1</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">ThemeContext.Provider</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">value</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">themes</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">dark</span><span style="color:#89DDFF;">}&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">              </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">Toolbar</span><span style="color:#89DDFF;"> /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#FFCB6B;">ThemeContext.Provider</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        ç”¨æ³•2</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> theme </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">useContext</span><span style="color:#A6ACCD;">(ThemeContext)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">é«˜é˜¶ç»„ä»¶HOC</span><span style="color:#676E95;font-style:italic;">//ä¼ å…¥ç»„ä»¶, è¿”å›ç»„ä»¶çš„å‡½æ•°</span></span>
<span class="line"><span style="color:#A6ACCD;">    è£…é¥°å™¨å†™æ³•</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">ä¸è¦åœ¨renderé‡Œä½¿ç”¨HOC,æ€§èƒ½å·®</span><span style="color:#89DDFF;">/</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">è·¨ç»„ä»¶é€šä¿¡ä¼ å€¼context</span><span style="color:#676E95;font-style:italic;">//ç©¿é€è¿›å»</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">çˆ¶åˆ›å»º</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">//ç”¨const context = React.createContext(); </span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">//ç”¨&lt;context.Provider&gt;åŒ…èµ·æ¥ </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">å­è·å–å€¼çš„æ–¹å¼</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        1</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Class</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">contextType ä¼šè¢«é‡æ–°èµ‹å€¼ä¸ºç”±React</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createContext</span><span style="color:#A6ACCD;">()åˆ›å»ºçš„å¯¹è±¡å»èµ‹å€¼ç»™this</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">context</span></span>
<span class="line"><span style="color:#A6ACCD;">        2</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Context</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">ConsumeråŒ…è£¹</span></span>
<span class="line"><span style="color:#A6ACCD;">            Â Â Â Â Â Â </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">UserConsumer</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">    Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;font-style:italic;">userContext</span><span style="color:#A6ACCD;">Â </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">Child</span><span style="color:#89DDFF;">Â {...</span><span style="color:#A6ACCD;">userContext</span><span style="color:#89DDFF;">}Â /&gt;}</span></span>
<span class="line"><span style="color:#A6ACCD;">    Â Â Â Â Â Â Â Â Â Â Â Â Â Â </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#FFCB6B;">UserConsumer</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        3</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">constÂ storeÂ </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">useContext</span><span style="color:#A6ACCD;">(context)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">ref</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//Â Â Â formRefÂ =Â React.createRef();</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//Â Â Â ref={this.formRef}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> formRefÂ </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">useRef</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">null</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">   </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    React</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">clone</span><span style="color:#A6ACCD;">(è€å…ƒç´ </span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">æ–°å±æ€§å¯¹è±¡</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">æ–°å„¿å­)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    React</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">useImperativeHandle</span><span style="color:#A6ACCD;">(ref</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">Â </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;">Â formInstance)</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;">//åœ¨ä½¿ç”¨Â refÂ æ—¶è‡ªå®šä¹‰æš´éœ²ç»™çˆ¶ç»„ä»¶çš„å®ä¾‹å€¼</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;">Â FormÂ </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">Â React</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">forwardRef</span><span style="color:#A6ACCD;">(_Form)</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;">//è½¬å‘refåˆ°å‡½æ•°ç»„ä»¶(æœ¬æ¥ä¸æ”¯æŒçš„),è€Œéå®ä¾‹å€¼,å®ä¾‹å€¼è¦ç”¨useImperativeHandle</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">createPortal</span><span style="color:#A6ACCD;">(jsx</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">è¦é™„åŠ çš„èŠ‚ç‚¹)</span><span style="color:#676E95;font-style:italic;">//æ’å…¥domåˆ°æŒ‡å®šèŠ‚ç‚¹ä¸‹</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">fiber</span><span style="color:#676E95;font-style:italic;">//å°ä»»åŠ¡ä»¬</span></span>
<span class="line"><span style="color:#A6ACCD;">    å¤§ç»„ä»¶æ ‘è§£æé˜»å¡</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#A6ACCD;">æ‹†åˆ†ä»»åŠ¡</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#A6ACCD;">requestIdleCallbacké‡Œæ ¹æ®ä¼˜å…ˆçº§æ‰§è¡Œ</span><span style="color:#89DDFF;">-&gt;</span><span style="color:#A6ACCD;">æ›´æµç•…</span></span>
<span class="line"><span style="color:#A6ACCD;">    fiber</span></span>
<span class="line"><span style="color:#A6ACCD;">        child ç¬¬ä¸€ä¸ªå­fiber</span></span>
<span class="line"><span style="color:#A6ACCD;">        sibling ç¬¬ä¸€ä¸ªå­fiberçš„å…¶ä»–å…„å¼Ÿ</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> çˆ¶fiber</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">æ€§èƒ½ </span><span style="color:#676E95;font-style:italic;">//å‡å°‘è®¡ç®—,å‡å°‘æ¸²æŸ“</span></span>
<span class="line"><span style="color:#A6ACCD;">    shouldComponentUpdate</span></span>
<span class="line"><span style="color:#A6ACCD;">    PureComponent</span><span style="color:#676E95;font-style:italic;">//å¯¹ props å’Œ state è¿›è¡Œæµ…æ¯”è¾ƒ</span></span>
<span class="line"><span style="color:#A6ACCD;">    useMemo</span></span>
<span class="line"><span style="color:#A6ACCD;">    ä¸è¦ä½¿ç”¨å†…è”å±æ€§</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">å‡½æ•°   </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">æ— çŠ¶æ€ç»„ä»¶</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">props</span><span style="color:#89DDFF;">)</span><span style="color:#C792EA;">=&gt;</span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;{</span><span style="color:#A6ACCD;">props</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name</span><span style="color:#89DDFF;">}&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><hr><blockquote><p>æ ·æ¿</p></blockquote><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">*</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">as</span><span style="color:#A6ACCD;"> React </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">react</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> classNames </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">classnames</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">className</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">classNames</span><span style="color:#A6ACCD;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">class2</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">false</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#F07178;">class1</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  )</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ç»„ä»¶</span><span style="color:#89DDFF;">({</span><span style="color:#A6ACCD;font-style:italic;">children</span><span style="color:#89DDFF;">})</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span></code></pre></div><hr><blockquote><p>ç”Ÿå‘½å‘¨æœŸ(é‡ç‚¹)</p></blockquote><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">UNSAFE_å¼€å¤´è¡¨ç¤ºv17å¯èƒ½ä¼šåºŸå¼ƒå®ƒ</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">ä»¥ä¸ºfiberå¯ä»¥ä¸­æ–­</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">é€ æˆwillXXXå¯èƒ½è¢«æ‰§è¡Œå¤šæ¬¡</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">æŒ‚è½½ </span><span style="color:#676E95;font-style:italic;">//å½“ç»„ä»¶å®ä¾‹è¢«åˆ›å»ºå¹¶æ’å…¥ DOM ä¸­æ—¶ï¼Œå…¶ç”Ÿå‘½å‘¨æœŸè°ƒç”¨é¡ºåºå¦‚ä¸‹ï¼š</span></span>
<span class="line"><span style="color:#A6ACCD;">        static defaultProps</span><span style="color:#89DDFF;">={</span><span style="color:#F07178;">msg</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">//è¿™ä¸€èˆ¬ç”¨äº props æœªèµ‹å€¼ï¼Œä½†åˆä¸èƒ½ä¸ºÂ nullçš„æƒ…å†µ</span></span>
<span class="line"><span style="color:#A6ACCD;">        static contextTypes </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> ThemeContext</span><span style="color:#89DDFF;">;</span><span style="color:#676E95;font-style:italic;">//æ³¨å…¥this.context</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">//å£°æ˜æœ‰const ThemeContext = React.createContext({ foreground: &quot;#000000&quot;,    background: &quot;#eeeeee&quot;  })</span></span>
<span class="line"><span style="color:#89DDFF;">           </span><span style="color:#676E95;font-style:italic;">//ä¹‹åå³å¯é€šè¿‡ const {foreground.background} = this.context;è·å–</span></span>
<span class="line"><span style="color:#A6ACCD;">        static propTypes</span><span style="color:#89DDFF;">={</span><span style="color:#F07178;">msg</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">PropTypes</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">string </span><span style="color:#676E95;font-style:italic;">/*æˆ–PropTypes.string.isRequired*/</span><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">//å…ˆimport PropTypes from &#39;prop-types&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">constructor</span><span style="color:#A6ACCD;">()</span><span style="color:#676E95;font-style:italic;">//åˆå§‹åŒ–state | æ–¹æ³•ç»‘å®š</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">å› ä¸ºReconciliationé˜¶æ®µæ˜¯å¯ä»¥è¢«æ‰“æ–­çš„ï¼Œæ‰€ä»¥Reconciliationé˜¶æ®µä¼šæ‰§è¡Œçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°å°±å¯èƒ½ä¼šå‡ºç°è°ƒç”¨å¤šæ¬¡çš„æƒ…å†µï¼Œä»è€Œå¼•èµ·Bugã€‚</span><span style="color:#89DDFF;">/</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">æ‰€ä»¥å¯¹äºReconciliationé˜¶æ®µè°ƒç”¨çš„å‡ ä¸ªå‡½æ•°ï¼Œé™¤äº†shouldComponentUpdateä»¥å¤–ï¼Œå…¶ä»–éƒ½åº”è¯¥é¿å…å»ä½¿ç”¨</span><span style="color:#89DDFF;">/</span></span>
<span class="line"><span style="color:#A6ACCD;">            (V17)static </span><span style="color:#82AAFF;">getDerivedStateFromProps</span><span style="color:#A6ACCD;">(props</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">state) åœ¨æ–°ç‰ˆæœ¬ç”¨æ¥æ›¿ä»£UNSAFE_componentWillReceiveProps</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">è®©ç»„ä»¶åœ¨Â props å˜åŒ–æ—¶æ›´æ–° state</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">UNSAFE_componentWillMount</span><span style="color:#A6ACCD;">()   </span><span style="color:#676E95;font-style:italic;">//UNSAFE_å¼€å¤´è¡¨ç¤ºv17å¯èƒ½ä¼šåºŸå¼ƒå®ƒ,å¯ä»¥ç”¨å‘½ä»¤è‡ªåŠ¨åŠ </span></span>
<span class="line"><span style="color:#A6ACCD;">            </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">render</span><span style="color:#A6ACCD;">() </span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">å”¯ä¸€å¿…é¡»å®ç°!!</span><span style="color:#89DDFF;">/</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">componentDidMount</span><span style="color:#A6ACCD;">()  </span><span style="color:#676E95;font-style:italic;">//åœ¨è¿™ä½¿ç”¨setState //æ‰€ä»¥åœ¨æœ€å¥½åœ¨è¿™Ajax,å› ä¸ºè·å¾—æ•°æ®åå¯ä»¥setState</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">//é”™è¯¯å¤„ç† </span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;font-style:italic;">//static getDerivedStateFromError()</span></span>
<span class="line"><span style="color:#89DDFF;">                </span><span style="color:#676E95;font-style:italic;">//componentDidCatch()</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span></span>
<span class="line"><span style="color:#A6ACCD;">æ›´æ–° </span><span style="color:#676E95;font-style:italic;">//å½“ç»„ä»¶çš„ props æˆ– state å‘ç”Ÿå˜åŒ–æ—¶ä¼šè§¦å‘æ›´æ–°ã€‚ç»„ä»¶æ›´æ–°çš„ç”Ÿå‘½å‘¨æœŸè°ƒç”¨é¡ºåºå¦‚ä¸‹ï¼š</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">UNSAFE_componentWillReceiveProps</span><span style="color:#A6ACCD;">(nextProps)</span><span style="color:#676E95;font-style:italic;">//åœ¨è¿™ä½¿ç”¨setState //UNSAFE_å¼€å¤´è¡¨ç¤ºv17å¯èƒ½ä¼šåºŸå¼ƒå®ƒ</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span></span>
<span class="line"><span style="color:#A6ACCD;">            (V17)static </span><span style="color:#82AAFF;">getDerivedStateFromProps</span><span style="color:#A6ACCD;">(props</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> state) åœ¨æ–°ç‰ˆæœ¬ç”¨æ¥æ›¿ä»£UNSAFE_componentWillReceiveProps</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">è®©ç»„ä»¶åœ¨Â props å˜åŒ–æ—¶æ›´æ–° state</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> stateObj </span><span style="color:#89DDFF;">||</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null</span><span style="color:#676E95;font-style:italic;">//å®ƒåº”è¿”å›ä¸€ä¸ªå¯¹è±¡æ¥æ›´æ–° stateï¼Œå¦‚æœè¿”å›Â nullÂ åˆ™ä¸æ›´æ–°ä»»ä½•å†…å®¹</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">shouldComponentUpdate</span><span style="color:#A6ACCD;">(nextProps</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">nextState)  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> bool</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">ç”¨æ¥æ€§èƒ½ä¼˜åŒ–</span><span style="color:#89DDFF;">/</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">UNSAFE_componentWillUpdate</span><span style="color:#A6ACCD;">() </span><span style="color:#676E95;font-style:italic;">//UNSAFE_å¼€å¤´è¡¨ç¤ºv17å¯èƒ½ä¼šåºŸå¼ƒå®ƒ</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">render</span><span style="color:#A6ACCD;">() </span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">å”¯ä¸€å¿…é¡»å®ç°!!</span><span style="color:#89DDFF;">/</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">        (V17)</span><span style="color:#82AAFF;">getSnapshotBeforeUpdate</span><span style="color:#A6ACCD;">(preProps</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">preState) åœ¨æ–°ç‰ˆæœ¬ç”¨æ¥æ›¿ä»£UNSAFE_componentWillUpdate</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> stateObj </span><span style="color:#89DDFF;">||</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">null</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//è¿”å›ä½œä¸ºå‚æ•°ç»™componentDidUpdate</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">componentDidUpdate</span><span style="color:#A6ACCD;">(preProps</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">preState</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">snapshot</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">å¸è½½  </span><span style="color:#676E95;font-style:italic;">//å½“ç»„ä»¶ä» DOM ä¸­ç§»é™¤æ—¶ä¼šè°ƒç”¨å¦‚ä¸‹æ–¹æ³•ï¼š</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">componentWillUnmount</span><span style="color:#A6ACCD;">()</span></span></code></pre></div><hr><blockquote><p>Reduxæ˜¯JavaScriptåº”ç”¨ç¨‹åºçš„å¯é¢„æµ‹çŠ¶æ€å®¹å™¨</p></blockquote><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">åŸç”Ÿredux</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">Â </span><span style="color:#A6ACCD;">createStore</span><span style="color:#F07178;">Â </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">redux</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//Reducer: å®šä¹‰stateåˆå§‹åŒ–å’Œä¿®æ”¹è§„åˆ™,reduceræ˜¯ä¸€ä¸ªçº¯å‡½æ•°</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;">Â </span><span style="color:#82AAFF;">counterReducer</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">state</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">Â </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">Â </span><span style="color:#A6ACCD;font-style:italic;">action</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;">{</span><span style="color:#676E95;font-style:italic;">//dispatch(action) è·³åˆ°è¿™é‡Œæ¥</span></span>
<span class="line"><span style="color:#F07178;">          </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">type</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">payload</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">action</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        Â Â 2</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">switch</span><span style="color:#F07178;">Â (</span><span style="color:#A6ACCD;">action</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">type</span><span style="color:#F07178;">)Â </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        Â Â Â Â </span><span style="color:#89DDFF;font-style:italic;">case</span><span style="color:#F07178;">Â </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ADD</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">:Â Â Â Â Â Â </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;">Â </span><span style="color:#A6ACCD;">state</span><span style="color:#F07178;">Â </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;">Â </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        Â Â Â Â </span><span style="color:#89DDFF;font-style:italic;">case</span><span style="color:#F07178;">Â </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">MINUS</span><span style="color:#89DDFF;">&quot;</span><span style="color:#F07178;">:Â Â Â Â </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;">Â </span><span style="color:#A6ACCD;">state</span><span style="color:#F07178;">Â </span><span style="color:#89DDFF;">-</span><span style="color:#F07178;">Â </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        Â Â Â Â </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#F07178;">:Â Â Â Â Â Â    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;">Â 3</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        Â Â </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">              </span><span style="color:#676E95;font-style:italic;">//ä¸å¯å˜çš„setæ–¹æ³•ä»…è®¾ç½®ç«‹å³å±æ€§ï¼Œå³å¯¹è±¡çš„ç›´æ¥å­ä»£ã€‚Â setInè®©æ‚¨è®¾ç½®æ•°æ®ä¸­ä»»ä½•æ·±åº¦èŠ‚ç‚¹çš„å€¼ã€‚Â </span></span>
<span class="line"><span style="color:#89DDFF;">              </span><span style="color:#676E95;font-style:italic;">//setä»…é‡‡ç”¨å±æ€§åç§°ã€‚Â setInä½¿ç”¨é”®/ç´¢å¼•æ•°ç»„æ¥æ·±å…¥åµŒå¥—çš„å…ƒç´ </span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;">Â storeÂ </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">Â </span><span style="color:#82AAFF;">createStore</span><span style="color:#A6ACCD;">(counterReducer</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;">å¯é€‰applyMiddleware</span><span style="color:#A6ACCD;">(ä¸­é—´ä»¶thunk</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">ä¸­é—´ä»¶logger))</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;">Â store</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//ç±»çš„ä½¿ç”¨:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;">Â storeÂ </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">../store/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;">Â </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;">Â </span><span style="color:#FFCB6B;">ReduxPage</span><span style="color:#A6ACCD;">Â </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;">Â </span><span style="color:#FFCB6B;">Component</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        Â Â </span><span style="color:#F07178;">componentDidMount</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        Â Â Â Â Â 4</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">store</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">subscribe</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">()</span><span style="color:#F07178;">Â </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;">Â </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">forceUpdate</span><span style="color:#F07178;">()Â })</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        Â Â </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        Â Â </span><span style="color:#F07178;">render</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        Â Â Â Â </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;">Â (</span></span>
<span class="line"><span style="color:#F07178;">        Â Â Â Â Â Â </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        Â Â Â Â Â Â Â Â </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">p</span><span style="color:#89DDFF;">&gt;{</span><span style="color:#A6ACCD;">store</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getState</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">}&lt;/</span><span style="color:#F07178;">p</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        Â Â Â Â Â Â Â Â </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">Â </span><span style="color:#C792EA;">onClick</span><span style="color:#89DDFF;">={()</span><span style="color:#A6ACCD;">Â </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;">Â 1</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">store</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">dispatch</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">Â </span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ADD</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">payload</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">å†…å®¹</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">}&gt;</span><span style="color:#A6ACCD;">add</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        Â Â Â Â Â Â </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#F07178;">        Â Â Â Â )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">        Â Â </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//å‡½æ•°å¼ç»„ä»¶çš„ä½¿ç”¨:</span></span>
<span class="line"><span style="color:#A6ACCD;">        Â Â </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">state</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">Â dispatch</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">Â </span><span style="color:#82AAFF;">useReducer</span><span style="color:#A6ACCD;">(counterReducer</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">Â è¿™é‡Œå¯ä»¥å¤„ç†ä¸€ä¸‹åˆå§‹å€¼</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">0</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">react</span><span style="color:#89DDFF;">-</span><span style="color:#FFCB6B;">redux</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//ä½¿ç”¨ React Reduxï¼Œä½ çš„ç»„ä»¶æ°¸è¿œä¸ä¼šç›´æ¥è®¿é—®store</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//æŠŠProvideræ”¾åœ¨æ ¹ç»„ä»¶å¤–å±‚ï¼Œä½¿å­ç»„ä»¶èƒ½è·å¾—store</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">Â </span><span style="color:#A6ACCD;">Provider</span><span style="color:#F07178;">Â </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">react-redux</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">Provider</span><span style="color:#89DDFF;">Â </span><span style="color:#C792EA;">store</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">store</span><span style="color:#89DDFF;">}&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">App</span><span style="color:#89DDFF;">Â /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#FFCB6B;">Provider</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//ç”¨æ³•1:é«˜é˜¶ç»„ä»¶</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">Â </span><span style="color:#A6ACCD;">connect</span><span style="color:#F07178;">Â </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">react-redux</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;">Â </span><span style="color:#FFCB6B;">ReactReduxPage</span><span style="color:#A6ACCD;">Â </span><span style="color:#C792EA;">extends</span><span style="color:#A6ACCD;">Â </span><span style="color:#FFCB6B;">Component</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">////è¿˜æœ‰å†™æ³•2, è£…é¥°å™¨å†™æ³•@connect</span></span>
<span class="line"><span style="color:#A6ACCD;">            Â Â Â Â </span><span style="color:#F07178;">render</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            Â Â Â Â Â Â </span><span style="color:#C792EA;">const</span><span style="color:#F07178;">Â </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">Â </span><span style="color:#A6ACCD;">num</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">Â </span><span style="color:#A6ACCD;">dispatch</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">Â </span><span style="color:#A6ACCD;">add</span><span style="color:#F07178;">Â </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">Â </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;">Â </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">props</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">            Â Â Â Â Â Â </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">props</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">Â </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">props</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">            Â Â Â Â Â Â </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;">Â (Â Â Â Â Â Â Â </span></span>
<span class="line"><span style="color:#F07178;">            Â Â Â Â Â Â Â Â Â Â </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">p</span><span style="color:#89DDFF;">&gt;{</span><span style="color:#A6ACCD;">num</span><span style="color:#89DDFF;">}&lt;/</span><span style="color:#F07178;">p</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#F07178;">            Â Â Â Â Â Â Â Â Â Â </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">Â </span><span style="color:#C792EA;">onClick</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">add</span><span style="color:#89DDFF;">}&gt;</span><span style="color:#A6ACCD;">add</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">button</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#F07178;">            Â Â Â Â Â Â )</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">            Â Â Â Â </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;font-style:italic;">default</span><span style="color:#A6ACCD;">Â </span><span style="color:#82AAFF;">connect</span><span style="color:#A6ACCD;">(   </span><span style="color:#676E95;font-style:italic;">//connectè¿”å›ä¸€ä¸ªé«˜é˜¶ç»„ä»¶å‡½æ•°, åŠ å¼ºäº†ç»„ä»¶Â </span></span>
<span class="line"><span style="color:#A6ACCD;">        Â Â </span><span style="color:#A6ACCD;font-style:italic;">state</span><span style="color:#A6ACCD;">Â </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;">Â (</span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;">...</span><span style="color:#A6ACCD;">stateÂ </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;">//mapStateToPropsÂ æŠŠstateæ˜ å°„åˆ°props    Â Â </span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">dispatch</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;">    </span><span style="color:#82AAFF;">increment</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">()</span><span style="color:#F07178;"> </span><span style="color:#C792EA;">=&gt;</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">dispatch</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> type</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">INCREMENT</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">  </span><span style="color:#A6ACCD;">dispatch</span><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}}</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//mapDispatchToProps</span></span>
<span class="line"><span style="color:#89DDFF;">          </span><span style="color:#676E95;font-style:italic;">//mergeProps?: (stateProps, dispatchProps, ownProps) =&gt; Object //return value as this.props</span></span>
<span class="line"><span style="color:#A6ACCD;">        )(ReactReduxPage)</span></span>
<span class="line"><span style="color:#89DDFF;">  </span><span style="color:#676E95;font-style:italic;">//ç”¨æ³•2: hook</span></span>
<span class="line"><span style="color:#A6ACCD;">      Â Â </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;">Â countÂ </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">Â </span><span style="color:#82AAFF;">useSelector</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">({</span><span style="color:#A6ACCD;font-style:italic;">count</span><span style="color:#89DDFF;">})</span><span style="color:#A6ACCD;">Â </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;">Â count)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;">Â dispatchÂ </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">Â </span><span style="color:#82AAFF;">useDispatch</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span></span>
<span class="line"><span style="color:#A6ACCD;">ä¸­é—´ä»¶saga </span><span style="color:#676E95;font-style:italic;">//ä¸­é—´ä»¶thunkæ›´å®¹æ˜“å½¢æˆåµŒå¥—åœ°ç‹±</span></span>
<span class="line"><span style="color:#A6ACCD;">    ç®¡ç†å‰¯ä½œç”¨</span><span style="color:#676E95;font-style:italic;">//è®©æœ‰é¡ºåºè¦æ±‚çš„å¼‚æ­¥æ“ä½œæŒ‰é¡ºåºæ‰§è¡Œ</span></span>
<span class="line"><span style="color:#A6ACCD;">        callå’Œfork</span></span>
<span class="line"><span style="color:#A6ACCD;">         Â Â Â </span><span style="color:#676E95;font-style:italic;">//Â callÂ æ˜¯é˜»å¡å‹è°ƒç”¨Â generatoråœ¨è°ƒç”¨ç»“æŸä¹‹å‰ä¸æ‰§è¡Œå…¶ä»–äº‹æƒ…</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">//Â forkæ˜¯éé˜»å¡å‹è°ƒç”¨Â ä»»åŠ¡åœ¨åå°å¯åŠ¨Â è°ƒç”¨è€…å¯ä»¥ç»§ç»­è‡ªå·±çš„æµç¨‹ï¼Œä¸ç”¨ç­‰å¾…forkä»»åŠ¡ç»“æŸ</span></span>
<span class="line"><span style="color:#A6ACCD;">        put</span><span style="color:#676E95;font-style:italic;">/*dispatchæ´¾å‘*/</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">        takeå’ŒtakeEveryä¸€æ¬¡å’ŒæŒç»­ç›‘å¬</span></span>
<span class="line"><span style="color:#A6ACCD;">    è·¯ç”±å®ˆå«</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">ä¸­é—´ä»¶redux</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">observable</span><span style="color:#676E95;font-style:italic;">//ç±»ä¼¼saga,ä½†å®ƒæ˜¯é“¾å¼æ“ä½œ</span></span></code></pre></div><hr><blockquote><p>react-router</p></blockquote><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;">Â  </span><span style="color:#89DDFF;">{</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">BrowserRouter</span><span style="color:#F07178;">Â </span><span style="color:#89DDFF;font-style:italic;">as</span><span style="color:#F07178;">Â </span><span style="color:#A6ACCD;">Router</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">Â </span><span style="color:#A6ACCD;">HashRouter</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Link</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;">Â </span><span style="color:#A6ACCD;">NavLink</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">MemoryRouter</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Prompt</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Redirect</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Route</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Router</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">StaticRouter</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Switch</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">generatePath</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">matchPath</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">useHistory</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">useLocation</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">useParams</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">useRouteMatch</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">withRouter</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">react-router</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span><span style="color:#A6ACCD;"> </span><span style="color:#676E95;font-style:italic;">//v5</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">withRouter</span><span style="color:#A6ACCD;">(ç»„ä»¶)</span><span style="color:#676E95;font-style:italic;">// withRouteræ³¨å…¥ history, location, matchç­‰åˆ°props</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">æä¾›äº†ä¸¤ç§ä¸åŒçš„è·¯ç”±ï¼š</span></span>
<span class="line"><span style="color:#A6ACCD;">    BrowserRouter</span></span>
<span class="line"><span style="color:#A6ACCD;">    HashRouter</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">Router</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">Â Â </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">Link</span><span style="color:#89DDFF;">Â </span><span style="color:#C792EA;">to</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">é¦–é¡µ</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#FFCB6B;">Link</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">Â Â </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">Link</span><span style="color:#89DDFF;">Â </span><span style="color:#C792EA;">to</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/user</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">ç”¨æˆ·ä¸­å¿ƒ</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#FFCB6B;">Link</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">Â Â </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">Switch</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">//ç‹¬å è·¯ç”±,åŒ¹é…åˆ°äº†åé¢å°±éƒ½ä¸ç®¡äº†</span></span>
<span class="line"><span style="color:#A6ACCD;">Â    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">Route</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">path</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/a/:b?</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">/&gt;</span><span style="color:#A6ACCD;"> //å¯åŒ¹é… /a  /a/xxx </span></span>
<span class="line"><span style="color:#A6ACCD;">Â Â Â Â </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">Route</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">path</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span></span>
<span class="line"><span style="color:#89DDFF;">Â Â Â Â Â Â </span><span style="color:#676E95;font-style:italic;">//Â component={HomePage}  //ä¼šæ³¨å…¥ history, location, matchåˆ°ç»„ä»¶çš„props</span></span>
<span class="line"><span style="color:#89DDFF;">Â Â Â  Â Â </span><span style="color:#676E95;font-style:italic;">//Â children={()Â =&gt;Â &lt;div&gt;children&lt;/div&gt;}</span></span>
<span class="line"><span style="color:#89DDFF;">Â Â Â Â Â Â </span><span style="color:#C792EA;">render</span><span style="color:#89DDFF;">={()</span><span style="color:#A6ACCD;">Â </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">render</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">div</span><span style="color:#89DDFF;">&gt;}</span></span>
<span class="line"><span style="color:#89DDFF;">Â Â Â Â /&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">Â Â Â Â </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">Route</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">exact</span><span style="color:#89DDFF;"> Â </span><span style="color:#C792EA;">path</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/user</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">Â </span><span style="color:#C792EA;">component</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">UserPage</span><span style="color:#89DDFF;">}Â /&gt;</span><span style="color:#A6ACCD;">//exactç²¾ç¡®åŒ¹é…å®ƒä¸€ä¸ª, ä¸åŠ çš„è¯, /user/aä¹Ÿä¼šåŒ¹é…åˆ°å®ƒ</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">Route</span><span style="color:#89DDFF;">Â </span><span style="color:#C792EA;">path</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/product/:id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">Â </span><span style="color:#C792EA;">render</span><span style="color:#89DDFF;">={()</span><span style="color:#A6ACCD;">Â </span><span style="color:#C792EA;">=&gt;</span><span style="color:#A6ACCD;">Â </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">Product</span><span style="color:#89DDFF;">Â /&gt;}Â /&gt;</span><span style="color:#A6ACCD;">//åŠ¨æ€è·¯ç”±,match.params.id</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">Route</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">path</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">/(about|who)/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">component</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">Dashboard</span><span style="color:#89DDFF;">} /&gt;</span><span style="color:#A6ACCD;">//åŒ¹é…å¤šæ¡è·¯å¾„</span></span>
<span class="line"><span style="color:#A6ACCD;">Â Â Â Â </span><span style="color:#89DDFF;">&lt;</span><span style="color:#FFCB6B;">Route</span><span style="color:#89DDFF;">Â </span><span style="color:#C792EA;">component</span><span style="color:#89DDFF;">={</span><span style="color:#A6ACCD;">EmptyPage</span><span style="color:#89DDFF;">}Â /&gt;</span><span style="color:#A6ACCD;"> //æ— è®ºæ€ä¹ˆæ ·éƒ½ä¼šåŒ¹é…</span></span>
<span class="line"><span style="color:#A6ACCD;">Â Â </span><span style="color:#89DDFF;">&lt;/</span><span style="color:#FFCB6B;">Switch</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#FFCB6B;">Router</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">Routeæ¸²æŸ“ä¼˜å…ˆçº§</span><span style="color:#89DDFF;">:</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">children &gt; component &gt; render</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">//children,æ˜¯pathåŒ¹ä¸åŒ¹é…éƒ½ä¼šæ¸²æŸ“çš„</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">//å†…è”å‡½æ•°ä¸è¦ç”¨component, componentä¼šè°ƒç”¨React.createElement,å¦‚æœç”¨åŒ¿åå‡½æ•°çš„è¯æ¯æ¬¡ç”Ÿæˆçš„ç»„ä»¶typeä¸ä¸€æ ·,ä¼šé‡å¤å¸è½½æŒ‚è½½,æ€§èƒ½ä¸å¥½</span></span></code></pre></div><blockquote><p>Next</p></blockquote><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">Next</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">js:</span></span>
<span class="line"><span style="color:#A6ACCD;">    æ‰§è¡Œ next æ—¶</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">è¯»å–next</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">config</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">jsçš„å †æ ˆ:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">&lt;root&gt;</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">next.config.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">&lt;root&gt;</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">node_modules</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">next</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">dist</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">next-server</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">server</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">config.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">&lt;root&gt;</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">node_modules</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">next</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">dist</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">next-server</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">server</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">next-server.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">&lt;root&gt;</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">node_modules</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">next</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">dist</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">server</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">next.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">&lt;root&gt;</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">node_modules</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">next</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">dist</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">server</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">lib</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">start-server.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">&lt;root&gt;</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">node_modules</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">next</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">dist</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">cli</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">next-dev.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">&lt;root&gt;</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">node_modules</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">next</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">dist</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">bin</span><span style="color:#A6ACCD;">\\\\</span><span style="color:#C3E88D;">next</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">æœåŠ¡ç«¯å †æ ˆ</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        Home</span><span style="color:#676E95;font-style:italic;">//è¢«åœ¨æ‰“åŒ…åœ¨0.js é‡ŒÂ      //\\.next/server/0.jsÂ Â è¯¥æ–‡ä»¶åŒ…å«äº†Nav0.jsx,Content3.jsxÂ Â ,antMotionStyle.less,utils.jsç­‰ç­‰bundleÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </span></span>
<span class="line"><span style="color:#A6ACCD;">            processChildÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </span></span>
<span class="line"><span style="color:#A6ACCD;">            resolveÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </span></span>
<span class="line"><span style="color:#A6ACCD;">            renderÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </span></span>
<span class="line"><span style="color:#A6ACCD;">            readÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </span></span>
<span class="line"><span style="color:#A6ACCD;">            renderToStringÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â     </span><span style="color:#676E95;font-style:italic;">//node_modules/react-dom/cjs/react-dom-server\\.node\\.development.jsÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </span></span>
<span class="line"><span style="color:#A6ACCD;">                renderÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </span></span>
<span class="line"><span style="color:#A6ACCD;">                renderPageÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </span><span style="color:#676E95;font-style:italic;">//node_modules/next/dist/next-server/server/render.jsÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </span></span>
<span class="line"><span style="color:#A6ACCD;">                getInitialPropsÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </span><span style="color:#676E95;font-style:italic;">//\\.next/server/static/development/pages/_document.jsÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </span></span>
<span class="line"><span style="color:#A6ACCD;">                loadGetInitialPropsÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </span><span style="color:#676E95;font-style:italic;">//node_modules/next/dist/next-server/lib/utils.jsÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </span></span>
<span class="line"><span style="color:#A6ACCD;">                renderToHTMLÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </span><span style="color:#676E95;font-style:italic;">//node_modules/next/dist/next-server/server/render.jsÂ Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â Â </span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#FFCB6B;">å‰ç«¯å †æ ˆ</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">performSyncWorkOnRoot</span><span style="color:#A6ACCD;">(å¾ªç¯)</span></span>
<span class="line"><span style="color:#89DDFF;">             </span><span style="color:#676E95;font-style:italic;">//ç¬¬1æ¬¡æ˜¯è¿›construct, è¿‡ç¨‹:</span></span>
<span class="line"><span style="color:#89DDFF;">                 </span><span style="color:#676E95;font-style:italic;">//workLoopSync-&gt;performUnitOfWork-&gt;beginWork$1-&gt;updateClassComponent-&gt;constructClassInstance-&gt;Home.jsxçš„constructor</span></span>
<span class="line"><span style="color:#89DDFF;">             </span><span style="color:#676E95;font-style:italic;">//ç¬¬2æ¬¡æ˜¯è¿›:render, åè¿‡ç¨‹:</span></span>
<span class="line"><span style="color:#89DDFF;">                 </span><span style="color:#676E95;font-style:italic;">//render-&gt;finishClassComponent-&gt;updateClassComponent-&gt;beginWork-&gt;beginWork$1-&gt;performUnitOfWork-&gt;workLoopSync</span></span>
<span class="line"><span style="color:#89DDFF;">             </span><span style="color:#676E95;font-style:italic;">//ç¬¬3æ¬¡æ˜¯è¿›componentDidMount, åè¿‡ç¨‹:</span></span>
<span class="line"><span style="color:#89DDFF;">                 </span><span style="color:#676E95;font-style:italic;">//componentDidMount-&gt;commitLifeCycles-&gt;commitLayoutEffects-&gt;callCallback-&gt;invokeGuardedCallbackDev</span></span>
<span class="line"><span style="color:#89DDFF;">                 </span><span style="color:#676E95;font-style:italic;">//-&gt;invokeGuardedCallback-&gt;commitRootImpl-&gt;unstable_runWithPriority-&gt;runWithPriority$1-&gt;commitRoot-&gt;finishSyncRender</span></span>
<span class="line"><span style="color:#A6ACCD;">        scheduleUpdateOnFiber	                 </span></span>
<span class="line"><span style="color:#A6ACCD;">        updateContainer     	                 </span></span>
<span class="line"><span style="color:#A6ACCD;">        unbatchedUpdates	                         </span></span>
<span class="line"><span style="color:#A6ACCD;">        legacyRenderSubtreeIntoContainer	         </span></span>
<span class="line"><span style="color:#A6ACCD;">        hydrate	                                 </span><span style="color:#676E95;font-style:italic;">//react-dom.development.js:24823</span></span>
<span class="line"><span style="color:#A6ACCD;">            renderReactElement	                </span></span>
<span class="line"><span style="color:#A6ACCD;">            doRender	                        </span></span>
<span class="line"><span style="color:#A6ACCD;">            render	                                  </span><span style="color:#676E95;font-style:italic;">//webpack:///./node_modules/next/dist/client/index.js</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">requestAnimationFrame</span><span style="color:#A6ACCD;"> (async)		          </span></span>
<span class="line"><span style="color:#A6ACCD;">            displayContent      	                  </span><span style="color:#676E95;font-style:italic;">//webpack:///./node_modules/next/dist/client/dev/fouc.js</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#FFCB6B;">Promise</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">then</span><span style="color:#A6ACCD;"> (async)		          </span><span style="color:#676E95;font-style:italic;">//webpack:///./node_modules/next/dist/client/next-dev.js</span></span>
<span class="line"><span style="color:#A6ACCD;">                __webpack_require__                       </span></span>
<span class="line"><span style="color:#A6ACCD;">                checkDeferredModules	                   </span></span>
<span class="line"><span style="color:#A6ACCD;">                webpackJsonpCallback	          </span><span style="color:#676E95;font-style:italic;">//webpack:///webpack/bootstrap:32 </span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#FFCB6B;">http</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//localhost:3000/_next/static/runtime/main.js?ts=1585882815943Â Â Â Â Â Â Â Â Â </span></span>
<span class="line"><span style="color:#A6ACCD;">                </span></span>
<span class="line"><span style="color:#A6ACCD;">                </span></span>
<span class="line"><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pages/XXX.js</span><span style="color:#89DDFF;">&#39;</span><span style="color:#FFCB6B;">ä¸‹çš„3ä¸ªè·å–æ•°æ®çš„æ–¹æ³•çš„åŒºåˆ«</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">                            æœåŠ¡ç«¯      å®¢æˆ·ç«¯                 æ‰§è¡Œæ—¶é—´</span></span>
<span class="line"><span style="color:#A6ACCD;">        1</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">getInitialProps     </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;">        </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;">     åœ¨æ¸²æŸ“é¡µé¢ä¹‹å‰å°±ä¼šè¿è¡Œï¼ˆæœåŠ¡å™¨ç«¯ï¼‰æ‰§è¡Œ</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> è€Œå½“ä½¿ç”¨Next</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">Linkæˆ–Next</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">Routeråˆ‡æ¢é¡µé¢æ—¶ï¼Œåœ¨ï¼ˆå®¢æˆ·ç«¯ï¼‰æ‰§è¡ŒÂ Â </span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">/</span><span style="color:#C3E88D;">9.3ç‰ˆæœ¬åè¢«ä»¥ä¸‹2ä¸ªæ›¿ä»£äº†ä¸”åªèƒ½é€‰1ä¸ªæ¥ç”¨!!</span><span style="color:#89DDFF;">/</span></span>
<span class="line"><span style="color:#A6ACCD;">            1</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">1getStaticProps      </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;">        </span><span style="color:#FF9CAC;">false</span><span style="color:#A6ACCD;">      </span><span style="color:#82AAFF;">åœ¨buildæ—¶</span><span style="color:#A6ACCD;">(å®¢æˆ·ç«¯ä¸€è¯·æ±‚</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">æœåŠ¡ç«¯å°±build)å°±ææ•°æ®æ¥æ¸²æŸ“é¡µé¢</span></span>
<span class="line"><span style="color:#A6ACCD;">            1</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">2getServerSideProps  </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;">        </span><span style="color:#FF9CAC;">false</span><span style="color:#A6ACCD;">      åœ¨æ¯æ¬¡è¯·æ±‚æ—¶</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;">éƒ½ç”¨getServerSidePropsè¿”å›çš„æ•°æ®æ¥æ¸²æŸ“é¡µé¢</span></span>
<span class="line"><span style="color:#A6ACCD;">        2</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">getStaticPaths      </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;">        </span><span style="color:#FF9CAC;">false</span><span style="color:#A6ACCD;">      ä»…åœ¨å»ºé€ æ—¶ï¼ˆfallback </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;">ï¼‰</span><span style="color:#676E95;font-style:italic;">//ç”¨äºåœ¨ä½¿ç”¨åŠ¨æ€è·¯ç”±æ—¶ç”Ÿæˆé™æ€æ–‡ä»¶</span></span></code></pre></div><hr><blockquote><p>Reactæºç </p></blockquote><p><a href="https://p1.music.126.net/VU37zHp-6hAUfNaZbu3HRw==/109951165071751567.jpg%E7%B1%BB%E5%9B%BE" target="_blank" rel="noreferrer">https://p1.music.126.net/VU37zHp-6hAUfNaZbu3HRw==/109951165071751567.jpgç±»å›¾</a></p><h1 id="https-juejin-cn-post-7202085514400038969-heading-23ã€åŠ¨å›¾-å¤§ç™½è¯ğŸ“è§£æreactæºç ã€‘renderé˜¶æ®µä¸­fiberæ ‘çš„åˆå§‹åŒ–ä¸å¯¹æ¯”æ›´æ–°" tabindex="-1"><a href="https://juejin.cn/post/7202085514400038969#heading-23%E3%80%90%E5%8A%A8%E5%9B%BE+%E5%A4%A7%E7%99%BD%E8%AF%9D%F0%9F%8D%93%E8%A7%A3%E6%9E%90React%E6%BA%90%E7%A0%81%E3%80%91Render%E9%98%B6%E6%AE%B5%E4%B8%ADFiber%E6%A0%91%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%8E%E5%AF%B9%E6%AF%94%E6%9B%B4%E6%96%B0%EF%BD%9E" target="_blank" rel="noreferrer">https://juejin.cn/post/7202085514400038969#heading-23ã€åŠ¨å›¾+å¤§ç™½è¯ğŸ“è§£æReactæºç ã€‘Renderé˜¶æ®µä¸­Fiberæ ‘çš„åˆå§‹åŒ–ä¸å¯¹æ¯”æ›´æ–°ï½</a> <a class="header-anchor" href="#https-juejin-cn-post-7202085514400038969-heading-23ã€åŠ¨å›¾-å¤§ç™½è¯ğŸ“è§£æreactæºç ã€‘renderé˜¶æ®µä¸­fiberæ ‘çš„åˆå§‹åŒ–ä¸å¯¹æ¯”æ›´æ–°" aria-label="Permalink to &quot;https://juejin.cn/post/7202085514400038969#heading-23ã€åŠ¨å›¾+å¤§ç™½è¯ğŸ“è§£æReactæºç ã€‘Renderé˜¶æ®µä¸­Fiberæ ‘çš„åˆå§‹åŒ–ä¸å¯¹æ¯”æ›´æ–°ï½&quot;">â€‹</a></h1><div class="language-javascript"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight has-diff"><code><span class="line"><span style="color:#A6ACCD;">jsx â†’ React</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">createElement</span><span style="color:#A6ACCD;">() â†’ fiber â†’ DOM</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">Fiber</span><span style="color:#676E95;font-style:italic;">//å³è™šæ‹Ÿdom, ç”¨äºæè¿°ReactElementå¯¹è±¡åœ¨å†…å­˜ä¸­çš„çŠ¶æ€</span></span>
<span class="line"><span style="color:#A6ACCD;">    fiber1æ˜¯å½“å‰çš„æ—§çš„</span></span>
<span class="line"><span style="color:#A6ACCD;">    fiber2æ˜¯æ­£åœ¨æ„é€ çš„æ–°çš„</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">wip </span><span style="color:#676E95;font-style:italic;">//work in progress fiber</span></span>
<span class="line"><span style="color:#A6ACCD;">nextUnitOfWork </span><span style="color:#676E95;font-style:italic;">//å°†è¦æ›´æ–°çš„ä¸‹ä¸€ä¸ªfiber</span></span>
<span class="line"></span>
<span class="line"><span style="color:#82AAFF;">reconciliationåè°ƒ</span><span style="color:#A6ACCD;">(ä¹Ÿå°±æ˜¯diff)</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//ç®—æ³•å¤æ‚åº¦O(n) //æ¯ä¸ªèŠ‚ç‚¹éƒ½åªèµ°ä¸€é</span></span>
<span class="line"><span style="color:#A6ACCD;">    render é˜¶æ®µï¼šè¿™ä¸ªé˜¶æ®µæ˜¯å¯ä¸­æ–­çš„ï¼Œä¼šæ‰¾å‡ºæ‰€æœ‰èŠ‚ç‚¹çš„å˜æ›´</span></span>
<span class="line"><span style="color:#A6ACCD;">    commit é˜¶æ®µï¼šè¿™ä¸ªé˜¶æ®µæ˜¯ä¸å¯ä¸­æ–­çš„ï¼Œä¼šæ‰§è¡Œæ‰€æœ‰çš„å˜æ›´</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">renderæ—¶</span></span>
<span class="line"><span style="color:#A6ACCD;">    createRootFiber</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">scheduleUpdateOnFiber</span><span style="color:#A6ACCD;">(rootFilber)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">requestIdleCallback</span><span style="color:#A6ACCD;">(workLoop)</span><span style="color:#676E95;font-style:italic;">//Reactè‡ªå·±å®ç°äº†æ›¿ä»£requestIdleCallbackçš„scheduler</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">//workLoop ä¸€ç›´å–performUnitOfWork è¿”å›çš„ next.sibling æˆ– next.return.sibling,  ç›´åˆ°æ‹¿ä¸åˆ°å°±è·³å‡ºå¾ªç¯</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">performUnitOfWork</span><span style="color:#A6ACCD;">(renderé˜¶æ®µ) </span><span style="color:#89DDFF;">||</span><span style="color:#A6ACCD;"> Â </span><span style="color:#82AAFF;">commitRoot</span><span style="color:#A6ACCD;">(commité˜¶æ®µ)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">                updateHostComponent </span><span style="color:#89DDFF;">||</span><span style="color:#A6ACCD;"> updateFunctionComponent</span></span>
<span class="line"><span style="color:#A6ACCD;">                    reconcileChildren </span><span style="color:#676E95;font-style:italic;">//diff child</span></span></code></pre></div>`,20),e=[o];function t(c,r,y,D,F,C){return n(),a("div",null,e)}const u=s(p,[["render",t]]);export{i as __pageData,u as default};
